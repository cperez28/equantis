<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Equantis ITB</title>
  <style>
    :root{
      --bg:#0b1220; --bg-soft:#102038;
      --card:#0e1627; --muted:#8aa0b8; --text:#eef2f7;
      --accent:#60a5fa; --accent-2:#22d3ee;
      --accent-soft: rgba(96,165,250,.18); --accent-border: rgba(96,165,250,.35);
      --good:#22c55e; --bad:#ef4444; --warn:#f59e0b;
      --input:#0b1426; --border: rgba(148,163,184,.28);
      --shadow: 0 12px 30px rgba(2,6,23,.35);
      --ribbon:#0ea5e9;
    }
    [data-theme="light"]{
      --bg:#f5f7fb; --bg-soft:#e7eef9;
      --card:#ffffff; --muted:#526071; --text:#0b1220;
      --accent:#2563eb; --accent-2:#06b6d4;
      --accent-soft: rgba(37,99,235,.14); --accent-border: rgba(37,99,235,.35);
      --good:#16a34a; --bad:#dc2626; --warn:#d97706;
      --input:#fff; --border: rgba(2,6,23,.15);
      --shadow: 0 12px 30px rgba(2,6,23,.10);
      --ribbon:#2563eb;
    }
    /* --- Temas suaves --- */
    [data-theme="pink"]{
      --bg:#fff0f6; --bg-soft:#ffe3ef;
      --card:#ffffff; --muted:#6b4258; --text:#2b1a24;
      --accent:#e11d77; --accent-2:#f472b6;
      --accent-soft: rgba(225,29,119,.14); --accent-border: rgba(225,29,119,.30);
      --good:#16a34a; --bad:#dc2626; --warn:#d97706;
      --input:#ffffff; --border: rgba(225,29,119,.18);
      --shadow: 0 10px 26px rgba(225,29,119,.12);
      --ribbon:#e11d77;
    }
    [data-theme="celeste"]{
      --bg:#eaf6ff; --bg-soft:#d8efff;
      --card:#ffffff; --muted:#35566f; --text:#082433;
      --accent:#0284c7; --accent-2:#22d3ee;
      --accent-soft: rgba(2,132,199,.14); --accent-border: rgba(2,132,199,.30);
      --good:#0f9d72; --bad:#dc2626; --warn:#d97706;
      --input:#ffffff; --border: rgba(2,132,199,.20);
      --shadow: 0 10px 26px rgba(2,132,199,.10);
      --ribbon:#0284c7;
    }

    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(1200px 700px at 10% -10%, var(--bg-soft) 0%, var(--bg) 60%);
      color:var(--text)
    }
    .wrap{max-width:1240px; margin:0 auto; padding:22px}
    h1{font-size:28px; margin:0 0 4px}
    .sub{color:var(--muted); margin-bottom:14px}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.008));
      border:1px solid var(--border); border-radius:18px; padding:16px;
      box-shadow: var(--shadow);
    }
    select,input,button,textarea{
      background:var(--input); color:var(--text); border:1px solid var(--border);
      padding:10px 12px; border-radius:12px; outline:none; font-size:14px;
    }
    button{
      cursor:pointer; border:1px solid var(--accent-border);
      background:linear-gradient(180deg, var(--accent-soft), rgba(34,211,238,.08));
      transition:.18s transform ease, box-shadow .2s ease;
      box-shadow:0 6px 18px var(--accent-soft);
    }
    button:hover{transform:translateY(-1px)}
    .tabs{display:flex; gap:8px}
    .tab{padding:8px 14px; border-radius:999px; border:1px solid var(--border); color:var(--text); cursor:pointer}
    .tab.active{border-color:var(--accent); background:var(--accent-soft)}
    .grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:16px}
    .col-8{grid-column: span 8} .col-4{grid-column: span 4} .col-6{grid-column: span 6}
    @media (max-width:900px){.col-8,.col-4,.col-6{grid-column:1 / -1}}
    .equation{font-size:26px; font-weight:800; letter-spacing:.2px; margin:4px 0 8px}
    .target{font-size:16px; color:var(--muted); margin-bottom:8px}
    .input-preview{border:1px solid var(--border); background:var(--card); border-radius:10px; padding:8px 10px;}
    .input-preview .preview-tex{font-size:18px; font-weight:600;}
    .input-preview .preview-msg{margin-top:4px; color:var(--bad);}
    

    .muted{color:var(--muted); font-size:13px} .small{font-size:12px}
    .status{padding:12px 12px; border-radius:12px; margin-top:10px; border:1px dashed rgba(148,163,184,.45)}
    .ok{border-color:rgba(34,197,94,.55); background:rgba(34,197,94,.12)}
    .err{border-color:rgba(239,68,68,.55); background:rgba(239,68,68,.10)}
    .warn{border-color:rgba(245,158,11,.55); background:rgba(245,158,11,.10)}
    .badge{font-size:12px; padding:4px 8px; border-radius:10px; background:rgba(148,163,184,.15); border:1px solid var(--border)}
    .hidden{display:none !important}
    .input-stack{display:flex; flex-direction:column; gap:8px}
    .panel{ position:relative; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.005)); border:1px solid var(--border); border-radius:14px; padding:10px; }
    .panel .panel-tabs{display:flex; gap:6px; flex-wrap:wrap; margin-bottom:6px}
    .panel .panel-tab{padding:6px 10px; border:1px solid var(--border); border-radius:999px; cursor:pointer; font-size:12px}
    .panel .panel-tab.active{background:var(--accent-soft); border-color:var(--accent)}
    .panel-grid{display:grid; grid-template-columns: repeat(12, minmax(32px, 1fr)); gap:6px}
    .kbtn{ padding:8px 8px; border-radius:10px; border:1px solid var(--border); background:var(--card);
      text-align:center; user-select:none; font-size:14px; line-height:1; box-shadow:0 2px 10px rgba(0,0,0,.06) }
    .kbtn:active{transform:scale(.98)}
    .kbtn.wide{grid-column: span 2}
    .vars-chips{display:flex; gap:6px; flex-wrap:wrap; margin-top:4px}
    .level-wrap{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .level-select{padding:6px 8px; font-size:13px}
    #levels-table{width:100%; border-collapse:separate; border-spacing:0 6px}
    #levels-table th,#levels-table td{padding:6px 8px; font-size:12px}
    #levels-table tr{background:var(--input); border:1px solid var(--border)}

    /* Logo junto al título */
    .logo{height:100px; width:auto; object-fit:contain; border-radius:8px}
    @media (max-width:520px){ .logo { height: 36px; } }

    /* Pie de página */
    .footer{
      max-width:1240px; margin:22px auto 0; padding:10px 22px;
      color:var(--muted); font-size:12px; border-top:1px dashed var(--border);
      text-align:center; opacity:.95;
    }

    /* ===== Menú de tema ===== */
    .theme-wrap{ position:relative; }
    .theme-menu{
      position:absolute; right:0; top:calc(100% + 6px);
      min-width:220px; z-index:40;
      background:var(--card); border:1px solid var(--border); border-radius:12px;
      box-shadow: var(--shadow); padding:6px;
      display:none;
    }
    .theme-menu.open{ display:block; }
    .theme-item{
      display:flex; align-items:center; gap:10px;
      padding:8px 10px; border-radius:10px; cursor:pointer;
    }
    .theme-item:hover{ background:rgba(148,163,184,.12); }
    .theme-item.active{ outline:2px solid var(--accent-border); }
    .swatch{ width:18px; height:18px; border-radius:50%; border:1px solid var(--border); }
    .swatch.dark{ background:#0b1220; }
    .swatch.light{ background:#f5f7fb; }
    .swatch.pink{ background:#f472b6; }
    .swatch.celeste{ background:#38bdf8; }

    /* ====== Perfiles (tipo Netflix) ====== */
    .profile-btn{
      display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:12px;
      background:linear-gradient(180deg, var(--accent-soft), rgba(34,211,238,.06));
      border:1px solid var(--accent-border);
    }
    .avatar{
      width:28px; height:28px; border-radius:50%; display:inline-grid; place-items:center;
      font-weight:700; font-size:13px; color:#fff; user-select:none;
    }
    .profiles-ov{
      position:fixed; inset:0; z-index:50; background:rgba(2,6,23,.55);
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .profiles-card{
      width:min(720px, 96vw); background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px 18px 8px;
      box-shadow: var(--shadow);
    }
    .profiles-title{ font-size:18px; font-weight:800; margin-bottom:10px }
    .profiles-grid{ display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:12px; }
    @media (max-width:740px){ .profiles-grid{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
    .p-card{
      padding:12px; border:1px solid var(--border); border-radius:14px; background:var(--bg);
      display:flex; flex-direction:column; gap:8px; align-items:center; text-align:center; cursor:pointer;
      transition:.15s transform ease;
    }
    .p-card:hover{ transform:translateY(-2px); }
    .p-name{ font-size:14px; font-weight:600 }
    .p-actions{ display:flex; gap:8px }
    .p-small{ font-size:12px; color:var(--muted) }
    .p-add{ border:2px dashed var(--border); background:transparent }
    .profiles-toolbar{ display:flex; justify-content:space-between; align-items:center; margin:6px 2px 12px; }
    .ghost{ background:transparent; border:1px dashed var(--border); }
  </style>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.11.0/lib/browser/math.js"></script>
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['\\[','\\]'], ['$$','$$']], tags:'none' },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="header row" style="justify-content:space-between; align-items:flex-start">
      <div>
        <!-- TÍTULO + LOGO -->
        <div class="row" style="align-items:center; gap:12px">
          <img class="logo" src="logo.png" alt="Logo" onerror="this.style.display='none'">
          <div>
            <h1 style="font-size: 40px;">Equantis</h1>
            <div class="sub">Despejes de Variables • Fisica • Examen y Práctica</div>
            <div class="tabs">
              <div class="tab active" data-tab="tab-practica">Práctica</div>
              <div class="tab" data-tab="tab-examen">Examen</div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <!-- Campo “nombre” ahora solo lectura: usa el perfil actual -->
        <input id="student-name" placeholder="Nombre del estudiante" readonly title="Derivado del perfil seleccionado" />
        <!-- Botón de tema con menú -->
        <div class="theme-wrap">
          <button id="btn-theme" aria-haspopup="menu" aria-expanded="false" title="Tema">🌓 Tema ▾</button>
          <div id="theme-menu" class="theme-menu" role="menu" aria-label="Seleccionar tema">
            <div class="theme-item" data-theme="dark" role="menuitem">
              <span class="swatch dark"></span> Oscuro
            </div>
            <div class="theme-item" data-theme="light" role="menuitem">
              <span class="swatch light"></span> Claro
            </div>
            <div class="theme-item" data-theme="pink" role="menuitem">
              <span class="swatch pink"></span> Pink paleta
            </div>
            <div class="theme-item" data-theme="celeste" role="menuitem">
              <span class="swatch celeste"></span> Celeste paleta
            </div>
          </div>
        </div>
        <!-- Botón de perfil -->
        <button id="btn-profile" class="profile-btn" title="Cambiar perfil">
          <span id="profile-avatar" class="avatar" style="background:#64748b">?</span>
          <span id="profile-name">Perfil</span>
        </button>
      </div>
    </div>

    <!-- PRACTICA -->
    <div id="tab-practica" class="grid" style="margin-top:14px">
      <div class="col-8">
        <div class="card"><div id="target" class="target">Despeja: —</div>

          <div id="equation" class="equation"><span class="tex">(—)</span></div>
          
<div class="row level-wrap"> 
            <label class="small muted">Nivel:
              <select id="nivel" class="level-select">
                <option value="0">Todos</option>
                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
              </select>
            </label>
            <button id="btn-nuevo">🧮 Nuevo</button>
            <button id="btn-revelar" title="Disponible tras 10 fallos" disabled>👀 Revelar</button>
          </div>

          <div class="input-stack">
            <input id="respuesta" type="text" placeholder="Tu expresión..." />
            
<div id="respuesta-preview" class="input-preview hidden">
  <div class="small muted">Vista previa interpretada</div>
  <div id="preview-tex-practice" class="preview-tex">(—)</div>
  <div id="preview-msg-practice" class="preview-msg small"></div>
</div>
<div id="panel" class="panel">
              <div class="panel-tabs">
                <div class="panel-tab active" data-tab="numbers">Números</div>
                <div class="panel-tab" data-tab="symbols">Símbolos</div>
                <div class="panel-tab" data-tab="alphabet">Alfabeto</div>
                <div class="panel-tab" data-tab="greek">Griegas</div>
              </div>
              <div class="panel-grid" id="panel-grid"></div>
              <div class="vars-chips" id="vars-chips"></div>
            </div>
          </div>

          <div class="row" style="gap:8px; margin-top:6px">
            <button id="btn-check">✔️ Comprobar</button>
            <button id="btn-limpiar">🧼 Limpiar</button>
          </div>

          <div id="estado" class="status warn hidden" style="margin-top:8px"></div>
        </div>
      </div>

      <div class="col-4">
        <div class="card">
          <div class="row" style="justify-content:space-between; align-items:center">
            <div class="muted">Banco de fórmulas</div>
            <span class="badge" id="badge-count">— fórmulas</span>
          </div>
          <div class="row" style="margin-top:6px">
            <select id="filt-categoria">
              <option value="todas">Todas</option>
              <option value="fisica">Física</option>
              <option value="matematicas">Matemáticas</option>
              <option value="quimica">Química</option>
              <option value="finanzas">Finanzas</option>
            </select>
            <select id="filt-tema">
              <option value="todos">Todos los temas</option>
              <option value="cinematica">Cinemática</option>
              <option value="dinamica">Dinámica</option>
              <option value="electricidad">Electricidad</option>
              <option value="ondas">Ondas/Óptica</option>
              <option value="geometria">Geometría</option>
              <option value="algebra">Álgebra</option>
              <option value="gases">Gases ideales</option>
              <option value="financiero">Financiero</option>
            </select>
            <select id="filt-nivel" title="Nivel del banco">
              <option value="0">Nivel (todos)</option>
              <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
              <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
            </select>
          </div>
          <div id="lista-formulas" style="margin-top:10px; max-height:420px; overflow:auto; display:grid; gap:8px"></div>
        </div>

        <!-- Resumen práctica -->
        <div class="card" style="margin-top:16px">
          <div class="row" style="justify-content:space-between; align-items:center">
            <div class="muted">Resumen de práctica</div>
            <span class="badge" id="practice-acc">—</span>
          </div>
          <div class="small" id="practice-summary" style="margin-top:8px">
            Aciertos: 0 · Fallos: 0 · Intentos: 0 · Precisión: 0% · Racha: 0
          </div>
          <div class="small muted" style="margin-top:6px">Por nivel</div>
          <table id="levels-table">
            <thead><tr><th>Nivel</th><th>Intentos</th><th>Aciertos</th><th>Fallos</th><th>Precisión</th></tr></thead>
            <tbody id="levels-body"></tbody>
          </table>
          <div class="row" style="margin-top:8px">
            <button id="btn-export-practice">⬇️ Exportar CSV</button>
            <button id="btn-export-practice-pdf">🧾 PDF</button>
            <button id="btn-reset-practice">🗑️ Reset</button>
          </div>
        </div>
      </div>
    </div>

    <!-- EXAMEN -->
    <div id="tab-examen" class="grid hidden" style="margin-top:14px">
      <div class="col-8">
        <div class="card">
          <div class="row" style="justify-content:space-between; align-items:center">
            <div><span class="badge" id="exam-progress">—/—</span></div>
            <div class="muted">Responde con la expresión equivalente.</div>
          </div><div id="exam-target" class="target">Despeja: —</div>

          <div id="exam-eq" class="equation"><span class="tex">(—)</span></div>
          
<div class="row level-wrap" style="margin-bottom:6px"> 
            <label class="small muted">Nivel:
              <select id="exam-nivel" class="level-select">
                <option value="0">Todos</option>
                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
              </select>
            </label>
          </div>
          <div class="input-stack">
            <input id="exam-ans" type="text" placeholder="Tu expresión..." />
            
<div id="exam-preview" class="input-preview hidden">
  <div class="small muted">Vista previa interpretada</div>
  <div id="preview-tex-exam" class="preview-tex">(—)</div>
  <div id="preview-msg-exam" class="preview-msg small"></div>
</div>
<div id="panel-exam" class="panel">
              <div class="panel-tabs">
                <div class="panel-tab active" data-tab="numbers">Números</div>
                <div class="panel-tab" data-tab="symbols">Símbolos</div>
                <div class="panel-tab" data-tab="alphabet">Alfabeto</div>
                <div class="panel-tab" data-tab="greek">Griegas</div>
              </div>
              <div class="panel-grid" id="panel-grid-exam"></div>
            </div>
          </div>
          <div class="row" style="gap:8px; margin-top:6px">
            <button id="btn-exam-check" disabled>✔️ Responder</button>
            <button id="btn-exam-skip" disabled>⏭️ Omitir</button>
            <button id="btn-exam-end" disabled>⏹️ Terminar</button>
            <button id="btn-exam-pdf" disabled>🧾 PDF</button>
          </div>
          <div id="exam-status" class="status warn hidden"></div>
          <div id="exam-summary" class="small muted" style="margin-top:8px"></div>
        </div>
      </div>
      <div class="col-4">
        <div class="card">
          <div class="muted">Configuración de examen</div>
          <div class="row" style="flex-direction:column; gap:8px; margin-top:8px">
            <label class="small">Categoría:
              <select id="exam-cat" style="width:100%">
                <option value="todas">Todas</option>
                <option value="fisica">Física</option>
                <option value="matematicas">Matemáticas</option>
                <option value="quimica">Química</option>
                <option value="finanzas">Finanzas</option>
              </select>
            </label>
            <label class="small">Tema:
              <select id="exam-tema" style="width:100%">
                <option value="todos">Todos</option>
                <option value="cinematica">Cinemática</option>
                <option value="dinamica">Dinámica</option>
                <option value="electricidad">Electricidad</option>
                <option value="ondas">Ondas/Óptica</option>
                <option value="geometria">Geometría</option>
                <option value="algebra">Álgebra</option>
                <option value="gases">Gases ideales</option>
                <option value="financiero">Financiero</option>
              </select>
            </label>
            <label class="small"># Preguntas:
              <input id="exam-n" type="number" min="3" max="50" value="10" style="width:100%"/>
            </label>
            <label class="small">Tiempo (min):
              <input id="exam-min" type="number" min="1" max="120" value="15" style="width:100%"/>
            </label>
            <button id="btn-start-exam">🚀 Iniciar examen</button>
            <div class="badge" id="exam-timer">⏱️ 00:00</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- OVERLAY PERFILES -->
  <div id="profiles-overlay" class="profiles-ov hidden" aria-modal="true" role="dialog" aria-labelledby="profiles-title">
    <div class="profiles-card">
      <div class="profiles-toolbar">
        <div id="profiles-title" class="profiles-title">Elige tu perfil</div>
        <div class="row">
          <button id="profiles-close" class="ghost">Cerrar</button>
        </div>
      </div>
      <div id="profiles-grid" class="profiles-grid"></div>
      <div class="p-small" style="margin:10px 2px 12px">Consejo: crea una tarjeta por estudiante para que su progreso quede separado en esta computadora.</div>
    </div>
  </div>

  <!-- PIE DE PÁGINA -->
  <div class="footer">Diseñado por: <strong>Cristino Pérez</strong>.</div>

<script>
(function(){
  const $=(s)=>document.querySelector(s);
  const $$=(s)=>Array.from(document.querySelectorAll(s));

  // ====== Util: colores avatar fijos ======
  const AV_COLORS = ['#f97316','#22c55e','#06b6d4','#a855f7','#ef4444','#eab308','#0ea5e9','#14b8a6','#8b5cf6','#f43f5e'];

  // ===== Tema con menú =====
  const THEMES = ['dark','light','pink','celeste'];
  function setTheme(t){
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('dv_theme', t);
    const btn = $('#btn-theme'); if(btn) btn.title = 'Tema: ' + t;
    highlightActiveThemeItem(t);
  }
  const savedTheme = localStorage.getItem('dv_theme') || document.documentElement.getAttribute('data-theme') || 'dark';
  setTheme(savedTheme);
  const themeBtn = $('#btn-theme');
  const themeMenu = $('#theme-menu');
  function openThemeMenu(){ themeMenu.classList.add('open'); themeBtn.setAttribute('aria-expanded','true'); }
  function closeThemeMenu(){ themeMenu.classList.remove('open'); themeBtn.setAttribute('aria-expanded','false'); }
  function toggleThemeMenu(){ themeMenu.classList.contains('open')?closeThemeMenu():openThemeMenu(); }
  themeBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); toggleThemeMenu(); });
  document.addEventListener('click', (e)=>{ if(!themeMenu.contains(e.target) && e.target!==themeBtn) closeThemeMenu(); });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeThemeMenu(); });
  function highlightActiveThemeItem(cur){ $$('#theme-menu .theme-item').forEach(it=>{ it.classList.toggle('active', it.dataset.theme===cur); }); }
  $$('#theme-menu .theme-item').forEach(it=> it.addEventListener('click', ()=>{ const t=it.dataset.theme; if(THEMES.includes(t)) setTheme(t); closeThemeMenu(); }));

  // ====== Perfiles (almacenamiento local) ======
  let PROFILE = null; // {id,name,color}
  function uid(){ return 'p'+Math.random().toString(36).slice(2,10); }
  function loadProfiles(){ try { return JSON.parse(localStorage.getItem('dv_profiles')||'[]'); } catch(e){ return []; } }
  function saveProfiles(list){ localStorage.setItem('dv_profiles', JSON.stringify(list)); }
  function getProfileById(id){ return loadProfiles().find(p=>p.id===id) || null; }
  function key(k){ if(!PROFILE) return 'dv:'+k; return `dv:${PROFILE.id}:${k}`; }

  // Migración desde versión antigua (si existía un solo alumno)
  (function migrateIfNeeded(){
    const profiles = loadProfiles();
    if(profiles.length===0){
      const legacyName = (localStorage.getItem('dv_student_name')||'').trim();
      const hasLegacy = localStorage.getItem('dv_practice') || localStorage.getItem('dv_practice_levels') || legacyName;
      if(hasLegacy){
        const id = uid();
        const name = legacyName || 'Estudiante';
        const color = AV_COLORS[Math.floor(Math.random()*AV_COLORS.length)];
        saveProfiles([{id,name,color}]);
        localStorage.setItem('dv_current_profile', id);
        // migrar progreso
        const pr = localStorage.getItem('dv_practice');
        const pl = localStorage.getItem('dv_practice_levels');
        if(pr) localStorage.setItem(`dv:${id}:practice`, pr);
        if(pl) localStorage.setItem(`dv:${id}:practice_levels`, pl);
        localStorage.setItem(`dv:${id}:name`, name);
      }
    }
  })();

  function setProfile(p){
    PROFILE = p;
    if(!PROFILE){ return; }
    localStorage.setItem('dv_current_profile', PROFILE.id);
    // UI header
    $('#profile-name').textContent = PROFILE.name;
    $('#student-name').value = PROFILE.name;
    const av = $('#profile-avatar');
    av.textContent = (PROFILE.name.trim()[0]||'?').toUpperCase();
    av.style.background = PROFILE.color || AV_COLORS[0];
    // Cargar progreso del perfil
    practice = JSON.parse(localStorage.getItem(key('practice'))||'{"tries":0,"ok":0,"fail":0,"streak":0}');
    practiceLevels = JSON.parse(localStorage.getItem(key('practice_levels'))||'{}');
    updatePracticeSummary();
    renderBankList();
    startNew();
  }

  function ensureProfileSelected(){
    const curId = localStorage.getItem('dv_current_profile');
    const p = curId ? getProfileById(curId) : null;
    if(p){ setProfile(p); return; }
    openProfilesOverlay(); // fuerza selección/creación
  }

  function openProfilesOverlay(){
    renderProfiles();
    $('#profiles-overlay').classList.remove('hidden');
  }
  function closeProfilesOverlay(){ $('#profiles-overlay').classList.add('hidden'); }

  function renderProfiles(){
    const grid = $('#profiles-grid'); grid.innerHTML='';
    const list = loadProfiles();
    list.forEach(p=>{
      const card = document.createElement('div'); card.className = 'p-card';
      card.innerHTML = `
        <div class="avatar" style="background:${p.color||'#64748b'}; width:64px; height:64px; font-size:22px">${(p.name[0]||'?').toUpperCase()}</div>
        <div class="p-name">${p.name}</div>
        <div class="p-actions">
          <button class="ghost btn-delete">🗑️ Eliminar</button>
        </div>
        <div class="p-small">Click para entrar</div>
      `;
      card.addEventListener('click', (e)=>{
        if(e.target.closest('.btn-delete')) return;
        setProfile(p);
        closeProfilesOverlay();
      });
      card.querySelector('.btn-delete').addEventListener('click', (e)=>{
        e.stopPropagation();
        if(!confirm('¿Eliminar este perfil y su progreso local? Esta acción no se puede deshacer.')) return;
        const list2 = loadProfiles().filter(x=> x.id!==p.id);
        saveProfiles(list2);
        // Borrar llaves de progreso
        ['practice','practice_levels','name'].forEach(k=> localStorage.removeItem(`dv:${p.id}:${k}`));
        if(PROFILE && PROFILE.id===p.id){ PROFILE=null; }
        renderProfiles();
      });
      grid.appendChild(card);
    });
    // Tarjeta para añadir
    const add = document.createElement('div'); add.className='p-card p-add';
    add.innerHTML = `
      <div class="avatar" style="background:#94a3b8; width:64px; height:64px; font-size:26px">+</div>
      <div class="p-name">Agregar perfil</div>
      <div class="p-small">Crea una tarjeta</div>`;
    add.addEventListener('click', ()=>{
      const name = prompt('Nombre del estudiante:');
      if(!name) return;
      const color = AV_COLORS[Math.floor(Math.random()*AV_COLORS.length)];
      const p = {id:uid(), name:name.trim(), color};
      const list = loadProfiles(); list.push(p); saveProfiles(list);
      localStorage.setItem(`dv:${p.id}:name`, p.name);
      renderProfiles();
    });
    grid.appendChild(add);
  }

  $('#btn-profile').addEventListener('click', openProfilesOverlay);
  $('#profiles-close').addEventListener('click', closeProfilesOverlay);

  // ===== Nombre del estudiante (derivado del perfil)
  const studentNameInput=$('#student-name');
  function requireStudentName(){
    if(!PROFILE){ alert('Selecciona un perfil.'); openProfilesOverlay(); return null; }
    const n = PROFILE.name.trim();
    if(!n){ alert('El perfil no tiene nombre.'); return null; }
    return n;
  }

  // ===== Banco con TeX (un solo backslash) =====
  const BANK = [
    { id:'ohm', nivel:2, categoria:'fisica', display:'V = I · R', tex:'V = I\\cdot R', vars:['V','I','R'],
      solutions:{ V:'I*R', I:'V/R', R:'V/I' }, constraints:{nonZero:['I','R']}, tags:['electricidad'] },
    { id:'newton2', nivel:2, categoria:'fisica', display:'F = m · a', tex:'F = m a', vars:['F','m','a'],
      solutions:{ F:'m*a', m:'F/a', a:'F/m' }, constraints:{nonZero:['a','m']}, tags:['dinamica'] },
    { id:'velocidad', nivel:1, categoria:'fisica', display:'v = d / t', tex:'v = \\dfrac{d}{t}', vars:['v','d','t'],
      solutions:{ v:'d/t', d:'v*t', t:'d/v' }, constraints:{nonZero:['t','v']}, tags:['cinematica'] },
    { id:'mruv1', nivel:3, categoria:'fisica', display:'v = u + a · t', tex:'v = u + a t', vars:['v','u','a','t'],
      solutions:{ u:'v-a*t', a:'(v-u)/t', t:'(v-u)/a' }, constraints:{nonZero:['t','a']}, tags:['cinematica','dinamica'] },
    { id:'mruv3', nivel:4, categoria:'fisica', display:'v^2 = u^2 + 2·a·s', tex:'v^2 = u^2 + 2 a s', vars:['v','u','a','s'],
      solutions:{ v:'sqrt(u^2+2*a*s)', u:'sqrt(v^2-2*a*s)', a:'(v^2-u^2)/(2*s)', s:'(v^2-u^2)/(2*a)' },
    constraints:{nonZero:['a','s']}, tags:['cinematica'] },
    { id:'potencia_electrica', nivel:1, categoria:'fisica', display:'P = V · I', tex:'P = V I', vars:['P','V','I'],
      solutions:{ P:'V*I', V:'P/I', I:'P/V' }, constraints:{nonZero:['V','I']}, tags:['electricidad'] },
    { id:'onda', nivel:2, categoria:'fisica', display:'v = f · λ', tex:'v = f\\,\\lambda', vars:['v','f','lambda'],
      solutions:{ v:'f*lambda', f:'v/lambda', lambda:'v/f' }, constraints:{nonZero:['f','lambda']}, tags:['ondas'] },
    { id:'lente_delgada', nivel:5, categoria:'fisica', display:'1/f = 1/do + 1/di', tex:'\\frac{1}{f} = \\frac{1}{d_o} + \\frac{1}{d_i}', vars:['f','do','di'],
      solutions:{ f:'1/(1/do + 1/di)', di:'1/(1/f - 1/do)', do:'1/(1/f - 1/di)' }, tags:['optica','ondas'] },
    { id:'densidad', nivel:1, categoria:'quimica', display:'ρ = m / V', tex:'\\rho = \\dfrac{m}{V}', vars:['rho','m','V'],
      solutions:{ rho:'m/V', m:'rho*V', V:'m/rho' }, constraints:{nonZero:['V','rho']}, tags:['gases'] },
    { id:'gas_ideal', nivel:4, categoria:'quimica', display:'P·V = n·R·T', tex:'PV = nRT', vars:['P','V','n','R','T'],
      solutions:{ P:'(n*R*T)/V', V:'(n*R*T)/P', n:'(P*V)/(R*T)', R:'(P*V)/(n*T)', T:'(P*V)/(n*R)' }, constraints:{nonZero:['V','P','R','T','n']}, tags:['gases'] },
    { id:'circunferencia', nivel:1, categoria:'matematicas', display:'C = 2 · π · r', tex:'C = 2\\pi r', vars:['C','r','pi'],
      solutions:{ C:'2*pi*r', r:'C/(2*pi)' }, constraints:{nonZero:['pi']}, tags:['geometria'] },
    { id:'area_circulo', nivel:2, categoria:'matematicas', display:'A = π · r^2', tex:'A = \\pi r^2', vars:['A','r','pi'],
      solutions:{ A:'pi*r^2', r:'sqrt(A/pi)' }, constraints:{positive:['A','pi']}, tags:['geometria'] },
    { id:'lineal1', nivel:3, categoria:'matematicas', display:'y = a·x + b', tex:'y = a x + b', vars:['y','a','x','b'],
      solutions:{ y:'a*x+b', x:'(y-b)/a', a:'(y-b)/x', b:'y-a*x' }, constraints:{nonZero:['a','x']}, tags:['algebra'] },
    { id:'interes_simple', nivel:2, categoria:'finanzas', display:'I = P · r · t', tex:'I = P r t', vars:['I','P','r','t'],
      solutions:{ I:'P*r*t', P:'I/(r*t)', r:'I/(P*t)', t:'I/(P*r)' }, constraints:{nonZero:['P','r','t']}, tags:['financiero'] },
    { id:'interes_compuesto', nivel:6, categoria:'finanzas', display:'A = P · (1 + r/n)^(n·t)', tex:'A = P(1+\\tfrac{r}{n})^{n t}', vars:['A','P','r','n','t'],
      solutions:{ A:'P*(1+r/n)^(n*t)', P:'A/(1+r/n)^(n*t)' }, constraints:{nonZero:['n']}, tags:['financiero'] },

      
  {
    id:'l1_x_mas_a_igual_b',
    nivel:1, categoria:'matematicas',
    display:'x + a = b', tex:'x + a = b',
    vars:['x','a','b'],
    solutions:{ x:'b-a', a:'b-x', b:'x+a' },
    tags:['algebra']
  },
  {
    id:'l1_x_menos_a_igual_b',
    nivel:1, categoria:'matematicas',
    display:'x - a = b', tex:'x - a = b',
    vars:['x','a','b'],
    solutions:{ x:'b+a', a:'x-b', b:'x-a' },
    tags:['algebra']
  },
  {
    id:'l1_kx_igual_b',
    nivel:1, categoria:'matematicas',
    display:'k x = b', tex:'k x = b',
    vars:['k','x','b'],
    solutions:{ x:'b/k', k:'b/x', b:'k*x' },
    constraints:{ nonZero:['k','x'] },
    tags:['algebra']
  },
  {
    id:'l1_x_sobre_c_igual_d',
    nivel:1, categoria:'matematicas',
    display:'x / c = d', tex:'\\dfrac{x}{c} = d',
    vars:['x','c','d'],
    solutions:{ x:'c*d', c:'x/d', d:'x/c' },
    constraints:{ nonZero:['c','d'] },
    tags:['algebra']
  },
  {
    id:'l1_menos_x_igual_a',
    nivel:1, categoria:'matematicas',
    display:'-x = a', tex:'-x = a',
    vars:['x','a'],
    solutions:{ x:'-a', a:'-x' },
    tags:['algebra']
  },
  {
    id:'l1_vt_igual_d',
    nivel:1, categoria:'fisica',
    display:'v · t = d', tex:'v\\,t = d',
    vars:['v','t','d'],
    solutions:{ v:'d/t', t:'d/v', d:'v*t' },
    constraints:{ nonZero:['t','v'] },
    tags:['cinematica']
  },
  {
    id:'l1_I_igual_Q_sobre_t',
    nivel:1, categoria:'fisica',
    display:'I = Q / t', tex:'I = \\dfrac{Q}{t}',
    vars:['I','Q','t'],
    solutions:{ I:'Q/t', Q:'I*t', t:'Q/I' },
    constraints:{ nonZero:['t','I'] },
    tags:['electricidad']
  },
  {
    id:'l1_V_igual_Q_sobre_C',
    nivel:1, categoria:'fisica',
    display:'V = Q / C', tex:'V = \\dfrac{Q}{C}',
    vars:['V','Q','C'],
    solutions:{ V:'Q/C', Q:'V*C', C:'Q/V' },
    constraints:{ nonZero:['C','V'] },
    tags:['electricidad']
  },
  {
    id:'l1_W_igual_mg',
    nivel:1, categoria:'fisica',
    display:'W = m g', tex:'W = m g',
    vars:['W','m','g'],
    solutions:{ W:'m*g', m:'W/g', g:'W/m' },
    constraints:{ nonZero:['m','g'] },
    tags:['dinamica']
  },
  {
    id:'l1_F_igual_kx',
    nivel:1, categoria:'fisica',
    display:'F = k x', tex:'F = k x',
    vars:['F','k','x'],
    solutions:{ F:'k*x', k:'F/x', x:'F/k' },
    constraints:{ nonZero:['x','k'] },
    tags:['dinamica']
  },
  {
    id:'l1_pV_igual_nRT',
    nivel:1, categoria:'quimica',
    display:'p V = n R T', tex:'pV = nRT',
    vars:['p','V','n','R','T'],
    solutions:{
      p:'(n*R*T)/V',
      V:'(n*R*T)/p',
      n:'(p*V)/(R*T)',
      R:'(p*V)/(n*T)',
      T:'(p*V)/(n*R)'
    },
    constraints:{ nonZero:['V','p','R','T','n'] },
    tags:['gases']
  },
  {
    id:'l1_P_igual_F_sobre_A',
    nivel:1, categoria:'fisica',
    display:'P = F / A', tex:'P = \\dfrac{F}{A}',
    vars:['P','F','A'],
    solutions:{ P:'F/A', F:'P*A', A:'F/P' },
    constraints:{ nonZero:['A','P'] },
    tags:['dinamica']
  },
  {
    id:'l1_V_igual_IR',
    nivel:1, categoria:'fisica',
    display:'V = I R', tex:'V = I R',
    vars:['V','I','R'],
    solutions:{ V:'I*R', I:'V/R', R:'V/I' },
    constraints:{ nonZero:['R','I'] },
    tags:['electricidad']
  },
  {
    id:'l1_P_igual_V2_sobre_R',
    nivel:1, categoria:'fisica',
    display:'P = V^2 / R', tex:'P = \\dfrac{V^2}{R}',
    vars:['P','V','R'],
    solutions:{ P:'V^2/R', V:'sqrt(P*R)', R:'V^2/P' },
    constraints:{ nonZero:['R','P'], positive:['P','R'] },
    tags:['electricidad']
  },
  {
    id:'l1_P_igual_IV',
    nivel:1, categoria:'fisica',
    display:'P = I V', tex:'P = I V',
    vars:['P','I','V'],
    solutions:{ P:'I*V', I:'P/V', V:'P/I' },
    constraints:{ nonZero:['V','I'] },
    tags:['electricidad']
  },
  {
    id:'l1_x_igual_c_mas_d',
    nivel:1, categoria:'matematicas',
    display:'x = c + d', tex:'x = c + d',
    vars:['x','c','d'],
    solutions:{ x:'c+d', c:'x-d', d:'x-c' },
    tags:['algebra']
  },
  {
    id:'l1_x_igual_d_menos_c',
    nivel:1, categoria:'matematicas',
    display:'x = d - c', tex:'x = d - c',
    vars:['x','d','c'],
    solutions:{ x:'d-c', d:'x+c', c:'d-x' },
    tags:['algebra']
  },
  {
    id:'l1_y_igual_kx',
    nivel:1, categoria:'matematicas',
    display:'y = k x', tex:'y = k x',
    vars:['y','k','x'],
    solutions:{ y:'k*x', k:'y/x', x:'y/k' },
    constraints:{ nonZero:['x','k'] },
    tags:['algebra']
  },
  {
    id:'l1_y_igual_k_sobre_x',
    nivel:1, categoria:'matematicas',
    display:'y = k / x', tex:'y = \\dfrac{k}{x}',
    vars:['y','k','x'],
    solutions:{ y:'k/x', x:'k/y', k:'x*y' },
    constraints:{ nonZero:['x','y'] },
    tags:['algebra']
  },
  {
    id:'l1_raizx_igual_a',
    nivel:1, categoria:'matematicas',
    display:'√x = a', tex:'\\sqrt{x} = a',
    vars:['x','a'],
    solutions:{ x:'a^2', a:'sqrt(x)' },
    constraints:{ positive:['x'] },
    tags:['algebra']
  },
  {
    id:'l1_y_mas_b_igual_c',
    nivel:1, categoria:'matematicas',
    display:'y + b = c', tex:'y + b = c',
    vars:['y','b','c'],
    solutions:{ y:'c-b', b:'c-y', c:'y+b' },
    tags:['algebra']
  },
  {
    id:'l1_y_menos_b_igual_c',
    nivel:1, categoria:'matematicas',
    display:'y - b = c', tex:'y - b = c',
    vars:['y','b','c'],
    solutions:{ y:'c+b', b:'y-c', c:'y-b' },
    tags:['algebra']
  },
  {
    id:'l1_a_por_y_igual_z',
    nivel:1, categoria:'matematicas',
    display:'a y = z', tex:'a y = z',
    vars:['a','y','z'],
    solutions:{ y:'z/a', a:'z/y', z:'a*y' },
    constraints:{ nonZero:['a','y'] },
    tags:['algebra']
  },
  {
    id:'l1_y_sobre_n_igual_q',
    nivel:1, categoria:'matematicas',
    display:'y / n = q', tex:'\\dfrac{y}{n} = q',
    vars:['y','n','q'],
    solutions:{ y:'n*q', n:'y/q', q:'y/n' },
    constraints:{ nonZero:['n','q'] },
    tags:['algebra']
  },
  {
    id:'l1_menos_y_igual_k',
    nivel:1, categoria:'matematicas',
    display:'-y = k', tex:'-y = k',
    vars:['y','k'],
    solutions:{ y:'-k', k:'-y' },
    tags:['algebra']
  },
  {
    id:'l1_tau_igual_rF',
    nivel:1, categoria:'fisica',
    display:'τ = r F', tex:'\\tau = r F',
    vars:['tau','r','F'],
    solutions:{ tau:'r*F', r:'tau/F', F:'tau/r' },
    constraints:{ nonZero:['r','F'] },
    tags:['dinamica']
  },
  {
    id:'l1_p_igual_m_v',
    nivel:1, categoria:'fisica',
    display:'p = m v', tex:'p = m v',
    vars:['p','m','v'],
    solutions:{ p:'m*v', m:'p/v', v:'p/m' },
    constraints:{ nonZero:['m','v'] },
    tags:['dinamica']
  },
  {
    id:'l1_W_igual_Fd',
    nivel:1, categoria:'fisica',
    display:'W = F d', tex:'W = F d',
    vars:['W','F','d'],
    solutions:{ W:'F*d', F:'W/d', d:'W/F' },
    constraints:{ nonZero:['F','d'] },
    tags:['dinamica']
  },
  {
    id:'l1_Q_igual_I_t',
    nivel:1, categoria:'fisica',
    display:'Q = I t', tex:'Q = I t',
    vars:['Q','I','t'],
    solutions:{ Q:'I*t', I:'Q/t', t:'Q/I' },
    constraints:{ nonZero:['I','t'] },
    tags:['electricidad']
  },
  {
    id:'l1_V_igual_W_sobre_q',
    nivel:1, categoria:'fisica',
    display:'V = W / q', tex:'V = \\dfrac{W}{q}',
    vars:['V','W','q'],
    solutions:{ V:'W/q', W:'V*q', q:'W/V' },
    constraints:{ nonZero:['q','V'] },
    tags:['electricidad']
  },
  {
    id:'l1_C_igual_Q_sobre_V',
    nivel:1, categoria:'fisica',
    display:'C = Q / V', tex:'C = \\dfrac{Q}{V}',
    vars:['C','Q','V'],
    solutions:{ C:'Q/V', Q:'C*V', V:'Q/C' },
    constraints:{ nonZero:['V','C'] },
    tags:['electricidad']
  },
  {
    id:'l1_R_igual_V_sobre_I',
    nivel:1, categoria:'fisica',
    display:'R = V / I', tex:'R = \\dfrac{V}{I}',
    vars:['R','V','I'],
    solutions:{ R:'V/I', V:'R*I', I:'V/R' },
    constraints:{ nonZero:['I','R'] },
    tags:['electricidad']
  },
  {
    id:'l1_A_igual_lw',
    nivel:1, categoria:'matematicas',
    display:'A = l w', tex:'A = l w',
    vars:['A','l','w'],
    solutions:{ A:'l*w', l:'A/w', w:'A/l' },
    constraints:{ nonZero:['l','w'] },
    tags:['geometria']
  },
  {
    id:'l1_Circunferencia_igual_2pir',
    nivel:1, categoria:'matematicas',
    display:'C = 2 · π · r', tex:'C = 2\\pi r',
    vars:['C','r','pi'],
    solutions:{ C:'2*pi*r', r:'C/(2*pi)', pi:'C/(2*r)' },
    constraints:{ nonZero:['pi','r'] },
    tags:['geometria']
  },
  {
    id:'l1_rho_igual_m_sobre_V',
    nivel:1, categoria:'quimica',
    display:'ρ = m / V', tex:'\\rho = \\dfrac{m}{V}',
    vars:['rho','m','V'],
    solutions:{ rho:'m/V', m:'rho*V', V:'m/rho' },
    constraints:{ nonZero:['V','rho'] },
    tags:['gases']
  },
  {
    id:'l1_n_igual_m_sobre_M',
    nivel:1, categoria:'quimica',
    display:'n = m / M', tex:'n = \\dfrac{m}{M}',
    vars:['n','m','M'],
    solutions:{ n:'m/M', m:'n*M', M:'m/n' },
    constraints:{ nonZero:['M','n'] },
    tags:['gases']
  },
  {
    id:'l1_f_igual_1_sobre_T',
    nivel:1, categoria:'fisica',
    display:'f = 1 / T', tex:'f = \\dfrac{1}{T}',
    vars:['f','T'],
    solutions:{ f:'1/T', T:'1/f' },
    constraints:{ nonZero:['T','f'] },
    tags:['ondas']
  },
  {
    id:'l1_sigma_igual_F_sobre_A',
    nivel:1, categoria:'fisica',
    display:'σ = F / A', tex:'\\sigma = \\dfrac{F}{A}',
    vars:['sigma','F','A'],
    solutions:{ sigma:'F/A', F:'sigma*A', A:'F/sigma' },
    constraints:{ nonZero:['A','sigma'] },
    tags:['dinamica']
  },
  {
    id:'l1_y_igual_menos_x',
    nivel:1, categoria:'matematicas',
    display:'y = -x', tex:'y = -x',
    vars:['y','x'],
    solutions:{ y:'-x', x:'-y' },
    tags:['algebra']
  },
  {
    id:'l1_y_igual_x_sobre_k',
    nivel:1, categoria:'matematicas',
    display:'y = x / k', tex:'y = \\dfrac{x}{k}',
    vars:['y','x','k'],
    solutions:{ y:'x/k', x:'y*k', k:'x/y' },
    constraints:{ nonZero:['k','y'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_alpha_mas_x_igual_beta',
    nivel:1, categoria:'matematicas',
    display:'α + x = β', tex:'\\alpha + x = \\beta',
    vars:['alpha','x','beta'],
    solutions:{ alpha:'beta - x', x:'beta - alpha', beta:'alpha + x' },
    tags:['algebra']
  },
  {
    id:'l1_gk_x_menos_beta_igual_gamma',
    nivel:1, categoria:'matematicas',
    display:'x - β = γ', tex:'x - \\beta = \\gamma',
    vars:['x','beta','gamma'],
    solutions:{ x:'gamma + beta', beta:'x - gamma', gamma:'x - beta' },
    tags:['algebra']
  },
  {
    id:'l1_gk_lambda_y_igual_mu',
    nivel:1, categoria:'matematicas',
    display:'λ y = μ', tex:'\\lambda y = \\mu',
    vars:['lambda','y','mu'],
    solutions:{ y:'mu/lambda', lambda:'mu/y', mu:'lambda*y' },
    constraints:{ nonZero:['lambda','y'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_z_sobre_mu_igual_gamma',
    nivel:1, categoria:'matematicas',
    display:'z / μ = γ', tex:'\\dfrac{z}{\\mu} = \\gamma',
    vars:['z','mu','gamma'],
    solutions:{ z:'mu*gamma', mu:'z/gamma', gamma:'z/mu' },
    constraints:{ nonZero:['mu','gamma'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_menos_alpha_igual_k',
    nivel:1, categoria:'matematicas',
    display:'-α = k', tex:'-\\alpha = k',
    vars:['alpha','k'],
    solutions:{ alpha:'-k', k:'-alpha' },
    tags:['algebra']
  },
  {
    id:'l1_gk_theta_t_igual_beta',
    nivel:1, categoria:'matematicas',
    display:'θ t = β', tex:'\\theta t = \\beta',
    vars:['theta','t','beta'],
    solutions:{ theta:'beta/t', t:'beta/theta', beta:'theta*t' },
    constraints:{ nonZero:['t','theta'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_q_igual_sigma_sobre_x',
    nivel:1, categoria:'matematicas',
    display:'q = σ / x', tex:'q = \\dfrac{\\sigma}{x}',
    vars:['q','sigma','x'],
    solutions:{ q:'sigma/x', sigma:'q*x', x:'sigma/q' },
    constraints:{ nonZero:['x','q'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_y_igual_x_sobre_lambda',
    nivel:1, categoria:'matematicas',
    display:'y = x / λ', tex:'y = \\dfrac{x}{\\lambda}',
    vars:['y','x','lambda'],
    solutions:{ y:'x/lambda', x:'y*lambda', lambda:'x/y' },
    constraints:{ nonZero:['lambda','y'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_a_mas_beta_igual_c',
    nivel:1, categoria:'matematicas',
    display:'a + β = c', tex:'a + \\beta = c',
    vars:['a','beta','c'],
    solutions:{ a:'c - beta', beta:'c - a', c:'a + beta' },
    tags:['algebra']
  },
  {
    id:'l1_gk_Delta_menos_x_igual_y',
    nivel:1, categoria:'matematicas',
    display:'Δ - x = y', tex:'\\Delta - x = y',
    vars:['delta','x','y'],
    solutions:{ delta:'x + y', x:'delta - y', y:'delta - x' },
    tags:['algebra']
  },
  {
    id:'l1_gk_Omega_k_igual_x',
    nivel:1, categoria:'matematicas',
    display:'Ω k = x', tex:'\\Omega\\,k = x',
    vars:['Omega','k','x'],
    solutions:{ Omega:'x/k', k:'x/Omega', x:'Omega*k' },
    constraints:{ nonZero:['k','Omega'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_sigma_igual_y_sobre_a',
    nivel:1, categoria:'matematicas',
    display:'σ = y / a', tex:'\\sigma = \\dfrac{y}{a}',
    vars:['sigma','y','a'],
    solutions:{ sigma:'y/a', y:'sigma*a', a:'y/sigma' },
    constraints:{ nonZero:['a','sigma'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_mu_igual_m_sobre_n',
    nivel:1, categoria:'matematicas',
    display:'μ = m / n', tex:'\\mu = \\dfrac{m}{n}',
    vars:['mu','m','n'],
    solutions:{ mu:'m/n', m:'mu*n', n:'m/mu' },
    constraints:{ nonZero:['n','mu'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_theta_igual_x_sobre_y',
    nivel:1, categoria:'matematicas',
    display:'θ = x / y', tex:'\\theta = \\dfrac{x}{y}',
    vars:['theta','x','y'],
    solutions:{ theta:'x/y', x:'theta*y', y:'x/theta' },
    constraints:{ nonZero:['y','theta'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_rho_mas_m_igual_V',
    nivel:1, categoria:'matematicas',
    display:'ρ + m = V', tex:'\\rho + m = V',
    vars:['rho','m','V'],
    solutions:{ rho:'V - m', m:'V - rho', V:'rho + m' },
    tags:['algebra']
  },
  {
    id:'l1_gk_C_igual_pi_d',
    nivel:1, categoria:'matematicas',
    display:'C = π d', tex:'C = \\pi d',
    vars:['C','pi','d'],
    solutions:{ C:'pi*d', pi:'C/d', d:'C/pi' },
    constraints:{ nonZero:['d','pi'] },
    tags:['geometria']
  },
  {
    id:'l1_gk_beta_igual_x_menos_a',
    nivel:1, categoria:'matematicas',
    display:'β = x - a', tex:'\\beta = x - a',
    vars:['beta','x','a'],
    solutions:{ beta:'x - a', x:'beta + a', a:'x - beta' },
    tags:['algebra']
  },
  {
    id:'l1_gk_gamma_igual_a_mas_x',
    nivel:1, categoria:'matematicas',
    display:'γ = a + x', tex:'\\gamma = a + x',
    vars:['gamma','a','x'],
    solutions:{ gamma:'a + x', a:'gamma - x', x:'gamma - a' },
    tags:['algebra']
  },
  {
    id:'l1_gk_lambda_igual_x_sobre_k',
    nivel:1, categoria:'matematicas',
    display:'λ = x / k', tex:'\\lambda = \\dfrac{x}{k}',
    vars:['lambda','x','k'],
    solutions:{ lambda:'x/k', x:'lambda*k', k:'x/lambda' },
    constraints:{ nonZero:['k','lambda'] },
    tags:['algebra']
  },
  {
    id:'l1_gk_x_igual_mu_sobre_k',
    nivel:1, categoria:'matematicas',
    display:'x = μ / k', tex:'x = \\dfrac{\\mu}{k}',
    vars:['x','mu','k'],
    solutions:{ x:'mu/k', mu:'x*k', k:'mu/x' },
    constraints:{ nonZero:['k','x'] },
    tags:['algebra']
  },
  {
    id:'l1_sub_x1_mas_a_igual_b',
    nivel:1, categoria:'matematicas',
    display:'x₁ + a = b', tex:'x_{1} + a = b',
    vars:['x_1','a','b'],
    solutions:{ x_1:'b-a', a:'b-x_1', b:'x_1+a' },
    tags:['algebra']
  },
  {
    id:'l1_sub_y2_menos_c_igual_d',
    nivel:1, categoria:'matematicas',
    display:'y₂ - c = d', tex:'y_{2} - c = d',
    vars:['y_2','c','d'],
    solutions:{ y_2:'d+c', c:'y_2-d', d:'y_2-c' },
    tags:['algebra']
  },
  {
    id:'l1_sub_kx1_igual_b',
    nivel:1, categoria:'matematicas',
    display:'k x₁ = b', tex:'k x_{1} = b',
    vars:['k','x_1','b'],
    solutions:{ x_1:'b/k', k:'b/x_1', b:'k*x_1' },
    constraints:{ nonZero:['k','x_1'] },
    tags:['algebra']
  },
  {
    id:'l1_sub_x2_sobre_c_igual_d',
    nivel:1, categoria:'matematicas',
    display:'x₂ / c = d', tex:'\\dfrac{x_{2}}{c} = d',
    vars:['x_2','c','d'],
    solutions:{ x_2:'c*d', c:'x_2/d', d:'x_2/c' },
    constraints:{ nonZero:['c','d'] },
    tags:['algebra']
  },
  {
    id:'l1_sub_menos_x0_igual_a',
    nivel:1, categoria:'matematicas',
    display:'-x₀ = a', tex:'-x_{0} = a',
    vars:['x_0','a'],
    solutions:{ x_0:'-a', a:'-x_0' },
    tags:['algebra']
  },
  {
    id:'l1_sub_v0_t_igual_d',
    nivel:1, categoria:'fisica',
    display:'v₀ · t = d', tex:'v_{0}\\,t = d',
    vars:['v_0','t','d'],
    solutions:{ v_0:'d/t', t:'d/v_0', d:'v_0*t' },
    constraints:{ nonZero:['t','v_0'] },
    tags:['cinematica']
  },
  {
    id:'l1_sub_I_igual_Q1_sobre_t',
    nivel:1, categoria:'fisica',
    display:'I = Q₁ / t', tex:'I = \\dfrac{Q_{1}}{t}',
    vars:['I','Q_1','t'],
    solutions:{ I:'Q_1/t', Q_1:'I*t', t:'Q_1/I' },
    constraints:{ nonZero:['t','I'] },
    tags:['electricidad']
  },
  {
    id:'l1_sub_V_igual_Q_sobre_C1',
    nivel:1, categoria:'fisica',
    display:'V = Q / C₁', tex:'V = \\dfrac{Q}{C_{1}}',
    vars:['V','Q','C_1'],
    solutions:{ V:'Q/C_1', Q:'V*C_1', C_1:'Q/V' },
    constraints:{ nonZero:['C_1','V'] },
    tags:['electricidad']
  },
  {
    id:'l1_sub_W_igual_m1_g',
    nivel:1, categoria:'fisica',
    display:'W = m₁ g', tex:'W = m_{1} g',
    vars:['W','m_1','g'],
    solutions:{ W:'m_1*g', m_1:'W/g', g:'W/m_1' },
    constraints:{ nonZero:['m_1','g'] },
    tags:['dinamica']
  },
  {
    id:'l1_sub_F_igual_k_x0',
    nivel:1, categoria:'fisica',
    display:'F = k x₀', tex:'F = k x_{0}',
    vars:['F','k','x_0'],
    solutions:{ F:'k*x_0', k:'F/x_0', x_0:'F/k' },
    constraints:{ nonZero:['k','x_0'] },
    tags:['dinamica']
  },
  {
    id:'l1_sub_pV_igual_n1RT',
    nivel:1, categoria:'quimica',
    display:'p V = n₁ R T', tex:'pV = n_{1}RT',
    vars:['p','V','n_1','R','T'],
    solutions:{
      p:'(n_1*R*T)/V',
      V:'(n_1*R*T)/p',
      n_1:'(p*V)/(R*T)',
      R:'(p*V)/(n_1*T)',
      T:'(p*V)/(n_1*R)'
    },
    constraints:{ nonZero:['V','p','R','T','n_1'] },
    tags:['gases']
  },
  {
    id:'l1_sub_P_igual_F_sobre_A1',
    nivel:1, categoria:'fisica',
    display:'P = F / A₁', tex:'P = \\dfrac{F}{A_{1}}',
    vars:['P','F','A_1'],
    solutions:{ P:'F/A_1', F:'P*A_1', A_1:'F/P' },
    constraints:{ nonZero:['A_1','P'] },
    tags:['dinamica']
  },
  {
    id:'l1_sub_V1_igual_IR',
    nivel:1, categoria:'fisica',
    display:'V₁ = I R', tex:'V_{1} = I R',
    vars:['V_1','I','R'],
    solutions:{ V_1:'I*R', I:'V_1/R', R:'V_1/I' },
    constraints:{ nonZero:['R','I'] },
    tags:['electricidad']
  },
  {
    id:'l1_sub_P_igual_V2cuad_sobre_R',
    nivel:1, categoria:'fisica',
    display:'P = V₂² / R', tex:'P = \\dfrac{V_{2}^{2}}{R}',
    vars:['P','V_2','R'],
    solutions:{ P:'V_2^2/R', V_2:'sqrt(P*R)', R:'V_2^2/P' },
    constraints:{ nonZero:['R','P'], positive:['P','R'] },
    tags:['electricidad']
  },
  {
    id:'l1_sub_P_igual_I_V3',
    nivel:1, categoria:'fisica',
    display:'P = I V₃', tex:'P = I V_{3}',
    vars:['P','I','V_3'],
    solutions:{ P:'I*V_3', I:'P/V_3', V_3:'P/I' },
    constraints:{ nonZero:['V_3','I'] },
    tags:['electricidad']
  },
  {
    id:'l1_sub_x_igual_c1_mas_d',
    nivel:1, categoria:'matematicas',
    display:'x = c₁ + d', tex:'x = c_{1} + d',
    vars:['x','c_1','d'],
    solutions:{ x:'c_1+d', c_1:'x-d', d:'x-c_1' },
    tags:['algebra']
  },
  {
    id:'l1_sub_x_igual_d1_menos_c',
    nivel:1, categoria:'matematicas',
    display:'x = d₁ - c', tex:'x = d_{1} - c',
    vars:['x','d_1','c'],
    solutions:{ x:'d_1-c', d_1:'x+c', c:'d_1-x' },
    tags:['algebra']
  },
  {
    id:'l1_sub_y_igual_k1_x',
    nivel:1, categoria:'matematicas',
    display:'y = k₁ x', tex:'y = k_{1} x',
    vars:['y','k_1','x'],
    solutions:{ y:'k_1*x', k_1:'y/x', x:'y/k_1' },
    constraints:{ nonZero:['x','k_1'] },
    tags:['algebra']
  },
  {
    id:'l1_sub_y_igual_k_sobre_x2',
    nivel:1, categoria:'matematicas',
    display:'y = k / x₂', tex:'y = \\dfrac{k}{x_{2}}',
    vars:['y','k','x_2'],
    solutions:{ y:'k/x_2', x_2:'k/y', k:'x_2*y' },
    constraints:{ nonZero:['x_2','y'] },
    tags:['algebra']
  },
  {
    id:'l1_sub_raiz_x1_igual_a',
    nivel:1, categoria:'matematicas',
    display:'√x₁ = a', tex:'\\sqrt{x_{1}} = a',
    vars:['x_1','a'],
    solutions:{ x_1:'a^2', a:'sqrt(x_1)' },
    constraints:{ positive:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l2_ax_mas_b_igual_c',
    nivel:2, categoria:'matematicas',
    display:'a x + b = c', tex:'a x + b = c',
    vars:['a','x','b','c'],
    solutions:{ x:'(c-b)/a', a:'(c-b)/x', b:'c-a*x', c:'a*x+b' },
    constraints:{ nonZero:['a','x'] },
    tags:['algebra']
  },
  {
    id:'l2_x_sobre_k_mas_a_igual_b',
    nivel:2, categoria:'matematicas',
    display:'x/k + a = b', tex:'\\dfrac{x}{k} + a = b',
    vars:['x','k','a','b'],
    solutions:{ x:'k*(b-a)', k:'x/(b-a)', a:'b - x/k', b:'x/k + a' },
    constraints:{ nonZero:['k'] },
    tags:['algebra']
  },
  {
    id:'l2_m_menos_3x_igual_p',
    nivel:2, categoria:'matematicas',
    display:'m - 3x = p', tex:'m - 3x = p',
    vars:['m','x','p'],
    solutions:{ x:'(m-p)/3', m:'p+3*x', p:'m-3*x' },
    tags:['algebra']
  },
  {
    id:'l2_2x_menos_5_igual_y',
    nivel:2, categoria:'matematicas',
    display:'2x - 5 = y', tex:'2x - 5 = y',
    vars:['x','y'],
    solutions:{ x:'(y+5)/2', y:'2*x-5' },
    tags:['algebra']
  },
  {
    id:'l2_x_menos_2_sobre_3_igual_t',
    nivel:2, categoria:'matematicas',
    display:'(x - 2)/3 = t', tex:'\\dfrac{x-2}{3} = t',
    vars:['x','t'],
    solutions:{ x:'3*t+2', t:'(x-2)/3' },
    tags:['algebra']
  },
  {
    id:'l2_5_igual_10_sobre_x_mas_b',
    nivel:2, categoria:'matematicas',
    display:'5 = 10/x + b', tex:'5 = \\dfrac{10}{x} + b',
    vars:['x','b'],
    solutions:{ x:'10/(5-b)', b:'5 - 10/x' },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l2_p_igual_m_v',
    nivel:2, categoria:'fisica',
    display:'p = m v', tex:'p = m v',
    vars:['p','m','v'],
    solutions:{ p:'m*v', m:'p/v', v:'p/m' },
    constraints:{ nonZero:['m','v'] },
    tags:['dinamica']
  },
  {
    id:'l2_Ek_igual_1_2_m_v2',
    nivel:2, categoria:'fisica',
    display:'E_k = (1/2) m v^2', tex:'E_k = \\dfrac{1}{2} m v^2',
    vars:['E_k','m','v'],
    solutions:{ E_k:'0.5*m*v^2', m:'(2*E_k)/v^2', v:'sqrt((2*E_k)/m)' },
    constraints:{ nonZero:['m','v'], positive:['E_k','m'] },
    tags:['dinamica']
  },
  {
    id:'l2_y_igual_k_por_x_menos_h',
    nivel:2, categoria:'matematicas',
    display:'y = k(x - h)', tex:'y = k(x - h)',
    vars:['y','k','x','h'],
    solutions:{ y:'k*(x-h)', x:'y/k + h', k:'y/(x-h)', h:'x - y/k' },
    constraints:{ nonZero:['k'] },
    tags:['algebra']
  },
  {
    id:'l2_p_igual_rho_g_h',
    nivel:2, categoria:'fisica',
    display:'p = ρ g h', tex:'p = \\rho g h',
    vars:['p','rho','g','h'],
    solutions:{ p:'rho*g*h', rho:'p/(g*h)', g:'p/(rho*h)', h:'p/(rho*g)' },
    constraints:{ nonZero:['rho','g','h'] },
    tags:['dinamica']
  },
  {
    id:'l2_Q_igual_I_t',
    nivel:2, categoria:'fisica',
    display:'Q = I t', tex:'Q = I t',
    vars:['Q','I','t'],
    solutions:{ Q:'I*t', I:'Q/t', t:'Q/I' },
    constraints:{ nonZero:['I','t'] },
    tags:['electricidad']
  },
  {
    id:'l2_E_igual_Q2_sobre_2C',
    nivel:2, categoria:'fisica',
    display:'E = Q^2 / (2C)', tex:'E = \\dfrac{Q^2}{2C}',
    vars:['E','Q','C'],
    solutions:{ E:'Q^2/(2*C)', Q:'sqrt(2*E*C)', C:'Q^2/(2*E)' },
    constraints:{ nonZero:['C','E'], positive:['E','C'] },
    tags:['electricidad']
  },
  {
    id:'l2_x_sobre_a_menos_b_sobre_c_igual_d',
    nivel:2, categoria:'matematicas',
    display:'x/a - b/c = d', tex:'\\dfrac{x}{a} - \\dfrac{b}{c} = d',
    vars:['x','a','b','c','d'],
    solutions:{
      x:'a*(d + b/c)',
      a:'x/(d + b/c)',
      b:'c*(x/a - d)',
      c:'b/(x/a - d)',
      d:'x/a - b/c'
    },
    constraints:{ nonZero:['a','c'] },
    tags:['algebra']
  },
  {
    id:'l2_kx_mas_ell_igual_m',
    nivel:2, categoria:'matematicas',
    display:'k x + ℓ = m', tex:'k x + \\ell = m',
    vars:['k','x','ell','m'],
    solutions:{ x:'(m-ell)/k', k:'(m-ell)/x', ell:'m - k*x', m:'k*x + ell' },
    constraints:{ nonZero:['k','x'] },
    tags:['algebra']
  },
  {
    id:'l2_kx_menos_ell_sobre_m_igual_n',
    nivel:2, categoria:'matematicas',
    display:'(k x - ℓ)/m = n', tex:'\\dfrac{k x - \\ell}{m} = n',
    vars:['k','x','ell','m','n'],
    solutions:{
      x:'(m*n + ell)/k',
      k:'(m*n + ell)/x',
      ell:'k*x - m*n',
      m:'(k*x - ell)/n',
      n:'(k*x - ell)/m'
    },
    constraints:{ nonZero:['k','x','m','n'] },
    tags:['algebra']
  },
  {
    id:'l2_V_igual_E_menos_I_R',
    nivel:2, categoria:'fisica',
    display:'V = E - I R', tex:'V = E - I R',
    vars:['V','E','I','R'],
    solutions:{ V:'E - I*R', E:'V + I*R', I:'(E - V)/R', R:'(E - V)/I' },
    constraints:{ nonZero:['I','R'] },
    tags:['electricidad']
  },
  {
    id:'l2_P_igual_I2_R',
    nivel:2, categoria:'fisica',
    display:'P = I^2 R', tex:'P = I^{2} R',
    vars:['P','I','R'],
    solutions:{ P:'I^2*R', I:'sqrt(P/R)', R:'P/I^2' },
    constraints:{ nonZero:['R','I'], positive:['P','R'] },
    tags:['electricidad']
  },
  {
    id:'l2_x_mas_1_sobre_2_menos_3_igual_y',
    nivel:2, categoria:'matematicas',
    display:'(x + 1)/2 - 3 = y', tex:'\\dfrac{x+1}{2} - 3 = y',
    vars:['x','y'],
    solutions:{ x:'2*(y+3) - 1', y:'(x+1)/2 - 3' },
    tags:['algebra']
  },
  {
    id:'l2_a_igual_v_menos_v0_sobre_t',
    nivel:2, categoria:'fisica',
    display:'a = (v - v0)/t', tex:'a = \\dfrac{v - v_{0}}{t}',
    vars:['a','v','v0','t'],
    solutions:{ a:'(v - v0)/t', v:'a*t + v0', v0:'v - a*t', t:'(v - v0)/a' },
    constraints:{ nonZero:['t','a'] },
    tags:['cinematica']
  },
  {
    id:'l2_b_igual_ax_mas_c_sobre_d',
    nivel:2, categoria:'matematicas',
    display:'b = (a x + c)/d', tex:'b = \\dfrac{a x + c}{d}',
    vars:['b','a','x','c','d'],
    solutions:{ b:'(a*x + c)/d', x:'(b*d - c)/a', a:'(b*d - c)/x', c:'b*d - a*x', d:'(a*x + c)/b' },
    constraints:{ nonZero:['a','x','d','b'] },
    tags:['algebra']
  },
  {
    id:'l2_xmasb_sobre_a_igual_c',
    nivel:2, categoria:'matematicas',
    display:'(x + b) / a = c', tex:'\\dfrac{x + b}{a} = c',
    vars:['x','b','a','c'],
    solutions:{ x:'a*c - b', b:'a*c - x', a:'(x + b)/c', c:'(x + b)/a' },
    constraints:{ nonZero:['a','c'] },
    tags:['algebra']
  },
  {
    id:'l2_x_menos_h_igual_y_sobre_k',
    nivel:2, categoria:'matematicas',
    display:'x - h = y / k', tex:'x - h = \\dfrac{y}{k}',
    vars:['x','h','y','k'],
    solutions:{ x:'y/k + h', h:'x - y/k', y:'k*(x - h)', k:'y/(x - h)' },
    constraints:{ nonZero:['k'] },
    tags:['algebra']
  },
  {
    id:'l2_dos_por_x_mas_a_igual_b',
    nivel:2, categoria:'matematicas',
    display:'2(x + a) = b', tex:'2(x + a) = b',
    vars:['x','a','b'],
    solutions:{ x:'b/2 - a', a:'b/2 - x', b:'2*(x + a)' },
    tags:['algebra']
  },
  {
    id:'l2_x_sobre_k_menos_a_igual_b',
    nivel:2, categoria:'matematicas',
    display:'x/k - a = b', tex:'\\dfrac{x}{k} - a = b',
    vars:['x','k','a','b'],
    solutions:{ x:'k*(a + b)', k:'x/(a + b)', a:'x/k - b', b:'x/k - a' },
    constraints:{ nonZero:['k'] },
    tags:['algebra']
  },
  {
    id:'l2_xmasm_sobren_igual_p',
    nivel:2, categoria:'matematicas',
    display:'(x + m)/n = p', tex:'\\dfrac{x + m}{n} = p',
    vars:['x','m','n','p'],
    solutions:{ x:'n*p - m', m:'n*p - x', n:'(x + m)/p', p:'(x + m)/n' },
    constraints:{ nonZero:['n','p'] },
    tags:['algebra']
  },
  {
    id:'l2_y_igual_x_sobre_k_mas_b',
    nivel:2, categoria:'matematicas',
    display:'y = x/k + b', tex:'y = \\dfrac{x}{k} + b',
    vars:['y','x','k','b'],
    solutions:{ y:'x/k + b', x:'k*(y - b)', k:'x/(y - b)', b:'y - x/k' },
    constraints:{ nonZero:['k'] },
    tags:['algebra']
  },
  {
    id:'l2_ax_menos_b_igual_c',
    nivel:2, categoria:'matematicas',
    display:'a x - b = c', tex:'a x - b = c',
    vars:['a','x','b','c'],
    solutions:{ x:'(c + b)/a', a:'(c + b)/x', b:'a*x - c', c:'a*x - b' },
    constraints:{ nonZero:['a','x'] },
    tags:['algebra']
  },
  {
    id:'l2_x_menos_r_sobre_a_mas_b_igual_c',
    nivel:2, categoria:'matematicas',
    display:'(x - r)/a + b = c', tex:'\\dfrac{x - r}{a} + b = c',
    vars:['x','r','a','b','c'],
    solutions:{ x:'a*(c - b) + r', r:'x - a*(c - b)', a:'(x - r)/(c - b)', b:'c - (x - r)/a', c:'(x - r)/a + b' },
    constraints:{ nonZero:['a'] },
    tags:['algebra']
  },
  {
    id:'l2_m_menos_3x_sobre_p_igual_q',
    nivel:2, categoria:'matematicas',
    display:'(m - 3x)/p = q', tex:'\\dfrac{m - 3x}{p} = q',
    vars:['m','x','p','q'],
    solutions:{ x:'(m - p*q)/3', m:'3*x + p*q', p:'(m - 3*x)/q', q:'(m - 3*x)/p' },
    constraints:{ nonZero:['p','q'] },
    tags:['algebra']
  },
  {
    id:'l2_2x_mas_y_sobre_a_igual_b',
    nivel:2, categoria:'matematicas',
    display:'2x + y/a = b', tex:'2x + \\dfrac{y}{a} = b',
    vars:['x','y','a','b'],
    solutions:{ x:'(b - y/a)/2', y:'a*(b - 2*x)', a:'y/(b - 2*x)', b:'2*x + y/a' },
    constraints:{ nonZero:['a'] },
    tags:['algebra']
  },
  {
    id:'l2_y_menos_kx_igual_b',
    nivel:2, categoria:'matematicas',
    display:'y - kx = b', tex:'y - kx = b',
    vars:['y','k','x','b'],
    solutions:{ x:'(y - b)/k', k:'(y - b)/x', y:'k*x + b', b:'y - k*x' },
    constraints:{ nonZero:['k','x'] },
    tags:['algebra']
  },
  {
    id:'l2_x_sobre_a_menos_c_igual_d',
    nivel:2, categoria:'matematicas',
    display:'x/a - c = d', tex:'\\dfrac{x}{a} - c = d',
    vars:['x','a','c','d'],
    solutions:{ x:'a*(c + d)', a:'x/(c + d)', c:'x/a - d', d:'x/a - c' },
    constraints:{ nonZero:['a'] },
    tags:['algebra']
  },
  {
    id:'l2_y_mas_b_sobre_k_igual_x',
    nivel:2, categoria:'matematicas',
    display:'(y + b)/k = x', tex:'\\dfrac{y + b}{k} = x',
    vars:['y','b','k','x'],
    solutions:{ y:'k*x - b', b:'k*x - y', k:'(y + b)/x', x:'(y + b)/k' },
    constraints:{ nonZero:['k','x'] },
    tags:['algebra']
  },
  {
    id:'l2_t_igual_d_menos_s_sobre_v',
    nivel:2, categoria:'fisica',
    display:'t = (d - s)/v', tex:'t = \\dfrac{d - s}{v}',
    vars:['t','d','s','v'],
    solutions:{ t:'(d - s)/v', d:'s + v*t', s:'d - v*t', v:'(d - s)/t' },
    constraints:{ nonZero:['v','t'] },
    tags:['cinematica']
  },
  {
    id:'l2_P_igual_F_mas_f_sobre_A',
    nivel:2, categoria:'fisica',
    display:'P = (F + f)/A', tex:'P = \\dfrac{F + f}{A}',
    vars:['P','F','f','A'],
    solutions:{ P:'(F + f)/A', F:'P*A - f', f:'P*A - F', A:'(F + f)/P' },
    constraints:{ nonZero:['A','P'] },
    tags:['dinamica']
  },
  {
    id:'l2_E_igual_V_mas_IR',
    nivel:2, categoria:'fisica',
    display:'E = V + I R', tex:'E = V + I R',
    vars:['E','V','I','R'],
    solutions:{ E:'V + I*R', V:'E - I*R', I:'(E - V)/R', R:'(E - V)/I' },
    constraints:{ nonZero:['R','I'] },
    tags:['electricidad']
  },
  {
    id:'l2_y_igual_ax_mas_c_sobre_b',
    nivel:2, categoria:'matematicas',
    display:'y = (a x + c)/b', tex:'y = \\dfrac{a x + c}{b}',
    vars:['y','a','x','c','b'],
    solutions:{ y:'(a*x + c)/b', x:'(y*b - c)/a', a:'(y*b - c)/x', c:'y*b - a*x', b:'(a*x + c)/y' },
    constraints:{ nonZero:['a','x','b','y'] },
    tags:['algebra']
  },
  {
    id:'l2_x_mas_h_igual_mn',
    nivel:2, categoria:'matematicas',
    display:'x + h = m n', tex:'x + h = m n',
    vars:['x','h','m','n'],
    solutions:{ x:'m*n - h', h:'m*n - x', m:'(x + h)/n', n:'(x + h)/m' },
    constraints:{ nonZero:['m','n'] },
    tags:['algebra']
  },
  {
    id:'l2_kx_menos_b_sobre_c_igual_y',
    nivel:2, categoria:'matematicas',
    display:'(k x - b)/c = y', tex:'\\dfrac{k x - b}{c} = y',
    vars:['k','x','b','c','y'],
    solutions:{ x:'(c*y + b)/k', k:'(c*y + b)/x', b:'k*x - c*y', c:'(k*x - b)/y', y:'(k*x - b)/c' },
    constraints:{ nonZero:['k','x','c','y'] },
    tags:['algebra']
  },
  {
    id:'l2_x_sobre_r_mas_s_igual_t',
    nivel:2, categoria:'matematicas',
    display:'x/r + s = t', tex:'\\dfrac{x}{r} + s = t',
    vars:['x','r','s','t'],
    solutions:{ x:'r*(t - s)', r:'x/(t - s)', s:'t - x/r', t:'x/r + s' },
    constraints:{ nonZero:['r'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_alpha_x_mas_beta_igual_gamma',
    nivel:2, categoria:'matematicas',
    display:'α x + β = γ', tex:'\\alpha x + \\beta = \\gamma',
    vars:['alpha','x','beta','gamma'],
    solutions:{ x:'(gamma-beta)/alpha', alpha:'(gamma-beta)/x', beta:'gamma-alpha*x', gamma:'alpha*x+beta' },
    constraints:{ nonZero:['alpha','x'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_x_menos_beta_sobre_lambda_igual_mu',
    nivel:2, categoria:'matematicas',
    display:'(x - β)/λ = μ', tex:'\\dfrac{x-\\beta}{\\lambda} = \\mu',
    vars:['x','beta','lambda','mu'],
    solutions:{ x:'lambda*mu+beta', beta:'x-lambda*mu', lambda:'(x-beta)/mu', mu:'(x-beta)/lambda' },
    constraints:{ nonZero:['lambda','mu'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_theta_x_menos_sigma_igual_rho',
    nivel:2, categoria:'matematicas',
    display:'θ x - σ = ρ', tex:'\\theta x - \\sigma = \\rho',
    vars:['theta','x','sigma','rho'],
    solutions:{ x:'(rho+sigma)/theta', theta:'(rho+sigma)/x', sigma:'theta*x-rho', rho:'theta*x-sigma' },
    constraints:{ nonZero:['theta','x'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_alpha_x_menos_beta_sobre_gamma_igual_delta',
    nivel:2, categoria:'matematicas',
    display:'(α x - β)/γ = Δ', tex:'\\dfrac{\\alpha x - \\beta}{\\gamma} = \\Delta',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(gamma*delta+beta)/alpha',
      alpha:'(gamma*delta+beta)/x',
      beta:'alpha*x-gamma*delta',
      gamma:'(alpha*x-beta)/delta',
      delta:'(alpha*x-beta)/gamma'
    },
    constraints:{ nonZero:['alpha','x','gamma','delta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_y_igual_theta_por_x_mas_alpha',
    nivel:2, categoria:'matematicas',
    display:'y = θ (x + α)', tex:'y = \\theta (x + \\alpha)',
    vars:['y','theta','x','alpha'],
    solutions:{ y:'theta*(x+alpha)', x:'y/theta - alpha', theta:'y/(x+alpha)', alpha:'y/theta - x' },
    constraints:{ nonZero:['theta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_rho_mas_sigma_x_sobre_beta_igual_gamma',
    nivel:2, categoria:'matematicas',
    display:'(ρ + σ x)/β = γ', tex:'\\dfrac{\\rho + \\sigma x}{\\beta} = \\gamma',
    vars:['rho','sigma','x','beta','gamma'],
    solutions:{
      x:'(beta*gamma - rho)/sigma',
      sigma:'(beta*gamma - rho)/x',
      rho:'beta*gamma - sigma*x',
      beta:'(rho + sigma*x)/gamma',
      gamma:'(rho + sigma*x)/beta'
    },
    constraints:{ nonZero:['sigma','x','beta','gamma'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_x_mas_pi_sobre_k_igual_lambda',
    nivel:2, categoria:'matematicas',
    display:'(x + π)/k = λ', tex:'\\dfrac{x + \\pi}{k} = \\lambda',
    vars:['x','pi','k','lambda'],
    solutions:{ x:'k*lambda - pi', pi:'k*lambda - x', k:'(x+pi)/lambda', lambda:'(x+pi)/k' },
    constraints:{ nonZero:['k','lambda'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_beta_igual_alpha_x_mas_gamma_sobre_delta',
    nivel:2, categoria:'matematicas',
    display:'β = (α x + γ)/δ', tex:'\\beta = \\dfrac{\\alpha x + \\gamma}{\\delta}',
    vars:['beta','alpha','x','gamma','delta'],
    solutions:{
      beta:'(alpha*x+gamma)/delta',
      x:'(beta*delta - gamma)/alpha',
      alpha:'(beta*delta - gamma)/x',
      gamma:'beta*delta - alpha*x',
      delta:'(alpha*x + gamma)/beta'
    },
    constraints:{ nonZero:['alpha','x','beta','delta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_x_menos_theta_sobre_alpha_igual_beta',
    nivel:2, categoria:'matematicas',
    display:'(x - θ)/α = β', tex:'\\dfrac{x - \\theta}{\\alpha} = \\beta',
    vars:['x','theta','alpha','beta'],
    solutions:{ x:'alpha*beta + theta', theta:'x - alpha*beta', alpha:'(x-theta)/beta', beta:'(x-theta)/alpha' },
    constraints:{ nonZero:['alpha','beta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_y_sobre_alpha_mas_x_igual_gamma',
    nivel:2, categoria:'matematicas',
    display:'y/α + x = γ', tex:'\\dfrac{y}{\\alpha} + x = \\gamma',
    vars:['y','alpha','x','gamma'],
    solutions:{ y:'alpha*(gamma - x)', alpha:'y/(gamma - x)', x:'gamma - y/alpha', gamma:'y/alpha + x' },
    constraints:{ nonZero:['alpha'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_sigma_igual_rho_menos_x_sobre_theta',
    nivel:2, categoria:'matematicas',
    display:'σ = (ρ - x)/θ', tex:'\\sigma = \\dfrac{\\rho - x}{\\theta}',
    vars:['sigma','rho','x','theta'],
    solutions:{ sigma:'(rho - x)/theta', rho:'sigma*theta + x', x:'rho - sigma*theta', theta:'(rho - x)/sigma' },
    constraints:{ nonZero:['theta','sigma'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_gamma_igual_alpha_menos_beta_x',
    nivel:2, categoria:'matematicas',
    display:'γ = α - β x', tex:'\\gamma = \\alpha - \\beta x',
    vars:['gamma','alpha','beta','x'],
    solutions:{ gamma:'alpha - beta*x', alpha:'gamma + beta*x', beta:'(alpha - gamma)/x', x:'(alpha - gamma)/beta' },
    constraints:{ nonZero:['beta','x'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_mu_x_mas_beta_sobre_alpha_igual_y',
    nivel:2, categoria:'matematicas',
    display:'(μ x + β)/α = y', tex:'\\dfrac{\\mu x + \\beta}{\\alpha} = y',
    vars:['mu','x','beta','alpha','y'],
    solutions:{ x:'(alpha*y - beta)/mu', mu:'(alpha*y - beta)/x', beta:'alpha*y - mu*x', alpha:'(mu*x + beta)/y', y:'(mu*x + beta)/alpha' },
    constraints:{ nonZero:['mu','x','alpha','y'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_x_mas_rho_sobre_sigma_igual_theta',
    nivel:2, categoria:'matematicas',
    display:'(x + ρ)/σ = θ', tex:'\\dfrac{x + \\rho}{\\sigma} = \\theta',
    vars:['x','rho','sigma','theta'],
    solutions:{ x:'sigma*theta - rho', rho:'sigma*theta - x', sigma:'(x + rho)/theta', theta:'(x + rho)/sigma' },
    constraints:{ nonZero:['sigma','theta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_delta_menos_x_sobre_alpha_igual_beta',
    nivel:2, categoria:'matematicas',
    display:'(Δ - x)/α = β', tex:'\\dfrac{\\Delta - x}{\\alpha} = \\beta',
    vars:['delta','x','alpha','beta'],
    solutions:{ delta:'alpha*beta + x', x:'delta - alpha*beta', alpha:'(delta - x)/beta', beta:'(delta - x)/alpha' },
    constraints:{ nonZero:['alpha','beta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_y_igual_gamma_menos_alpha_x_sobre_beta',
    nivel:2, categoria:'matematicas',
    display:'y = (γ - α x)/β', tex:'y = \\dfrac{\\gamma - \\alpha x}{\\beta}',
    vars:['y','gamma','alpha','x','beta'],
    solutions:{ y:'(gamma - alpha*x)/beta', gamma:'beta*y + alpha*x', alpha:'(gamma - beta*y)/x', x:'(gamma - beta*y)/alpha', beta:'(gamma - alpha*x)/y' },
    constraints:{ nonZero:['x','alpha','y','beta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_pi_x_menos_gamma_sobre_theta_igual_rho',
    nivel:2, categoria:'matematicas',
    display:'(π x - γ)/θ = ρ', tex:'\\dfrac{\\pi x - \\gamma}{\\theta} = \\rho',
    vars:['pi','x','gamma','theta','rho'],
    solutions:{ x:'(theta*rho + gamma)/pi', pi:'(theta*rho + gamma)/x', gamma:'pi*x - theta*rho', theta:'(pi*x - gamma)/rho', rho:'(pi*x - gamma)/theta' },
    constraints:{ nonZero:['pi','x','theta','rho'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_alpha_mas_beta_sobre_gamma_igual_x',
    nivel:2, categoria:'matematicas',
    display:'(α + β)/γ = x', tex:'\\dfrac{\\alpha + \\beta}{\\gamma} = x',
    vars:['alpha','beta','gamma','x'],
    solutions:{ x:'(alpha+beta)/gamma', alpha:'gamma*x - beta', beta:'gamma*x - alpha', gamma:'(alpha+beta)/x' },
    constraints:{ nonZero:['gamma','x'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_y_igual_delta_x_mas_rho',
    nivel:2, categoria:'matematicas',
    display:'y = Δ x + ρ', tex:'y = \\Delta x + \\rho',
    vars:['y','delta','x','rho'],
    solutions:{ y:'delta*x + rho', delta:'(y - rho)/x', x:'(y - rho)/delta', rho:'y - delta*x' },
    constraints:{ nonZero:['x','delta'] },
    tags:['algebra']
  },
  {
    id:'l2_gk_sigma_menos_rho_sobre_alpha_igual_x_menos_beta',
    nivel:2, categoria:'matematicas',
    display:'(σ - ρ)/α = x - β', tex:'\\dfrac{\\sigma - \\rho}{\\alpha} = x - \\beta',
    vars:['sigma','rho','alpha','x','beta'],
    solutions:{
      x:'(sigma - rho)/alpha + beta',
      sigma:'alpha*(x - beta) + rho',
      rho:'sigma - alpha*(x - beta)',
      alpha:'(sigma - rho)/(x - beta)',
      beta:'x - (sigma - rho)/alpha'
    },
    constraints:{ nonZero:['alpha'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_a1x1_mas_b1_igual_c1',
    nivel:2, categoria:'matematicas',
    display:'a₁ x₁ + b₁ = c₁', tex:'a_{1} x_{1} + b_{1} = c_{1}',
    vars:['a_1','x_1','b_1','c_1'],
    solutions:{ x_1:'(c_1-b_1)/a_1', a_1:'(c_1-b_1)/x_1', b_1:'c_1-a_1*x_1', c_1:'a_1*x_1+b_1' },
    constraints:{ nonZero:['a_1','x_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_sobre_k1_mas_a1_igual_b1',
    nivel:2, categoria:'matematicas',
    display:'x₁/k₁ + a₁ = b₁', tex:'\\dfrac{x_{1}}{k_{1}} + a_{1} = b_{1}',
    vars:['x_1','k_1','a_1','b_1'],
    solutions:{ x_1:'k_1*(b_1-a_1)', k_1:'x_1/(b_1-a_1)', a_1:'b_1 - x_1/k_1', b_1:'x_1/k_1 + a_1' },
    constraints:{ nonZero:['k_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_m1_menos_3x1_igual_p1',
    nivel:2, categoria:'matematicas',
    display:'m₁ - 3x₁ = p₁', tex:'m_{1} - 3 x_{1} = p_{1}',
    vars:['m_1','x_1','p_1'],
    solutions:{ x_1:'(m_1-p_1)/3', m_1:'p_1+3*x_1', p_1:'m_1-3*x_1' },
    tags:['algebra']
  },
  {
    id:'l2_sub_2x1_menos_5_igual_y1',
    nivel:2, categoria:'matematicas',
    display:'2x₁ - 5 = y₁', tex:'2 x_{1} - 5 = y_{1}',
    vars:['x_1','y_1'],
    solutions:{ x_1:'(y_1+5)/2', y_1:'2*x_1-5' },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_menos_h1_sobre_n1_igual_q1',
    nivel:2, categoria:'matematicas',
    display:'(x₁ - h₁)/n₁ = q₁', tex:'\\dfrac{x_{1} - h_{1}}{n_{1}} = q_{1}',
    vars:['x_1','h_1','n_1','q_1'],
    solutions:{ x_1:'n_1*q_1 + h_1', h_1:'x_1 - n_1*q_1', n_1:'(x_1-h_1)/q_1', q_1:'(x_1-h_1)/n_1' },
    constraints:{ nonZero:['n_1','q_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_y1_igual_k1_por_x1_menos_h1',
    nivel:2, categoria:'matematicas',
    display:'y₁ = k₁(x₁ - h₁)', tex:'y_{1} = k_{1}(x_{1} - h_{1})',
    vars:['y_1','k_1','x_1','h_1'],
    solutions:{ y_1:'k_1*(x_1-h_1)', x_1:'y_1/k_1 + h_1', k_1:'y_1/(x_1-h_1)', h_1:'x_1 - y_1/k_1' },
    constraints:{ nonZero:['k_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_mas_1_sobre_2_menos_3_igual_y1',
    nivel:2, categoria:'matematicas',
    display:'(x₁ + 1)/2 - 3 = y₁', tex:'\\dfrac{x_{1}+1}{2} - 3 = y_{1}',
    vars:['x_1','y_1'],
    solutions:{ x_1:'2*(y_1+3) - 1', y_1:'(x_1+1)/2 - 3' },
    tags:['algebra']
  },
  {
    id:'l2_sub_k1x1_menos_ell1_sobre_m1_igual_n1',
    nivel:2, categoria:'matematicas',
    display:'(k₁ x₁ - ℓ₁)/m₁ = n₁', tex:'\\dfrac{k_{1} x_{1} - \\ell_{1}}{m_{1}} = n_{1}',
    vars:['k_1','x_1','ell_1','m_1','n_1'],
    solutions:{ x_1:'(m_1*n_1 + ell_1)/k_1', k_1:'(m_1*n_1 + ell_1)/x_1', ell_1:'k_1*x_1 - m_1*n_1', m_1:'(k_1*x_1 - ell_1)/n_1', n_1:'(k_1*x_1 - ell_1)/m_1' },
    constraints:{ nonZero:['k_1','x_1','m_1','n_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_mas_b1_sobre_a1_igual_c1',
    nivel:2, categoria:'matematicas',
    display:'(x₁ + b₁)/a₁ = c₁', tex:'\\dfrac{x_{1} + b_{1}}{a_{1}} = c_{1}',
    vars:['x_1','b_1','a_1','c_1'],
    solutions:{ x_1:'a_1*c_1 - b_1', b_1:'a_1*c_1 - x_1', a_1:'(x_1+b_1)/c_1', c_1:'(x_1+b_1)/a_1' },
    constraints:{ nonZero:['a_1','c_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_menos_h1_igual_y1_sobre_k1',
    nivel:2, categoria:'matematicas',
    display:'x₁ - h₁ = y₁/k₁', tex:'x_{1} - h_{1} = \\dfrac{y_{1}}{k_{1}}',
    vars:['x_1','h_1','y_1','k_1'],
    solutions:{ x_1:'y_1/k_1 + h_1', h_1:'x_1 - y_1/k_1', y_1:'k_1*(x_1-h_1)', k_1:'y_1/(x_1-h_1)' },
    constraints:{ nonZero:['k_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_sobre_a1_menos_c1_igual_d1',
    nivel:2, categoria:'matematicas',
    display:'x₁/a₁ - c₁ = d₁', tex:'\\dfrac{x_{1}}{a_{1}} - c_{1} = d_{1}',
    vars:['x_1','a_1','c_1','d_1'],
    solutions:{ x_1:'a_1*(c_1 + d_1)', a_1:'x_1/(c_1 + d_1)', c_1:'x_1/a_1 - d_1', d_1:'x_1/a_1 - c_1' },
    constraints:{ nonZero:['a_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_y1_mas_b1_sobre_k1_igual_x1',
    nivel:2, categoria:'matematicas',
    display:'(y₁ + b₁)/k₁ = x₁', tex:'\\dfrac{y_{1} + b_{1}}{k_{1}} = x_{1}',
    vars:['y_1','b_1','k_1','x_1'],
    solutions:{ y_1:'k_1*x_1 - b_1', b_1:'k_1*x_1 - y_1', k_1:'(y_1 + b_1)/x_1', x_1:'(y_1 + b_1)/k_1' },
    constraints:{ nonZero:['k_1','x_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_t1_igual_d1_menos_s1_sobre_v1',
    nivel:2, categoria:'fisica',
    display:'t₁ = (d₁ - s₁)/v₁', tex:'t_{1} = \\dfrac{d_{1} - s_{1}}{v_{1}}',
    vars:['t_1','d_1','s_1','v_1'],
    solutions:{ t_1:'(d_1 - s_1)/v_1', d_1:'s_1 + v_1*t_1', s_1:'d_1 - v_1*t_1', v_1:'(d_1 - s_1)/t_1' },
    constraints:{ nonZero:['v_1','t_1'] },
    tags:['cinematica']
  },
  {
    id:'l2_sub_P1_igual_F1_mas_f1_sobre_A1',
    nivel:2, categoria:'fisica',
    display:'P₁ = (F₁ + f₁)/A₁', tex:'P_{1} = \\dfrac{F_{1} + f_{1}}{A_{1}}',
    vars:['P_1','F_1','f_1','A_1'],
    solutions:{ P_1:'(F_1 + f_1)/A_1', F_1:'P_1*A_1 - f_1', f_1:'P_1*A_1 - F_1', A_1:'(F_1 + f_1)/P_1' },
    constraints:{ nonZero:['A_1','P_1'] },
    tags:['dinamica']
  },
  {
    id:'l2_sub_E1_igual_V1_mas_I1R1',
    nivel:2, categoria:'fisica',
    display:'E₁ = V₁ + I₁ R₁', tex:'E_{1} = V_{1} + I_{1} R_{1}',
    vars:['E_1','V_1','I_1','R_1'],
    solutions:{ E_1:'V_1 + I_1*R_1', V_1:'E_1 - I_1*R_1', I_1:'(E_1 - V_1)/R_1', R_1:'(E_1 - V_1)/I_1' },
    constraints:{ nonZero:['R_1','I_1'] },
    tags:['electricidad']
  },
  {
    id:'l2_sub_a1_igual_v1_menos_v0_sobre_t1',
    nivel:2, categoria:'fisica',
    display:'a₁ = (v₁ - v₀)/t₁', tex:'a_{1} = \\dfrac{v_{1} - v_{0}}{t_{1}}',
    vars:['a_1','v_1','v_0','t_1'],
    solutions:{ a_1:'(v_1 - v_0)/t_1', v_1:'a_1*t_1 + v_0', v_0:'v_1 - a_1*t_1', t_1:'(v_1 - v_0)/a_1' },
    constraints:{ nonZero:['t_1','a_1'] },
    tags:['cinematica']
  },
  {
    id:'l2_sub_Ek1_igual_1_2_m1_v1cuad',
    nivel:2, categoria:'fisica',
    display:'E_{k1} = (1/2) m₁ v₁²', tex:'E_{k1} = \\dfrac{1}{2} m_{1} v_{1}^{2}',
    vars:['E_k1','m_1','v_1'],
    solutions:{ E_k1:'0.5*m_1*v_1^2', m_1:'(2*E_k1)/v_1^2', v_1:'sqrt((2*E_k1)/m_1)' },
    constraints:{ nonZero:['m_1','v_1'], positive:['E_k1','m_1'] },
    tags:['dinamica']
  },
  {
    id:'l2_sub_y1_igual_a1x1_mas_c1_sobre_b1',
    nivel:2, categoria:'matematicas',
    display:'y₁ = (a₁ x₁ + c₁)/b₁', tex:'y_{1} = \\dfrac{a_{1} x_{1} + c_{1}}{b_{1}}',
    vars:['y_1','a_1','x_1','c_1','b_1'],
    solutions:{ y_1:'(a_1*x_1 + c_1)/b_1', x_1:'(y_1*b_1 - c_1)/a_1', a_1:'(y_1*b_1 - c_1)/x_1', c_1:'y_1*b_1 - a_1*x_1', b_1:'(a_1*x_1 + c_1)/y_1' },
    constraints:{ nonZero:['a_1','x_1','b_1','y_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_r1_mas_s1x1_sobre_p1_igual_q1',
    nivel:2, categoria:'matematicas',
    display:'(r₁ + s₁ x₁)/p₁ = q₁', tex:'\\dfrac{r_{1} + s_{1} x_{1}}{p_{1}} = q_{1}',
    vars:['r_1','s_1','x_1','p_1','q_1'],
    solutions:{ x_1:'(p_1*q_1 - r_1)/s_1', s_1:'(p_1*q_1 - r_1)/x_1', r_1:'p_1*q_1 - s_1*x_1', p_1:'(r_1 + s_1*x_1)/q_1', q_1:'(r_1 + s_1*x_1)/p_1' },
    constraints:{ nonZero:['s_1','x_1','p_1','q_1'] },
    tags:['algebra']
  },
  {
    id:'l2_sub_x1_mas_m1_sobre_n1_igual_p1',
    nivel:2, categoria:'matematicas',
    display:'(x₁ + m₁)/n₁ = p₁', tex:'\\dfrac{x_{1} + m_{1}}{n_{1}} = p_{1}',
    vars:['x_1','m_1','n_1','p_1'],
    solutions:{ x_1:'n_1*p_1 - m_1', m_1:'n_1*p_1 - x_1', n_1:'(x_1 + m_1)/p_1', p_1:'(x_1 + m_1)/n_1' },
    constraints:{ nonZero:['n_1','p_1'] },
    tags:['algebra']
  },
  {
    id:'l3_ax_mas_b_igual_cx_mas_d',
    nivel:3, categoria:'matematicas',
    display:'a x + b = c x + d', tex:'a x + b = c x + d',
    vars:['a','x','b','c','d'],
    solutions:{
      x:'(d - b)/(a - c)',
      a:'(c*x + d - b)/x',
      c:'(a*x + b - d)/x',
      b:'c*x + d - a*x',
      d:'a*x + b - c*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_kx_menos_m_igual_nx_mas_p',
    nivel:3, categoria:'matematicas',
    display:'k x - m = n x + p', tex:'k x - m = n x + p',
    vars:['k','x','m','n','p'],
    solutions:{
      x:'(m + p)/(k - n)',
      k:'(n*x + p + m)/x',
      n:'(k*x - m - p)/x',
      m:'k*x - n*x - p',
      p:'k*x - n*x - m'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_y_menos_2x_igual_3x_mas_h',
    nivel:3, categoria:'matematicas',
    display:'y - 2x = 3x + h', tex:'y - 2x = 3x + h',
    vars:['y','x','h'],
    solutions:{ x:'(y - h)/5', y:'5*x + h', h:'y - 5*x' },
    tags:['algebra']
  },
  {
    id:'l3_r_por_x_menos_1_igual_s_por_x_mas_2',
    nivel:3, categoria:'matematicas',
    display:'r(x-1) = s(x+2)', tex:'r(x-1) = s(x+2)',
    vars:['r','s','x'],
    solutions:{
      x:'(r + 2*s)/(r - s)',
      r:'s*(x + 2)/(x - 1)',
      s:'r*(x - 1)/(x + 2)'
    },
    tags:['algebra']
  },
  {
    id:'l3_alpha_x_mas_beta_igual_gamma_menos_delta_x',
    nivel:3, categoria:'matematicas',
    display:'α x + β = γ - δ x', tex:'\\alpha x + \\beta = \\gamma - \\delta x',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(gamma - beta)/(alpha + delta)',
      alpha:'(gamma - beta)/x - delta',
      beta:'gamma - (alpha + delta)*x',
      gamma:'(alpha + delta)*x + beta',
      delta:'(gamma - beta)/x - alpha'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_F_menos_kx_igual_mx',
    nivel:3, categoria:'fisica',
    display:'F - kx = m x', tex:'F - kx = m x',
    vars:['F','k','m','x'],
    solutions:{ x:'F/(k + m)', F:'(k + m)*x', k:'F/x - m', m:'F/x - k' },
    constraints:{ nonZero:['x'] },
    tags:['dinamica']
  },
  {
    id:'l3_P_igual_IV_y_V_igual_E_menos_IR',
    nivel:3, categoria:'fisica',
    display:'P = I V,  V = E - I R', tex:'P = I V,\\quad V = E - I R',
    vars:['P','I','V','E','R'],
    solutions:{
      P:'I*V',
      I:'P/V',
      V:'E - I*R',
      E:'V + I*R',
      R:'(E - V)/I'
    },
    constraints:{ nonZero:['V','I'] },
    tags:['electricidad']
  },
  {
    id:'l3_p_igual_m_v_igual_rho_V_v',
    nivel:3, categoria:'fisica',
    display:'p = m v = ρ V v', tex:'p = m v = \\rho V v',
    vars:['p','m','v','rho','V'],
    solutions:{
      p:'m*v',
      v:'p/m',
      m:'p/v',
      rho:'m/V',
      V:'m/rho'
    },
    constraints:{ nonZero:['m','v','V','rho'] },
    tags:['dinamica']
  },
  {
    id:'l3_kx_mas_ell_igual_a_por_x_mas_b',
    nivel:3, categoria:'matematicas',
    display:'k x + ℓ = a(x + b)', tex:'k x + \\ell = a(x + b)',
    vars:['k','x','ell','a','b'],
    solutions:{
      x:'(a*b - ell)/(k - a)',
      k:'(a*(x + b) - ell)/x',
      a:'(k*x + ell)/(x + b)',
      ell:'a*(x + b) - k*x',
      b:'(k*x + ell)/a - x'
    },
    constraints:{ nonZero:['x','a'] },
    tags:['algebra']
  },
  {
    id:'l3_y_igual_a_sobre_b_x_mas_cx',
    nivel:3, categoria:'matematicas',
    display:'y = (a/b) x + c x', tex:'y = \\dfrac{a}{b}x + c x',
    vars:['y','a','b','c','x'],
    solutions:{
      x:'(y*b)/(a + b*c)',
      y:'x*(a/b + c)',
      a:'b*(y/x - c)',
      b:'a/(y/x - c)',
      c:'y/x - a/b'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_T_igual_T0_mas_lambda_x',
    nivel:3, categoria:'matematicas',
    display:'T = T₀ + λ x', tex:'T = T_{0} + \\lambda x',
    vars:['T','T0','lambda','x'],
    solutions:{
      x:'(T - T0)/lambda',
      T:'T0 + lambda*x',
      T0:'T - lambda*x',
      lambda:'(T - T0)/x'
    },
    constraints:{ nonZero:['lambda','x'] },
    tags:['algebra']
  },
  {
    id:'l3_S_exp_y_lineal',
    nivel:3, categoria:'matematicas',
    display:'S = S₀ e^{μ x} = A + B x', tex:'S = S_{0} e^{\\mu x} = A + B x',
    vars:['S','S0','mu','A','B','x'],
    solutions:{
      S:'A + B*x',
      x:'(S - A)/B',
      A:'S - B*x',
      B:'(S - A)/x',
      S0:'S/exp(mu*x)',
      mu:'log(S/S0)/x'
    },
    constraints:{ nonZero:['B','x','S0'] },
    tags:['algebra']
  },
  {
    id:'l3_f_mas_gx_igual_h_mas_jx',
    nivel:3, categoria:'matematicas',
    display:'f + g x = h + j x', tex:'f + g x = h + j x',
    vars:['f','g','h','j','x'],
    solutions:{
      x:'(h - f)/(g - j)',
      f:'h + j*x - g*x',
      g:'(h - f)/x + j',
      h:'f + g*x - j*x',
      j:'(f + g*x - h)/x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_mx_mas_n_igual_px_menos_n',
    nivel:3, categoria:'matematicas',
    display:'m x + n = p x - n', tex:'m x + n = p x - n',
    vars:['m','x','n','p'],
    solutions:{
      x:'(2*n)/(p - m)',
      m:'p - (2*n)/x',
      p:'m + (2*n)/x',
      n:'(p - m)*x/2'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_u_menos_ax_igual_bx_mas_v',
    nivel:3, categoria:'matematicas',
    display:'u - a x = b x + v', tex:'u - a x = b x + v',
    vars:['u','a','x','b','v'],
    solutions:{
      x:'(u - v)/(a + b)',
      a:'(u - v)/x - b',
      b:'(u - v)/x - a',
      u:'(a + b)*x + v',
      v:'u - (a + b)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_omega_x_mas_phi_igual_psi_por_x_mas_eta',
    nivel:3, categoria:'matematicas',
    display:'ω x + φ = ψ (x + η)', tex:'\\omega x + \\phi = \\psi (x + \\eta)',
    vars:['omega','x','phi','psi','eta'],
    solutions:{
      x:'(psi*eta - phi)/(omega - psi)',
      omega:'psi + (psi*eta - phi)/x',
      phi:'psi*(x + eta) - omega*x',
      psi:'(omega*x + phi)/(x + eta)',
      eta:'(omega*x + phi)/psi - x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_Req_igual_R_mas_RRp_sobre_Rp_mas_Rx',
    nivel:3, categoria:'electricidad',
    display:'R_eq = R + (R R_p)/(R_p + R x)', tex:'R_{\\mathrm{eq}} = R + \\dfrac{R\\,R_{p}}{R_{p} + R x}',
    vars:['R_eq','R','R_p','x'],
    solutions:{
      x:'(R_p*(2*R - R_eq))/(R*(R_eq - R))',
      R_eq:'R + (R*R_p)/(R_p + R*x)',
      R_p:'(R*(R_eq - R)*x)/(2*R - R_eq)',
      R:'(- (2*R_p - R_eq*x) + sqrt((2*R_p - R_eq*x)^2 + 4*x*R_eq*R_p))/(2*x)'
    },
    constraints:{ nonZero:['R','x'] },
    tags:['electricidad']
  },
  {
    id:'l3_A_por_1_menos_x_igual_B_por_1_mas_x',
    nivel:3, categoria:'matematicas',
    display:'A(1 - x) = B(1 + x)', tex:'A(1 - x) = B(1 + x)',
    vars:['A','B','x'],
    solutions:{
      x:'(A - B)/(A + B)',
      A:'B*(1 + x)/(1 - x)',
      B:'A*(1 - x)/(1 + x)'
    },
    tags:['algebra']
  },
  {
    id:'l3_theta_x_menos_kappa_igual_lambda_x_mas_lambda_mu',
    nivel:3, categoria:'matematicas',
    display:'θ x - κ = λ(x + μ)', tex:'\\theta x - \\kappa = \\lambda(x + \\mu)',
    vars:['theta','x','kappa','lambda','mu'],
    solutions:{
      x:'(kappa + lambda*mu)/(theta - lambda)',
      theta:'(kappa + lambda*mu)/x + lambda',
      kappa:'theta*x - lambda*(x + mu)',
      lambda:'(theta*x - kappa)/(x + mu)',
      mu:'(theta*x - kappa)/lambda - x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_y_por_1_mas_alpha_x_igual_beta_mas_gamma_x',
    nivel:3, categoria:'matematicas',
    display:'y(1 + α x) = β + γ x', tex:'y(1 + \\alpha x) = \\beta + \\gamma x',
    vars:['y','alpha','x','beta','gamma'],
    solutions:{
      x:'(beta - y)/(alpha*y - gamma)',
      y:'(beta + gamma*x)/(1 + alpha*x)',
      alpha:'(beta + gamma*x - y)/(x*y)',
      beta:'y*(1 + alpha*x) - gamma*x',
      gamma:'(y*(1 + alpha*x) - beta)/x'
    },
    constraints:{ nonZero:['x','y'] },
    tags:['algebra']
  },



  // =======================
  // NIVEL 3 (20) — CON LETRAS GRIEGAS
  // =======================
  {
    id:'l3_gk_alpha_x_mas_beta_igual_gamma_x_mas_delta',
    nivel:3, categoria:'matematicas',
    display:'α x + β = γ x + δ', tex:'\\alpha x + \\beta = \\gamma x + \\delta',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(delta - beta)/(alpha - gamma)',
      alpha:'(gamma*x + delta - beta)/x',
      gamma:'(alpha*x + beta - delta)/x',
      beta:'gamma*x + delta - alpha*x',
      delta:'alpha*x + beta - gamma*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_theta_x_menos_kappa_igual_lambda_x_mas_mu',
    nivel:3, categoria:'matematicas',
    display:'θ x - κ = λ x + μ', tex:'\\theta x - \\kappa = \\lambda x + \\mu',
    vars:['theta','x','kappa','lambda','mu'],
    solutions:{
      x:'(kappa + mu)/(theta - lambda)',
      theta:'(kappa + mu)/x + lambda',
      lambda:'theta - (kappa + mu)/x',
      kappa:'(theta - lambda)*x - mu',
      mu:'(theta - lambda)*x - kappa'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_rho_x_mas_sigma_igual_phi_por_x_mas_psi',
    nivel:3, categoria:'matematicas',
    display:'ρ x + σ = φ(x + ψ)', tex:'\\rho x + \\sigma = \\phi(x + \\psi)',
    vars:['rho','x','sigma','phi','psi'],
    solutions:{
      x:'(phi*psi - sigma)/(rho - phi)',
      rho:'(phi*x + phi*psi - sigma)/x',
      phi:'(rho*x + sigma)/(x + psi)',
      sigma:'phi*x + phi*psi - rho*x',
      psi:'(rho*x + sigma)/phi - x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_alpha_por_x_menos_beta_igual_gamma_x_mas_delta',
    nivel:3, categoria:'matematicas',
    display:'α(x - β) = γ x + δ', tex:'\\alpha(x - \\beta) = \\gamma x + \\delta',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(alpha*beta + delta)/(alpha - gamma)',
      alpha:'(gamma*x + delta)/(x - beta)',
      gamma:'(alpha*x - alpha*beta - delta)/x',
      beta:'((alpha - gamma)*x - delta)/alpha',
      delta:'(alpha - gamma)*x - alpha*beta'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_y_menos_alpha_x_igual_gamma_x_mas_beta',
    nivel:3, categoria:'matematicas',
    display:'y - αx = γx + β', tex:'y - \\alpha x = \\gamma x + \\beta',
    vars:['y','alpha','x','gamma','beta'],
    solutions:{
      x:'(y - beta)/(alpha + gamma)',
      alpha:'(y - beta)/x - gamma',
      gamma:'(y - beta)/x - alpha',
      beta:'y - (alpha + gamma)*x',
      y:'(alpha + gamma)*x + beta'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_pi_x_mas_sigma_igual_lambda_por_x_menos_mu',
    nivel:3, categoria:'matematicas',
    display:'π x + σ = λ(x - μ)', tex:'\\pi x + \\sigma = \\lambda(x - \\mu)',
    vars:['pi','x','sigma','lambda','mu'],
    solutions:{
      x:'(-lambda*mu - sigma)/(pi - lambda)',
      pi:'(lambda*(x - mu) - sigma)/x',
      lambda:'(pi*x + sigma)/(x - mu)',
      sigma:'(lambda - pi)*x - lambda*mu',
      mu:'((lambda - pi)*x - sigma)/lambda'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_omega_por_x_mas_alpha_igual_theta_x_mas_beta',
    nivel:3, categoria:'matematicas',
    display:'ω(x + α) = θ x + β', tex:'\\omega(x + \\alpha) = \\theta x + \\beta',
    vars:['omega','x','alpha','theta','beta'],
    solutions:{
      x:'(beta - omega*alpha)/(omega - theta)',
      omega:'(theta*x + beta)/(x + alpha)',
      theta:'(omega*x + omega*alpha - beta)/x',
      alpha:'(theta*x + beta)/omega - x',
      beta:'omega*(x + alpha) - theta*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_sigma_x_mas_beta_igual_y_por_1_mas_alpha_x',
    nivel:3, categoria:'matematicas',
    display:'σ x + β = y(1 + α x)', tex:'\\sigma x + \\beta = y(1 + \\alpha x)',
    vars:['sigma','x','beta','y','alpha'],
    solutions:{
      x:'(y - beta)/(sigma - y*alpha)',
      sigma:'(y - beta)/x + y*alpha',
      alpha:'(sigma*x + beta - y)/(y*x)',
      y:'(sigma*x + beta)/(1 + alpha*x)',
      beta:'y*(1 + alpha*x) - sigma*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_gamma_por_x_mas_delta_igual_beta_x_mas_alpha',
    nivel:3, categoria:'matematicas',
    display:'γ(x + δ) = β x + α', tex:'\\gamma(x + \\delta) = \\beta x + \\alpha',
    vars:['gamma','x','delta','beta','alpha'],
    solutions:{
      x:'(alpha - gamma*delta)/(gamma - beta)',
      gamma:'(beta*x + alpha)/(x + delta)',
      beta:'(gamma*x + gamma*delta - alpha)/x',
      delta:'(beta*x + alpha)/gamma - x',
      alpha:'gamma*(x + delta) - beta*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_phi_x_menos_y_igual_psi_por_x_mas_rho',
    nivel:3, categoria:'matematicas',
    display:'φ x - y = ψ(x + ρ)', tex:'\\phi x - y = \\psi(x + \\rho)',
    vars:['phi','x','y','psi','rho'],
    solutions:{
      x:'(y + psi*rho)/(phi - psi)',
      phi:'(y + psi*rho)/x + psi',
      psi:'(phi*x - y)/(x + rho)',
      rho:'(phi*x - y)/psi - x',
      y:'phi*x - psi*(x + rho)'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_theta_por_x_menos_lambda_mas_beta_igual_gamma_x_mas_delta',
    nivel:3, categoria:'matematicas',
    display:'θ(x - λ) + β = γ x + δ', tex:'\\theta(x - \\lambda) + \\beta = \\gamma x + \\delta',
    vars:['theta','x','lambda','beta','gamma','delta'],
    solutions:{
      x:'(delta + theta*lambda - beta)/(theta - gamma)',
      theta:'(gamma*x + delta - beta)/(x - lambda)',
      gamma:'(theta*x - theta*lambda + beta - delta)/x',
      lambda:'(theta*x + beta - gamma*x - delta)/theta',
      beta:'gamma*x + delta - theta*(x - lambda)',
      delta:'theta*(x - lambda) + beta - gamma*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_rho_x_mas_alpha_igual_sigma_x_mas_beta',
    nivel:3, categoria:'matematicas',
    display:'ρ x + α = σ x + β', tex:'\\rho x + \\alpha = \\sigma x + \\beta',
    vars:['rho','x','alpha','sigma','beta'],
    solutions:{
      x:'(beta - alpha)/(rho - sigma)',
      rho:'(sigma*x + beta - alpha)/x',
      sigma:'(rho*x + alpha - beta)/x',
      alpha:'rho*x - sigma*x + beta',
      beta:'(rho - sigma)*x + alpha'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_psi_por_x_mas_phi_igual_theta_x_menos_alpha',
    nivel:3, categoria:'matematicas',
    display:'ψ(x + φ) = θ x - α', tex:'\\psi(x + \\phi) = \\theta x - \\alpha',
    vars:['psi','x','phi','theta','alpha'],
    solutions:{
      x:'(alpha + psi*phi)/(theta - psi)',
      psi:'(theta*x - alpha)/(x + phi)',
      theta:'(psi*x + psi*phi + alpha)/x',
      phi:'(theta*x - alpha)/psi - x',
      alpha:'theta*x - psi*(x + phi)'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_pi_x_mas_gamma_igual_beta_por_x_menos_delta',
    nivel:3, categoria:'matematicas',
    display:'π x + γ = β(x - δ)', tex:'\\pi x + \\gamma = \\beta(x - \\delta)',
    vars:['pi','x','gamma','beta','delta'],
    solutions:{
      x:'(-beta*delta - gamma)/(pi - beta)',
      pi:'(beta*(x - delta) - gamma)/x',
      beta:'(pi*x + gamma)/(x - delta)',
      delta:'(beta*x - pi*x - gamma)/beta',
      gamma:'beta*(x - delta) - pi*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_y_mas_alpha_x_igual_beta_por_x_mas_gamma',
    nivel:3, categoria:'matematicas',
    display:'y + α x = β(x + γ)', tex:'y + \\alpha x = \\beta(x + \\gamma)',
    vars:['y','alpha','x','beta','gamma'],
    solutions:{
      x:'(beta*gamma - y)/(alpha - beta)',
      alpha:'(beta*gamma - y)/x + beta',
      beta:'(y + alpha*x)/(x + gamma)',
      gamma:'(y + alpha*x)/beta - x',
      y:'beta*(x + gamma) - alpha*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_sigma_por_x_menos_alpha_mas_beta_igual_psi_por_x_mas_gamma',
    nivel:3, categoria:'matematicas',
    display:'σ(x - α) + β = ψ(x + γ)', tex:'\\sigma(x - \\alpha) + \\beta = \\psi(x + \\gamma)',
    vars:['sigma','x','alpha','beta','psi','gamma'],
    solutions:{
      x:'(psi*gamma + sigma*alpha - beta)/(sigma - psi)',
      sigma:'(psi*(x + gamma) - beta)/(x - alpha)',
      psi:'(sigma*(x - alpha) + beta)/(x + gamma)',
      alpha:'x - (psi*(x + gamma) - beta)/sigma',
      gamma:'(sigma*(x - alpha) + beta)/psi - x',
      beta:'psi*(x + gamma) - sigma*(x - alpha)'
    },
    tags:['algebra']
  },
  {
    id:'l3_gk_rho_por_1_menos_x_igual_sigma_por_1_mas_x',
    nivel:3, categoria:'matematicas',
    display:'ρ(1 - x) = σ(1 + x)', tex:'\\rho(1 - x) = \\sigma(1 + x)',
    vars:['rho','x','sigma'],
    solutions:{
      x:'(rho - sigma)/(rho + sigma)',
      rho:'sigma*(1 + x)/(1 - x)',
      sigma:'rho*(1 - x)/(1 + x)'
    },
    tags:['algebra']
  },
  {
    id:'l3_gk_alpha_x_mas_beta_x_igual_gamma_mas_delta_x',
    nivel:3, categoria:'matematicas',
    display:'α x + β x = γ + δ x', tex:'\\alpha x + \\beta x = \\gamma + \\delta x',
    vars:['alpha','beta','x','gamma','delta'],
    solutions:{
      x:'gamma/(alpha + beta - delta)',
      alpha:'gamma/x - beta + delta',
      beta:'gamma/x - alpha + delta',
      delta:'alpha + beta - gamma/x',
      gamma:'(alpha + beta - delta)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_theta_por_x_mas_mu_mas_beta_igual_lambda_x_mas_gamma',
    nivel:3, categoria:'matematicas',
    display:'θ(x + μ) + β = λ x + γ', tex:'\\theta(x + \\mu) + \\beta = \\lambda x + \\gamma',
    vars:['theta','x','mu','beta','lambda','gamma'],
    solutions:{
      x:'(gamma - theta*mu - beta)/(theta - lambda)',
      theta:'(lambda*x + gamma - beta)/(x + mu)',
      lambda:'(theta*x + theta*mu + beta - gamma)/x',
      mu:'(lambda*x + gamma - beta)/theta - x',
      beta:'lambda*x + gamma - theta*(x + mu)',
      gamma:'theta*(x + mu) + beta - lambda*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['algebra']
  },
  {
    id:'l3_gk_y_menos_rho_por_x_mas_alpha_igual_sigma_por_x_menos_beta',
    nivel:3, categoria:'matematicas',
    display:'y - ρ(x + α) = σ(x - β)', tex:'y - \\rho(x + \\alpha) = \\sigma(x - \\beta)',
    vars:['y','rho','x','alpha','sigma','beta'],
    solutions:{
      x:'(y - rho*alpha + sigma*beta)/(rho + sigma)',
      rho:'(y - sigma*(x - beta))/(x + alpha)',
      sigma:'(y - rho*(x + alpha))/(x - beta)',
      alpha:'(y - sigma*(x - beta))/rho - x',
      beta:'x - (y - rho*(x + alpha))/sigma',
      y:'(rho + sigma)*x + (rho*alpha - sigma*beta)'
    },
    tags:['algebra']
  },

  // =======================
  // NIVEL 3 (20) — CON SUBÍNDICES
  // =======================
  {
    id:'l3_sub_a1x1_mas_b1_igual_c1x1_mas_d1',
    nivel:3, categoria:'matematicas',
    display:'a₁ x₁ + b₁ = c₁ x₁ + d₁', tex:'a_{1} x_{1} + b_{1} = c_{1} x_{1} + d_{1}',
    vars:['a_1','x_1','b_1','c_1','d_1'],
    solutions:{
      x_1:'(d_1 - b_1)/(a_1 - c_1)',
      a_1:'(c_1*x_1 + d_1 - b_1)/x_1',
      c_1:'(a_1*x_1 + b_1 - d_1)/x_1',
      b_1:'c_1*x_1 + d_1 - a_1*x_1',
      d_1:'a_1*x_1 + b_1 - c_1*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_k1x1_menos_m1_igual_n1x1_mas_p1',
    nivel:3, categoria:'matematicas',
    display:'k₁ x₁ - m₁ = n₁ x₁ + p₁', tex:'k_{1} x_{1} - m_{1} = n_{1} x_{1} + p_{1}',
    vars:['k_1','x_1','m_1','n_1','p_1'],
    solutions:{
      x_1:'(m_1 + p_1)/(k_1 - n_1)',
      k_1:'(n_1*x_1 + p_1 + m_1)/x_1',
      n_1:'(k_1*x_1 - m_1 - p_1)/x_1',
      m_1:'k_1*x_1 - n_1*x_1 - p_1',
      p_1:'k_1*x_1 - n_1*x_1 - m_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_y1_menos_2x1_igual_3x1_mas_h1',
    nivel:3, categoria:'matematicas',
    display:'y₁ - 2x₁ = 3x₁ + h₁', tex:'y_{1} - 2x_{1} = 3x_{1} + h_{1}',
    vars:['y_1','x_1','h_1'],
    solutions:{ x_1:'(y_1 - h_1)/5', y_1:'5*x_1 + h_1', h_1:'y_1 - 5*x_1' },
    tags:['algebra']
  },
  {
    id:'l3_sub_r1_por_x1_menos_a1_igual_s1_por_x1_mas_b1',
    nivel:3, categoria:'matematicas',
    display:'r₁(x₁ - a₁) = s₁(x₁ + b₁)', tex:'r_{1}(x_{1} - a_{1}) = s_{1}(x_{1} + b_{1})',
    vars:['r_1','x_1','a_1','s_1','b_1'],
    solutions:{
      x_1:'(r_1*a_1 + s_1*b_1)/(r_1 - s_1)',
      r_1:'s_1*(x_1 + b_1)/(x_1 - a_1)',
      s_1:'r_1*(x_1 - a_1)/(x_1 + b_1)',
      a_1:'x_1 - (s_1*(x_1 + b_1))/r_1',
      b_1:'(r_1*(x_1 - a_1))/s_1 - x_1'
    },
    tags:['algebra']
  },
  {
    id:'l3_sub_p1_mas_q1x1_igual_r1_mas_s1x1',
    nivel:3, categoria:'matematicas',
    display:'p₁ + q₁ x₁ = r₁ + s₁ x₁', tex:'p_{1} + q_{1} x_{1} = r_{1} + s_{1} x_{1}',
    vars:['p_1','q_1','x_1','r_1','s_1'],
    solutions:{
      x_1:'(r_1 - p_1)/(q_1 - s_1)',
      p_1:'r_1 + s_1*x_1 - q_1*x_1',
      q_1:'(r_1 - p_1)/x_1 + s_1',
      r_1:'p_1 + q_1*x_1 - s_1*x_1',
      s_1:'(p_1 + q_1*x_1 - r_1)/x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_a1_por_x1_menos_h1_mas_b1_igual_k1x1_mas_c1',
    nivel:3, categoria:'matematicas',
    display:'a₁(x₁ - h₁) + b₁ = k₁ x₁ + c₁', tex:'a_{1}(x_{1} - h_{1}) + b_{1} = k_{1} x_{1} + c_{1}',
    vars:['a_1','x_1','h_1','b_1','k_1','c_1'],
    solutions:{
      x_1:'(c_1 + a_1*h_1 - b_1)/(a_1 - k_1)',
      a_1:'(k_1*x_1 + c_1 - b_1)/(x_1 - h_1)',
      k_1:'(a_1*(x_1 - h_1) + b_1 - c_1)/x_1',
      h_1:'x_1 - (k_1*x_1 + c_1 - b_1)/a_1',
      b_1:'k_1*x_1 + c_1 - a_1*(x_1 - h_1)',
      c_1:'a_1*(x_1 - h_1) + b_1 - k_1*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_y1_por_1_mas_a1x1_igual_b1_mas_c1x1',
    nivel:3, categoria:'matematicas',
    display:'y₁(1 + a₁ x₁) = b₁ + c₁ x₁', tex:'y_{1}(1 + a_{1} x_{1}) = b_{1} + c_{1} x_{1}',
    vars:['y_1','a_1','x_1','b_1','c_1'],
    solutions:{
      x_1:'(b_1 - y_1)/(y_1*a_1 - c_1)',
      y_1:'(b_1 + c_1*x_1)/(1 + a_1*x_1)',
      a_1:'(b_1 + c_1*x_1 - y_1)/(x_1*y_1)',
      b_1:'y_1*(1 + a_1*x_1) - c_1*x_1',
      c_1:'(y_1*(1 + a_1*x_1) - b_1)/x_1'
    },
    tags:['algebra']
  },
  {
    id:'l3_sub_p1x1_mas_q1_igual_r1_por_x1_mas_s1',
    nivel:3, categoria:'matematicas',
    display:'p₁ x₁ + q₁ = r₁(x₁ + s₁)', tex:'p_{1} x_{1} + q_{1} = r_{1}(x_{1} + s_{1})',
    vars:['p_1','x_1','q_1','r_1','s_1'],
    solutions:{
      x_1:'(r_1*s_1 - q_1)/(p_1 - r_1)',
      p_1:'(r_1*(x_1 + s_1) - q_1)/x_1',
      r_1:'(p_1*x_1 + q_1)/(x_1 + s_1)',
      s_1:'(p_1*x_1 + q_1)/r_1 - x_1',
      q_1:'r_1*(x_1 + s_1) - p_1*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_u1_menos_a1x1_igual_b1x1_mas_v1',
    nivel:3, categoria:'matematicas',
    display:'u₁ - a₁ x₁ = b₁ x₁ + v₁', tex:'u_{1} - a_{1} x_{1} = b_{1} x_{1} + v_{1}',
    vars:['u_1','a_1','x_1','b_1','v_1'],
    solutions:{
      x_1:'(u_1 - v_1)/(a_1 + b_1)',
      a_1:'(u_1 - v_1)/x_1 - b_1',
      b_1:'(u_1 - v_1)/x_1 - a_1',
      u_1:'(a_1 + b_1)*x_1 + v_1',
      v_1:'u_1 - (a_1 + b_1)*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_k1_mas_m1_por_x1_mas_b1_igual_p1x1_mas_d1',
    nivel:3, categoria:'matematicas',
    display:'(k₁ + m₁)x₁ + b₁ = p₁ x₁ + d₁', tex:'(k_{1} + m_{1})x_{1} + b_{1} = p_{1} x_{1} + d_{1}',
    vars:['k_1','m_1','x_1','b_1','p_1','d_1'],
    solutions:{
      x_1:'(d_1 - b_1)/(k_1 + m_1 - p_1)',
      k_1:'(p_1*x_1 + d_1 - b_1)/x_1 - m_1',
      m_1:'(p_1*x_1 + d_1 - b_1)/x_1 - k_1',
      p_1:'(k_1 + m_1) + (b_1 - d_1)/x_1',
      b_1:'(p_1 - k_1 - m_1)*x_1 + d_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_r1x1_mas_s1_igual_t1_menos_u1x1',
    nivel:3, categoria:'matematicas',
    display:'r₁ x₁ + s₁ = t₁ - u₁ x₁', tex:'r_{1} x_{1} + s_{1} = t_{1} - u_{1} x_{1}',
    vars:['r_1','x_1','s_1','t_1','u_1'],
    solutions:{
      x_1:'(t_1 - s_1)/(r_1 + u_1)',
      r_1:'(t_1 - s_1)/x_1 - u_1',
      u_1:'(t_1 - s_1)/x_1 - r_1',
      t_1:'(r_1 + u_1)*x_1 + s_1',
      s_1:'t_1 - (r_1 + u_1)*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_a1x1_mas_b1x1_igual_c1_mas_d1x1',
    nivel:3, categoria:'matematicas',
    display:'a₁ x₁ + b₁ x₁ = c₁ + d₁ x₁', tex:'a_{1} x_{1} + b_{1} x_{1} = c_{1} + d_{1} x_{1}',
    vars:['a_1','b_1','x_1','c_1','d_1'],
    solutions:{
      x_1:'c_1/(a_1 + b_1 - d_1)',
      a_1:'c_1/x_1 - b_1 + d_1',
      b_1:'c_1/x_1 - a_1 + d_1',
      d_1:'a_1 + b_1 - c_1/x_1',
      c_1:'(a_1 + b_1 - d_1)*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_r1_por_x1_menos_h1_igual_m1_por_x1_mas_l1',
    nivel:3, categoria:'matematicas',
    display:'r₁(x₁ - h₁) = m₁(x₁ + l₁)', tex:'r_{1}(x_{1} - h_{1}) = m_{1}(x_{1} + l_{1})',
    vars:['r_1','x_1','h_1','m_1','l_1'],
    solutions:{
      x_1:'(m_1*l_1 + r_1*h_1)/(r_1 - m_1)',
      r_1:'m_1*(x_1 + l_1)/(x_1 - h_1)',
      m_1:'r_1*(x_1 - h_1)/(x_1 + l_1)',
      h_1:'x_1 - m_1*(x_1 + l_1)/r_1',
      l_1:'(r_1*(x_1 - h_1))/m_1 - x_1'
    },
    tags:['algebra']
  },
  {
    id:'l3_sub_a1_por_1_menos_x1_igual_b1_por_1_mas_x1',
    nivel:3, categoria:'matematicas',
    display:'a₁(1 - x₁) = b₁(1 + x₁)', tex:'a_{1}(1 - x_{1}) = b_{1}(1 + x_{1})',
    vars:['a_1','x_1','b_1'],
    solutions:{
      x_1:'(a_1 - b_1)/(a_1 + b_1)',
      a_1:'b_1*(1 + x_1)/(1 - x_1)',
      b_1:'a_1*(1 - x_1)/(1 + x_1)'
    },
    tags:['algebra']
  },
  {
    id:'l3_sub_y1_menos_k1_por_x1_mas_h1_igual_m1x1_mas_n1',
    nivel:3, categoria:'matematicas',
    display:'y₁ - k₁(x₁ + h₁) = m₁ x₁ + n₁', tex:'y_{1} - k_{1}(x_{1} + h_{1}) = m_{1} x_{1} + n_{1}',
    vars:['y_1','k_1','x_1','h_1','m_1','n_1'],
    solutions:{
      x_1:'(y_1 - n_1 - k_1*h_1)/(k_1 + m_1)',
      k_1:'(y_1 - m_1*x_1 - n_1)/(x_1 + h_1)',
      m_1:'(y_1 - k_1*(x_1 + h_1) - n_1)/x_1',
      h_1:'(y_1 - m_1*x_1 - n_1)/k_1 - x_1',
      n_1:'y_1 - (k_1 + m_1)*x_1 - k_1*h_1',
      y_1:'(k_1 + m_1)*x_1 + k_1*h_1 + n_1'
    },
    tags:['algebra']
  },
  {
    id:'l3_sub_p1x1_menos_q1_igual_r1_por_x1_menos_s1',
    nivel:3, categoria:'matematicas',
    display:'p₁ x₁ - q₁ = r₁(x₁ - s₁)', tex:'p_{1} x_{1} - q_{1} = r_{1}(x_{1} - s_{1})',
    vars:['p_1','x_1','q_1','r_1','s_1'],
    solutions:{
      x_1:'(q_1 - r_1*s_1)/(p_1 - r_1)',
      p_1:'(r_1*(x_1 - s_1) + q_1)/x_1',
      r_1:'(p_1*x_1 - q_1)/(x_1 - s_1)',
      s_1:'x_1 - (p_1*x_1 - q_1)/r_1',
      q_1:'p_1*x_1 - r_1*(x_1 - s_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_a1x1_mas_b1_igual_c1_por_x1_menos_d1_mas_e1',
    nivel:3, categoria:'matematicas',
    display:'a₁ x₁ + b₁ = c₁(x₁ - d₁) + e₁', tex:'a_{1} x_{1} + b_{1} = c_{1}(x_{1} - d_{1}) + e_{1}',
    vars:['a_1','x_1','b_1','c_1','d_1','e_1'],
    solutions:{
      x_1:'(e_1 - b_1 - c_1*d_1)/(a_1 - c_1)',
      a_1:'(c_1*(x_1 - d_1) + e_1 - b_1)/x_1',
      c_1:'(a_1*x_1 + b_1 - e_1)/(x_1 - d_1)',
      d_1:'x_1 - (a_1*x_1 + b_1 - e_1)/c_1',
      e_1:'a_1*x_1 + b_1 - c_1*(x_1 - d_1)',
      b_1:'c_1*(x_1 - d_1) + e_1 - a_1*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_y1_mas_p1x1_igual_q1_por_x1_mas_r1_mas_s1',
    nivel:3, categoria:'matematicas',
    display:'y₁ + p₁ x₁ = q₁(x₁ + r₁) + s₁', tex:'y_{1} + p_{1} x_{1} = q_{1}(x_{1} + r_{1}) + s_{1}',
    vars:['y_1','p_1','x_1','q_1','r_1','s_1'],
    solutions:{
      x_1:'(q_1*r_1 + s_1 - y_1)/(p_1 - q_1)',
      p_1:'(q_1*(x_1 + r_1) + s_1 - y_1)/x_1',
      q_1:'(y_1 + p_1*x_1 - s_1)/(x_1 + r_1)',
      r_1:'(y_1 + p_1*x_1 - s_1)/q_1 - x_1',
      s_1:'y_1 + p_1*x_1 - q_1*(x_1 + r_1)',
      y_1:'q_1*(x_1 + r_1) + s_1 - p_1*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_n1x1_mas_y1_igual_m1x1_mas_k1',
    nivel:3, categoria:'matematicas',
    display:'n₁ x₁ + y₁ = m₁ x₁ + k₁', tex:'n_{1} x_{1} + y_{1} = m_{1} x_{1} + k_{1}',
    vars:['n_1','x_1','y_1','m_1','k_1'],
    solutions:{
      x_1:'(k_1 - y_1)/(n_1 - m_1)',
      n_1:'(m_1*x_1 + k_1 - y_1)/x_1',
      m_1:'(n_1*x_1 + y_1 - k_1)/x_1',
      y_1:'(n_1 - m_1)*x_1 + k_1',
      k_1:'n_1*x_1 + y_1 - m_1*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['algebra']
  },
  {
    id:'l3_sub_a2x2_mas_b2_igual_c2_por_x2_mas_d2_mas_e2',
    nivel:3, categoria:'matematicas',
    display:'a₂ x₂ + b₂ = c₂(x₂ + d₂) + e₂', tex:'a_{2} x_{2} + b_{2} = c_{2}(x_{2} + d_{2}) + e_{2}',
    vars:['a_2','x_2','b_2','c_2','d_2','e_2'],
    solutions:{
      x_2:'(c_2*d_2 + e_2 - b_2)/(a_2 - c_2)',
      a_2:'(c_2*(x_2 + d_2) + e_2 - b_2)/x_2',
      c_2:'(a_2*x_2 + b_2 - e_2)/(x_2 + d_2)',
      d_2:'(a_2*x_2 + b_2 - e_2)/c_2 - x_2',
      e_2:'a_2*x_2 + b_2 - c_2*(x_2 + d_2)',
      b_2:'c_2*(x_2 + d_2) + e_2 - a_2*x_2'
    },
    constraints:{ nonZero:['x_2'] },
    tags:['algebra']
  },

  {
    id:'l4_a_por_x_menos_b_igual_c_por_x_mas_d',
    nivel:4, categoria:'matematicas',
    display:'a(x - b) = c(x + d)', tex:'a(x-b)=c(x+d)',
    vars:['a','x','b','c','d'],
    solutions:{
      x:'(a*b + c*d)/(a - c)',
      a:'c*(x + d)/(x - b)',
      b:'x - c*(x + d)/a',
      c:'a*(x - b)/(x + d)',
      d:'a*(x - b)/c - x'
    },
    constraints:{ nonZero:['a','c','x-b','x+d'] },
    tags:['distributiva']
  },
  {
    id:'l4_k_por_x_mas_h_igual_p_mas_qx',
    nivel:4, categoria:'matematicas',
    display:'k(x + h) = p + qx', tex:'k(x+h)=p+qx',
    vars:['k','x','h','p','q'],
    solutions:{
      x:'(p - k*h)/(k - q)',
      k:'(p + q*x)/(x + h)',
      h:'(p + q*x)/k - x',
      p:'k*(x + h) - q*x',
      q:'(k*(x + h) - p)/x'
    },
    constraints:{ nonZero:['x','k','x+h'] },
    tags:['distributiva']
  },
  {
    id:'l4_alpha_x_mas_beta_igual_gamma_por_x_menos_delta_mas_epsilon',
    nivel:4, categoria:'matematicas',
    display:'αx + β = γ(x - δ) + ε', tex:'\\alpha x + \\beta = \\gamma(x-\\delta)+\\varepsilon',
    vars:['alpha','x','beta','gamma','delta','epsilon'],
    solutions:{
      x:'(epsilon - beta - gamma*delta)/(alpha - gamma)',
      alpha:'(gamma*x - gamma*delta + epsilon - beta)/x',
      beta:'gamma*x - gamma*delta + epsilon - alpha*x',
      gamma:'(alpha*x + beta - epsilon)/(x - delta)',
      delta:'(alpha*x + beta - epsilon)/gamma - x',
      epsilon:'alpha*x + beta - gamma*(x - delta)'
    },
    constraints:{ nonZero:['x','gamma','x-delta'] },
    tags:['distributiva']
  },
  {
    id:'l4_a_por_1_mas_bx_igual_c',
    nivel:4, categoria:'matematicas',
    display:'a(1 + b x) = c', tex:'a(1+bx)=c',
    vars:['a','b','x','c'],
    solutions:{
      x:'(c/a - 1)/b',
      a:'c/(1 + b*x)',
      b:'(c/a - 1)/x',
      c:'a*(1 + b*x)'
    },
    constraints:{ nonZero:['a','b','x'] },
    tags:['distributiva']
  },
  {
    id:'l4_A_por_1_menos_lambda_x_igual_B_mas_Cx',
    nivel:4, categoria:'matematicas',
    display:'A(1 - λx) = B + Cx', tex:'A(1-\\lambda x)=B+Cx',
    vars:['A','lambda','x','B','C'],
    solutions:{
      x:'(A - B)/(A*lambda + C)',
      A:'(B + C*x)/(1 - lambda*x)',
      lambda:'(A - B - C*x)/(A*x)',
      B:'A*(1 - lambda*x) - C*x',
      C:'(A*(1 - lambda*x) - B)/x'
    },
    constraints:{ nonZero:['x','A'] },
    tags:['distributiva']
  },
  {
    id:'l4_k_menos_mx_por_n_igual_p',
    nivel:4, categoria:'matematicas',
    display:'(k - m x) n = p', tex:'(k-mx)\\,n=p',
    vars:['k','m','x','n','p'],
    solutions:{
      x:'(k*n - p)/(m*n)',
      k:'p/n + m*x',
      m:'(k*n - p)/(n*x)',
      n:'p/(k - m*x)',
      p:'n*(k - m*x)'
    },
    constraints:{ nonZero:['m','n','x','k-m*x'] },
    tags:['distributiva']
  },
  {
    id:'l4_y_igual_a_por_x_mas_b_mas_c_por_x_menos_d',
    nivel:4, categoria:'matematicas',
    display:'y = a(x + b) + c(x - d)', tex:'y=a(x+b)+c(x-d)',
    vars:['y','a','x','b','c','d'],
    solutions:{
      x:'(y - a*b + c*d)/(a + c)',
      a:'(y - c*(x - d))/(x + b)',
      b:'(y - c*(x - d))/a - x',
      c:'(y - a*(x + b))/(x - d)',
      d:'x - (y - a*(x + b))/c',
      y:'(a + c)*x + (a*b - c*d)'
    },
    constraints:{ nonZero:['a','c','x+b','x-d'] },
    tags:['distributiva']
  },
  {
    id:'l4_M_igual_p_mas_qx_por_r_mas_s',
    nivel:4, categoria:'matematicas',
    display:'M = (p + qx)(r + s)', tex:'M=(p+qx)(r+s)',
    vars:['M','p','q','x','r','s'],
    solutions:{
      x:'(M/(r + s) - p)/q',
      p:'M/(r + s) - q*x',
      q:'(M/(r + s) - p)/x',
      r:'M/(p + q*x) - s',
      s:'M/(p + q*x) - r',
      M:'(p + q*x)*(r + s)'
    },
    constraints:{ nonZero:['q','x','r+s','p+q*x'] },
    tags:['distributiva']
  },
  {
    id:'l4_a_por_x_mas_h_igual_b_mas_cx',
    nivel:4, categoria:'matematicas',
    display:'a(x + h) = b + c x', tex:'a(x+h)=b+cx',
    vars:['a','x','h','b','c'],
    solutions:{
      x:'(b - a*h)/(a - c)',
      a:'(b + c*x)/(x + h)',
      h:'(b + c*x)/a - x',
      b:'a*(x + h) - c*x',
      c:'(a*(x + h) - b)/x'
    },
    constraints:{ nonZero:['a','x','x+h'] },
    tags:['distributiva']
  },
  {
    id:'l4_phi_menos_psi_x_igual_theta_por_1_menos_omega_x',
    nivel:4, categoria:'matematicas',
    display:'φ - ψx = θ(1 - ωx)', tex:'\\phi-\\psi x=\\theta(1-\\omega x)',
    vars:['phi','psi','x','theta','omega'],
    solutions:{
      x:'(phi - theta)/(psi - theta*omega)',
      psi:'(phi - theta)/x + theta*omega',
      theta:'(phi - psi*x)/(1 - omega*x)',
      omega:'(theta - phi + psi*x)/(theta*x)',
      phi:'theta*(1 - omega*x) + psi*x'
    },
    constraints:{ nonZero:['x','theta','psi - theta*omega','1-omega*x'] },
    tags:['distributiva']
  },
  {
    id:'l4_A_por_x_menos_B_igual_C_por_x_mas_D_mas_E',
    nivel:4, categoria:'matematicas',
    display:'A(x - B) = C(x + D) + E', tex:'A(x-B)=C(x+D)+E',
    vars:['A','x','B','C','D','E'],
    solutions:{
      x:'(A*B + C*D + E)/(A - C)',
      A:'(C*(x + D) + E)/(x - B)',
      B:'x - (C*(x + D) + E)/A',
      C:'(A*(x - B) - E)/(x + D)',
      D:'(A*(x - B) - E)/C - x',
      E:'A*(x - B) - C*(x + D)'
    },
    constraints:{ nonZero:['A','C','x-B','x+D'] },
    tags:['distributiva']
  },
  {
    id:'l4_n_por_k_mas_mx_mas_p_por_x_menos_q_igual_r',
    nivel:4, categoria:'matematicas',
    display:'n(k + m x) + p(x - q) = r', tex:'n(k+mx)+p(x-q)=r',
    vars:['n','k','m','x','p','q','r'],
    solutions:{
      x:'(r - n*k + p*q)/(n*m + p)',
      n:'(r - p*(x - q))/(k + m*x)',
      m:'(r - n*k - p*x + p*q)/(n*x)',
      p:'(r - n*(k + m*x))/(x - q)',
      k:'(r - n*m*x - p*(x - q))/n',
      q:'x - (r - n*(k + m*x))/p',
      r:'n*(k + m*x) + p*(x - q)'
    },
    constraints:{ nonZero:['x','n','k+m*x','x-q','n*m+p'] },
    tags:['distributiva']
  },
  {
    id:'l4_y_igual_c_por_a_por_x_mas_b_menos_d',
    nivel:4, categoria:'matematicas',
    display:'y = c[ a(x + b) - d ]', tex:'y=c\\,[a(x+b)-d]',
    vars:['y','c','a','x','b','d'],
    solutions:{
      x:'(y/c - a*b + d)/a',
      a:'(y/c + d)/(x + b)',
      b:'(y/c + d)/a - x',
      c:'y/(a*(x + b) - d)',
      d:'a*(x + b) - y/c',
      y:'c*(a*(x + b) - d)'
    },
    constraints:{ nonZero:['a','c','x+b'] },
    tags:['distributiva']
  },
  {
    id:'l4_b_por_x_mas_a_igual_c_por_x_menos_d',
    nivel:4, categoria:'matematicas',
    display:'b(x + a) = c(x - d)', tex:'b(x+a)=c(x-d)',
    vars:['b','x','a','c','d'],
    solutions:{
      x:'(b*a + c*d)/(b - c)',
      b:'c*(x - d)/(x + a)',
      a:'(c*(x - d))/b - x',
      c:'b*(x + a)/(x - d)',
      d:'x - b*(x + a)/c'
    },
    constraints:{ nonZero:['b','c','x+a','x-d'] },
    tags:['distributiva']
  },
  {
    id:'l4_t_por_lambda_menos_mu_x_igual_s_por_1_mas_nu_x',
    nivel:4, categoria:'matematicas',
    display:'t(λ - μx) = s(1 + νx)', tex:'t(\\lambda-\\mu x)=s(1+\\nu x)',
    vars:['t','lambda','mu','x','s','nu'],
    solutions:{
      x:'(t*lambda - s)/(t*mu + s*nu)',
      lambda:'(s*(1 + nu*x) + t*mu*x)/t',
      mu:'(t*lambda - s*(1 + nu*x))/(t*x)',
      t:'s*(1 + nu*x)/(lambda - mu*x)',
      s:'t*(lambda - mu*x)/(1 + nu*x)',
      nu:'(t*lambda - s - t*mu*x)/(s*x)'
    },
    constraints:{ nonZero:['x','t','s','lambda-mu*x','1+nu*x','t*mu+s*nu'] },
    tags:['distributiva']
  },
  {
    id:'l4_y_igual_m_menos_kx_por_x_mas_h',
    nivel:4, categoria:'matematicas',
    display:'y = (m - kx)(x + h)', tex:'y=(m-kx)(x+h)',
    vars:['y','m','k','x','h'],
    solutions:{
      // cuadrática en x
      x:'(m - k*h - sqrt((k*h - m)^2 - 4*k*(y - m*h)))/(2*k)',
      m:'y/(x + h) + k*x',
      k:'(m*(x + h) - y)/(x*(x + h))',
      h:'y/(m - k*x) - x',
      y:'(m - k*x)*(x + h)'
    },
    constraints:{ nonZero:['k','x','x+h','m-k*x'] },
    tags:['distributiva','cuadratica']
  },
  {
    id:'l4_gamma_por_alpha_mas_beta_x_igual_delta_mas_epsilon_x',
    nivel:4, categoria:'matematicas',
    display:'γ(α + βx) = δ + εx', tex:'\\gamma(\\alpha+\\beta x)=\\delta+\\varepsilon x',
    vars:['gamma','alpha','beta','x','delta','epsilon'],
    solutions:{
      x:'(delta - gamma*alpha)/(gamma*beta - epsilon)',
      alpha:'(delta + (epsilon - gamma*beta)*x)/gamma',
      beta:'(delta - gamma*alpha + epsilon*x)/(gamma*x)',
      gamma:'(delta + epsilon*x)/(alpha + beta*x)',
      delta:'gamma*alpha + (gamma*beta - epsilon)*x',
      epsilon:'(gamma*alpha + gamma*beta*x - delta)/x'
    },
    constraints:{ nonZero:['x','gamma','gamma*beta-epsilon','alpha+beta*x'] },
    tags:['distributiva']
  },
  {
    id:'l4_y_igual_a_mas_b_por_x_mas_c_mas_d_por_e_menos_fx',
    nivel:4, categoria:'matematicas',
    display:'y = a + b(x + c) + d(e - f x)', tex:'y=a+b(x+c)+d(e-fx)',
    vars:['y','a','b','x','c','d','e','f'],
    solutions:{
      x:'(y - a - b*c - d*e)/(b - d*f)',
      a:'y - b*(x + c) - d*(e - f*x)',
      b:'(y - a - d*(e - f*x))/(x + c)',
      c:'(y - a - d*(e - f*x))/b - x',
      d:'(y - a - b*(x + c))/(e - f*x)',
      e:'(y - a - b*(x + c))/d + f*x',
      f:'(b*x + b*c + d*e - y + a)/(d*x)'
    },
    constraints:{ nonZero:['x','b - d*f','x+c','e - f*x','d'] },
    tags:['distributiva']
  },
  {
    id:'l4_v_por_x_menos_u_mas_w_por_x_mas_z_igual_y',
    nivel:4, categoria:'matematicas',
    display:'v(x - u) + w(x + z) = y', tex:'v(x-u)+w(x+z)=y',
    vars:['v','x','u','w','z','y'],
    solutions:{
      x:'(y + v*u - w*z)/(v + w)',
      v:'(y - w*(x + z))/(x - u)',
      w:'(y - v*(x - u))/(x + z)',
      u:'x - (y - w*(x + z))/v',
      z:'(y - v*(x - u))/w - x',
      y:'v*(x - u) + w*(x + z)'
    },
    constraints:{ nonZero:['x','v','w','x-u','x+z','v+w'] },
    tags:['distributiva']
  },
  {
    id:'l4_1_mas_ax_por_b_menos_cx_igual_d',
    nivel:4, categoria:'matematicas',
    display:'(1 + a x)(b - c x) = d', tex:'(1+ax)(b-cx)=d',
    vars:['a','x','b','c','d'],
    solutions:{
      x:'(a*b - c - sqrt((c - a*b)^2 - 4*a*c*(d - b)))/(2*a*c)',
      a:'(d/(b - c*x) - 1)/x',
      b:'d/(1 + a*x) + c*x',
      c:'(b - d/(1 + a*x))/x',
      d:'(1 + a*x)*(b - c*x)'
    },
    constraints:{ nonZero:['a','c','x','b-c*x','1+a*x'] },
    tags:['distributiva','cuadratica']
  },
  
  // =======================
  // NIVEL 4 — 20 CON SUBÍNDICES
  // =======================
  {
    id:'l4_sub_a1_por_x1_mas_b2_igual_c1',
    nivel:4, categoria:'matematicas',
    display:'a₁(x₁ + b₂) = c₁', tex:'a_{1}(x_{1}+b_{2})=c_{1}',
    vars:['a_1','x_1','b_2','c_1'],
    solutions:{
      x_1:'c_1/a_1 - b_2',
      a_1:'c_1/(x_1 + b_2)',
      b_2:'c_1/a_1 - x_1',
      c_1:'a_1*(x_1 + b_2)'
    },
    constraints:{ nonZero:['a_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_k2_por_2x1_menos_m1_igual_p2',
    nivel:4, categoria:'matematicas',
    display:'k₂(2x₁ - m₁) = p₂', tex:'k_{2}(2x_{1}-m_{1})=p_{2}',
    vars:['k_2','x_1','m_1','p_2'],
    solutions:{
      x_1:'(p_2/k_2 + m_1)/2',
      k_2:'p_2/(2*x_1 - m_1)',
      m_1:'2*x_1 - p_2/k_2',
      p_2:'k_2*(2*x_1 - m_1)'
    },
    constraints:{ nonZero:['k_2'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_x2_mas_h1_por_r1_igual_s2',
    nivel:4, categoria:'matematicas',
    display:'(x₂ + h₁) r₁ = s₂', tex:'(x_{2}+h_{1})\,r_{1}=s_{2}',
    vars:['x_2','h_1','r_1','s_2'],
    solutions:{
      x_2:'s_2/r_1 - h_1',
      r_1:'s_2/(x_2 + h_1)',
      h_1:'s_2/r_1 - x_2',
      s_2:'r_1*(x_2 + h_1)'
    },
    constraints:{ nonZero:['r_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_a1x2_mas_b1_por_c2_igual_y1',
    nivel:4, categoria:'matematicas',
    display:'(a₁ x₂ + b₁) c₂ = y₁', tex:'(a_{1}x_{2}+b_{1})\,c_{2}=y_{1}',
    vars:['a_1','x_2','b_1','c_2','y_1'],
    solutions:{
      x_2:'(y_1/c_2 - b_1)/a_1',
      a_1:'(y_1/c_2 - b_1)/x_2',
      b_1:'y_1/c_2 - a_1*x_2',
      c_2:'y_1/(a_1*x_2 + b_1)',
      y_1:'c_2*(a_1*x_2 + b_1)'
    },
    constraints:{ nonZero:['a_1','x_2','c_2'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_A1_por_1_menos_lambda1_x1_igual_B1',
    nivel:4, categoria:'matematicas',
    display:'A₁(1 - λ₁ x₁) = B₁', tex:'A_{1}(1-\\lambda_{1}x_{1})=B_{1}',
    vars:['A_1','lambda_1','x_1','B_1'],
    solutions:{
      x_1:'(A_1 - B_1)/(A_1*lambda_1)',
      A_1:'B_1/(1 - lambda_1*x_1)',
      lambda_1:'(A_1 - B_1)/(A_1*x_1)',
      B_1:'A_1*(1 - lambda_1*x_1)'
    },
    constraints:{ nonZero:['A_1','lambda_1','x_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_y1_igual_a1_por_x1_menos_b2_mas_c1',
    nivel:4, categoria:'matematicas',
    display:'y₁ = a₁(x₁ - b₂) + c₁', tex:'y_{1}=a_{1}(x_{1}-b_{2})+c_{1}',
    vars:['y_1','a_1','x_1','b_2','c_1'],
    solutions:{
      y_1:'a_1*(x_1 - b_2)+c_1',
      x_1:'(y_1 - c_1)/a_1 + b_2',
      a_1:'(y_1 - c_1)/(x_1 - b_2)',
      b_2:'x_1 - (y_1 - c_1)/a_1',
      c_1:'y_1 - a_1*(x_1 - b_2)'
    },
    constraints:{ nonZero:['a_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_M1_igual_g1_por_m1_mas_mu1_x2',
    nivel:4, categoria:'fisica',
    display:'M₁ = g₁(m₁ + μ₁ x₂)', tex:'M_{1}=g_{1}(m_{1}+\\mu_{1}x_{2})',
    vars:['M_1','g_1','m_1','mu_1','x_2'],
    solutions:{
      M_1:'g_1*(m_1 + mu_1*x_2)',
      g_1:'M_1/(m_1 + mu_1*x_2)',
      m_1:'M_1/g_1 - mu_1*x_2',
      mu_1:'(M_1/g_1 - m_1)/x_2',
      x_2:'(M_1/g_1 - m_1)/mu_1'
    },
    constraints:{ nonZero:['g_1','mu_1','x_2'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_Q1_igual_Q0_1_menos_alpha1_x1_por_t1',
    nivel:4, categoria:'fisica',
    display:'Q₁ = (Q₀₁ - α₁ x₁) t₁', tex:'Q_{1}=(Q_{01}-\\alpha_{1}x_{1})\,t_{1}',
    vars:['Q_1','Q0_1','alpha_1','x_1','t_1'],
    solutions:{
      Q_1:'(Q0_1 - alpha_1*x_1)*t_1',
      Q0_1:'Q_1/t_1 + alpha_1*x_1',
      alpha_1:'(Q0_1 - Q_1/t_1)/x_1',
      x_1:'(Q0_1 - Q_1/t_1)/alpha_1',
      t_1:'Q_1/(Q0_1 - alpha_1*x_1)'
    },
    constraints:{ nonZero:['t_1','alpha_1','x_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_V1_igual_E1_menos_I1R1_por_x1',
    nivel:4, categoria:'electricidad',
    display:'V₁ = (E₁ - I₁ R₁) x₁', tex:'V_{1}=(E_{1}-I_{1}R_{1})\,x_{1}',
    vars:['V_1','E_1','I_1','R_1','x_1'],
    solutions:{
      V_1:'(E_1 - I_1*R_1)*x_1',
      x_1:'V_1/(E_1 - I_1*R_1)',
      E_1:'V_1/x_1 + I_1*R_1',
      I_1:'(E_1 - V_1/x_1)/R_1',
      R_1:'(E_1 - V_1/x_1)/I_1'
    },
    constraints:{ nonZero:['x_1','I_1','R_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_phi1_menos_psi1_x1_por_theta1_igual_omega1',
    nivel:4, categoria:'matematicas',
    display:'(φ₁ - ψ₁ x₁) θ₁ = ω₁', tex:'(\\phi_{1}-\\psi_{1}x_{1})\\,\\theta_{1}=\\omega_{1}',
    vars:['phi_1','psi_1','x_1','theta_1','omega_1'],
    solutions:{
      x_1:'(phi_1*theta_1 - omega_1)/(psi_1*theta_1)',
      phi_1:'omega_1/theta_1 + psi_1*x_1',
      psi_1:'(phi_1*theta_1 - omega_1)/(theta_1*x_1)',
      theta_1:'omega_1/(phi_1 - psi_1*x_1)',
      omega_1:'theta_1*(phi_1 - psi_1*x_1)'
    },
    constraints:{ nonZero:['theta_1','psi_1','x_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_p1_igual_rho1_por_V0_1_mas_beta1_x2',
    nivel:4, categoria:'fisica',
    display:'p₁ = ρ₁ (V₀₁ + β₁ x₂)', tex:'p_{1}=\\rho_{1}(V_{01}+\\beta_{1}x_{2})',
    vars:['p_1','rho_1','V0_1','beta_1','x_2'],
    solutions:{
      p_1:'rho_1*(V0_1 + beta_1*x_2)',
      rho_1:'p_1/(V0_1 + beta_1*x_2)',
      V0_1:'p_1/rho_1 - beta_1*x_2',
      beta_1:'(p_1/rho_1 - V0_1)/x_2',
      x_2:'(p_1/rho_1 - V0_1)/beta_1'
    },
    constraints:{ nonZero:['rho_1','beta_1','x_2'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_F1_igual_m0_1_mas_Dm1_x1_por_a1',
    nivel:4, categoria:'fisica',
    display:'F₁ = (m₀₁ + Δm₁ x₁) a₁', tex:'F_{1}=(m_{01}+\\Delta m_{1}x_{1})\,a_{1}',
    vars:['F_1','m0_1','Delta_m1','x_1','a_1'],
    solutions:{
      F_1:'a_1*(m0_1 + Delta_m1*x_1)',
      a_1:'F_1/(m0_1 + Delta_m1*x_1)',
      m0_1:'F_1/a_1 - Delta_m1*x_1',
      Delta_m1:'(F_1/a_1 - m0_1)/x_1',
      x_1:'(F_1/a_1 - m0_1)/Delta_m1'
    },
    constraints:{ nonZero:['a_1','Delta_m1','x_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_T1_igual_T0_1_mas_alpha1_x1_por_1_mas_eps1',
    nivel:4, categoria:'fisica',
    display:'T₁ = (T₀₁ + α₁ x₁)(1 + ε₁)', tex:'T_{1}=(T_{01}+\\alpha_{1}x_{1})(1+\\varepsilon_{1})',
    vars:['T_1','T0_1','alpha_1','x_1','eps_1'],
    solutions:{
      T_1:'(T0_1 + alpha_1*x_1)*(1 + eps_1)',
      x_1:'(T_1/(1 + eps_1) - T0_1)/alpha_1',
      T0_1:'T_1/(1 + eps_1) - alpha_1*x_1',
      alpha_1:'(T_1/(1 + eps_1) - T0_1)/x_1',
      eps_1:'T_1/(T0_1 + alpha_1*x_1) - 1'
    },
    constraints:{ nonZero:['alpha_1','x_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_y2_igual_a1x1_mas_b1_por_c1',
    nivel:4, categoria:'matematicas',
    display:'y₂ = (a₁ x₁ + b₁) c₁', tex:'y_{2}=(a_{1}x_{1}+b_{1})\,c_{1}',
    vars:['y_2','a_1','x_1','b_1','c_1'],
    solutions:{
      y_2:'(a_1*x_1 + b_1)*c_1',
      x_1:'(y_2/c_1 - b_1)/a_1',
      a_1:'(y_2/c_1 - b_1)/x_1',
      b_1:'y_2/c_1 - a_1*x_1',
      c_1:'y_2/(a_1*x_1 + b_1)'
    },
    constraints:{ nonZero:['a_1','x_1','c_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_k1_por_x1_mas_ell2_menos_m1_por_x1_menos_n2_igual_p2',
    nivel:4, categoria:'matematicas',
    display:'k₁(x₁ + ℓ₂) - m₁(x₁ - n₂) = p₂', tex:'k_{1}(x_{1}+\\ell_{2})-m_{1}(x_{1}-n_{2})=p_{2}',
    vars:['k_1','x_1','ell_2','m_1','n_2','p_2'],
    solutions:{
      x_1:'(p_2 - k_1*ell_2 - m_1*n_2)/(k_1 - m_1)',
      k_1:'(p_2 + m_1*(x_1 - n_2))/(x_1 + ell_2)',
      m_1:'(k_1*(x_1 + ell_2) - p_2)/(x_1 - n_2)',
      ell_2:'(p_2 + m_1*(x_1 - n_2))/k_1 - x_1',
      n_2:'x_1 - (k_1*(x_1 + ell_2) - p_2)/m_1',
      p_2:'k_1*(x_1 + ell_2) - m_1*(x_1 - n_2)'
    },
    constraints:{ nonZero:['k_1','m_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_1_mas_eta1_por_x1_mas_zeta1_por_x1_menos_xi1_igual_chi1',
    nivel:4, categoria:'matematicas',
    display:'(1 + η₁)x₁ + ζ₁(x₁ - ξ₁) = χ₁', tex:'(1+\\eta_{1})x_{1}+\\zeta_{1}(x_{1}-\\xi_{1})=\\chi_{1}',
    vars:['eta_1','zeta_1','x_1','xi_1','chi_1'],
    solutions:{
      x_1:'(chi_1 + zeta_1*xi_1)/(1 + eta_1 + zeta_1)',
      eta_1:'(chi_1 + zeta_1*xi_1)/x_1 - 1 - zeta_1',
      zeta_1:'(chi_1 - (1 + eta_1)*x_1)/(x_1 - xi_1)',
      xi_1:'((1 + eta_1 + zeta_1)*x_1 - chi_1)/zeta_1',
      chi_1:'(1 + eta_1 + zeta_1)*x_1 - zeta_1*xi_1'
    },
    constraints:{ nonZero:['x_1','zeta_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_lambda1_menos_mu1_x1_por_t1_igual_s1',
    nivel:4, categoria:'matematicas',
    display:'(λ₁ - μ₁ x₁) t₁ = s₁', tex:'(\\lambda_{1}-\\mu_{1}x_{1})\,t_{1}=s_{1}',
    vars:['lambda_1','mu_1','x_1','t_1','s_1'],
    solutions:{
      x_1:'(lambda_1*t_1 - s_1)/(mu_1*t_1)',
      lambda_1:'(s_1 + mu_1*x_1*t_1)/t_1',
      mu_1:'(lambda_1*t_1 - s_1)/(x_1*t_1)',
      t_1:'s_1/(lambda_1 - mu_1*x_1)',
      s_1:'(lambda_1 - mu_1*x_1)*t_1'
    },
    constraints:{ nonZero:['mu_1','x_1','t_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_A2_menos_B1_por_1_menos_C1x1_igual_D2',
    nivel:4, categoria:'matematicas',
    display:'A₂ - B₁(1 - C₁ x₁) = D₂', tex:'A_{2}-B_{1}(1-C_{1}x_{1})=D_{2}',
    vars:['A_2','B_1','C_1','x_1','D_2'],
    solutions:{
      x_1:'(D_2 - A_2 + B_1)/(B_1*C_1)',
      A_2:'D_2 + B_1 - B_1*C_1*x_1',
      B_1:'(D_2 - A_2)/(C_1*x_1 - 1)',
      C_1:'(D_2 - A_2 + B_1)/(B_1*x_1)',
      D_2:'A_2 - B_1 + B_1*C_1*x_1'
    },
    constraints:{ nonZero:['B_1','x_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_b1_por_x1_mas_a2_igual_c1_por_x1_menos_d2',
    nivel:4, categoria:'matematicas',
    display:'b₁(x₁ + a₂) = c₁(x₁ - d₂)', tex:'b_{1}(x_{1}+a_{2})=c_{1}(x_{1}-d_{2})',
    vars:['b_1','x_1','a_2','c_1','d_2'],
    solutions:{
      x_1:'(b_1*a_2 + c_1*d_2)/(b_1 - c_1)',
      b_1:'c_1*(x_1 - d_2)/(x_1 + a_2)',
      a_2:'(c_1*(x_1 - d_2))/b_1 - x_1',
      c_1:'b_1*(x_1 + a_2)/(x_1 - d_2)',
      d_2:'x_1 - b_1*(x_1 + a_2)/c_1'
    },
    constraints:{ nonZero:['b_1','c_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_t1_por_lambda1_menos_mu1x1_igual_s1_por_1_mas_nu1x1',
    nivel:4, categoria:'matematicas',
    display:'t₁(λ₁ - μ₁x₁) = s₁(1 + ν₁x₁)', tex:'t_{1}(\\lambda_{1}-\\mu_{1}x_{1})=s_{1}(1+\\nu_{1}x_{1})',
    vars:['t_1','lambda_1','mu_1','x_1','s_1','nu_1'],
    solutions:{
      x_1:'(t_1*lambda_1 - s_1)/(t_1*mu_1 + s_1*nu_1)',
      lambda_1:'(s_1*(1 + nu_1*x_1) + t_1*mu_1*x_1)/t_1',
      mu_1:'(t_1*lambda_1 - s_1*(1 + nu_1*x_1))/(t_1*x_1)',
      t_1:'s_1*(1 + nu_1*x_1)/(lambda_1 - mu_1*x_1)',
      s_1:'t_1*(lambda_1 - mu_1*x_1)/(1 + nu_1*x_1)',
      nu_1:'(t_1*lambda_1 - s_1 - t_1*mu_1*x_1)/(s_1*x_1)'
    },
    constraints:{ nonZero:['x_1','t_1','s_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_y1_igual_c1_por_a1_por_x1_mas_b2_menos_d1',
    nivel:4, categoria:'matematicas',
    display:'y₁ = c₁[ a₁(x₁ + b₂) - d₁ ]', tex:'y_{1}=c_{1}[a_{1}(x_{1}+b_{2})-d_{1}]',
    vars:['y_1','c_1','a_1','x_1','b_2','d_1'],
    solutions:{
      x_1:'(y_1/c_1 - a_1*b_2 + d_1)/a_1',
      a_1:'(y_1/c_1 + d_1)/(x_1 + b_2)',
      b_2:'(y_1/c_1 + d_1)/a_1 - x_1',
      c_1:'y_1/(a_1*(x_1 + b_2) - d_1)',
      d_1:'a_1*(x_1 + b_2) - y_1/c_1',
      y_1:'c_1*(a_1*(x_1 + b_2) - d_1)'
    },
    constraints:{ nonZero:['a_1','c_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_v1_por_x1_menos_u1_mas_w1_por_x1_mas_z1_igual_y1',
    nivel:4, categoria:'matematicas',
    display:'v₁(x₁ - u₁) + w₁(x₁ + z₁) = y₁', tex:'v_{1}(x_{1}-u_{1})+w_{1}(x_{1}+z_{1})=y_{1}',
    vars:['v_1','x_1','u_1','w_1','z_1','y_1'],
    solutions:{
      x_1:'(y_1 + v_1*u_1 - w_1*z_1)/(v_1 + w_1)',
      v_1:'(y_1 - w_1*(x_1 + z_1))/(x_1 - u_1)',
      w_1:'(y_1 - v_1*(x_1 - u_1))/(x_1 + z_1)',
      u_1:'x_1 - (y_1 - w_1*(x_1 + z_1))/v_1',
      z_1:'(y_1 - v_1*(x_1 - u_1))/w_1 - x_1',
      y_1:'v_1*(x_1 - u_1) + w_1*(x_1 + z_1)'
    },
    constraints:{ nonZero:['v_1','w_1'] },
    tags:['distributiva']
  },
  {
    id:'l4_sub_1_mas_a1x1_por_b1_menos_c1x1_igual_d1',
    nivel:4, categoria:'matematicas',
    display:'(1 + a₁ x₁)(b₁ - c₁ x₁) = d₁', tex:'(1+a_{1}x_{1})(b_{1}-c_{1}x_{1})=d_{1}',
    vars:['a_1','x_1','b_1','c_1','d_1'],
    solutions:{
      x_1:'(a_1*b_1 - c_1 - sqrt((c_1 - a_1*b_1)^2 - 4*a_1*c_1*(d_1 - b_1)))/(2*a_1*c_1)',
      a_1:'(d_1/(b_1 - c_1*x_1) - 1)/x_1',
      b_1:'d_1/(1 + a_1*x_1) + c_1*x_1',
      c_1:'(b_1 - d_1/(1 + a_1*x_1))/x_1',
      d_1:'(1 + a_1*x_1)*(b_1 - c_1*x_1)'
    },
    constraints:{ nonZero:['a_1','c_1','x_1'] },
    tags:['distributiva','cuadratica']
  },

  // =======================
  // NIVEL 4 — 20 CON LETRAS GRIEGAS
  // =======================
  {
    id:'l4_gk_alpha_por_beta_mas_x_igual_gamma',
    nivel:4, categoria:'matematicas',
    display:'α(β + x) = γ', tex:'\\alpha(\\beta+x)=\\gamma',
    vars:['alpha','beta','x','gamma'],
    solutions:{
      x:'gamma/alpha - beta',
      alpha:'gamma/(beta + x)',
      beta:'gamma/alpha - x',
      gamma:'alpha*(beta + x)'
    },
    constraints:{ nonZero:['alpha'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_kappa_por_2x_menos_mu_igual_pi',
    nivel:4, categoria:'matematicas',
    display:'κ(2x - μ) = π', tex:'\\kappa(2x-\\mu)=\\pi',
    vars:['kappa','x','mu','pi'],
    solutions:{
      x:'(pi/kappa + mu)/2',
      kappa:'pi/(2*x - mu)',
      mu:'2*x - pi/kappa',
      pi:'kappa*(2*x - mu)'
    },
    constraints:{ nonZero:['kappa'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_x_mas_eta_por_rho_igual_sigma',
    nivel:4, categoria:'matematicas',
    display:'(x + η) ρ = σ', tex:'(x+\\eta)\\,\\rho=\\sigma',
    vars:['x','eta','rho','sigma'],
    solutions:{
      x:'sigma/rho - eta',
      rho:'sigma/(x + eta)',
      eta:'sigma/rho - x',
      sigma:'rho*(x + eta)'
    },
    constraints:{ nonZero:['rho'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_alpha_x_mas_beta_por_gamma_igual_delta',
    nivel:4, categoria:'matematicas',
    display:'(α x + β) γ = δ', tex:'(\\alpha x+\\beta)\\,\\gamma=\\delta',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(delta/gamma - beta)/alpha',
      alpha:'(delta/gamma - beta)/x',
      beta:'delta/gamma - alpha*x',
      gamma:'delta/(alpha*x + beta)',
      delta:'gamma*(alpha*x + beta)'
    },
    constraints:{ nonZero:['alpha','x','gamma'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_Phi_por_1_menos_psi_x_igual_Omega',
    nivel:4, categoria:'matematicas',
    display:'Φ(1 - ψ x) = Ω', tex:'\\Phi(1-\\psi x)=\\Omega',
    vars:['Phi','psi','x','Omega'],
    solutions:{
      x:'(Phi - Omega)/(Phi*psi)',
      Phi:'Omega/(1 - psi*x)',
      psi:'(Phi - Omega)/(Phi*x)',
      Omega:'Phi*(1 - psi*x)'
    },
    constraints:{ nonZero:['Phi','psi','x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_y_igual_lambda_por_x_menos_mu_mas_nu',
    nivel:4, categoria:'matematicas',
    display:'y = λ(x - μ) + ν', tex:'y=\\lambda(x-\\mu)+\\nu',
    vars:['y','lambda','x','mu','nu'],
    solutions:{
      y:'lambda*(x - mu)+nu',
      x:'(y - nu)/lambda + mu',
      lambda:'(y - nu)/(x - mu)',
      mu:'x - (y - nu)/lambda',
      nu:'y - lambda*(x - mu)'
    },
    constraints:{ nonZero:['lambda'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_theta_por_x_mas_phi_igual_psi_mas_omega_x',
    nivel:4, categoria:'matematicas',
    display:'θ(x + φ) = ψ + ω x', tex:'\\theta(x+\\phi)=\\psi+\\omega x',
    vars:['theta','x','phi','psi','omega'],
    solutions:{
      x:'(psi - theta*phi)/(theta - omega)',
      theta:'(psi + omega*x)/(x + phi)',
      omega:'(theta*(x + phi) - psi)/x',
      phi:'(psi + (omega - theta)*x)/theta',
      psi:'theta*(x + phi) - omega*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_gamma_por_x_menos_delta_igual_beta_x_mas_alpha',
    nivel:4, categoria:'matematicas',
    display:'γ(x - δ) = β x + α', tex:'\\gamma(x-\\delta)=\\beta x + \\alpha',
    vars:['gamma','x','delta','beta','alpha'],
    solutions:{
      x:'(gamma*delta + alpha)/(gamma - beta)',
      gamma:'(beta*x + alpha)/(x - delta)',
      beta:'(gamma*(x - delta) - alpha)/x',
      delta:'x - (beta*x + alpha)/gamma',
      alpha:'gamma*(x - delta) - beta*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_rho_por_1_mas_sigma_x_igual_tau',
    nivel:4, categoria:'matematicas',
    display:'ρ(1 + σ x) = τ', tex:'\\rho(1+\\sigma x)=\\tau',
    vars:['rho','sigma','x','tau'],
    solutions:{
      x:'(tau/rho - 1)/sigma',
      rho:'tau/(1 + sigma*x)',
      sigma:'(tau/rho - 1)/x',
      tau:'rho*(1 + sigma*x)'
    },
    constraints:{ nonZero:['rho','sigma','x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_pi_por_x_mas_kappa_menos_lambda_por_x_menos_mu_igual_nu',
    nivel:4, categoria:'matematicas',
    display:'π(x + κ) - λ(x - μ) = ν', tex:'\\pi(x+\\kappa)-\\lambda(x-\\mu)=\\nu',
    vars:['pi','x','kappa','lambda','mu','nu'],
    solutions:{
      x:'(nu - pi*kappa - lambda*mu)/(pi - lambda)',
      pi:'(nu + lambda*(x - mu))/(x + kappa)',
      lambda:'(pi*(x + kappa) - nu)/(x - mu)',
      kappa:'(lambda*(x - mu) + nu)/pi - x',
      mu:'x - (pi*(x + kappa) - nu)/lambda',
      nu:'pi*(x + kappa) - lambda*(x - mu)'
    },
    constraints:{ nonZero:['x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_lambda_menos_mu_x_por_tau_igual_sigma',
    nivel:4, categoria:'matematicas',
    display:'(λ - μ x) τ = σ', tex:'(\\lambda-\\mu x)\\,\\tau=\\sigma',
    vars:['lambda','mu','x','tau','sigma'],
    solutions:{
      x:'(lambda*tau - sigma)/(mu*tau)',
      lambda:'(sigma + mu*x*tau)/tau',
      mu:'(lambda*tau - sigma)/(x*tau)',
      tau:'sigma/(lambda - mu*x)',
      sigma:'(lambda - mu*x)*tau'
    },
    constraints:{ nonZero:['mu','x','tau'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_alpha_por_x_mas_beta_igual_gamma_mas_delta_x',
    nivel:4, categoria:'matematicas',
    display:'α(x + β) = γ + δ x', tex:'\\alpha(x+\\beta)=\\gamma+\\delta x',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(gamma - alpha*beta)/(alpha - delta)',
      alpha:'(gamma + delta*x)/(x + beta)',
      delta:'(alpha*(x + beta) - gamma)/x',
      beta:'(gamma + delta*x)/alpha - x',
      gamma:'alpha*(x + beta) - delta*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_phi_menos_psi_x_igual_theta_por_1_menos_omega_x',
    nivel:4, categoria:'matematicas',
    display:'φ - ψx = θ(1 - ωx)', tex:'\\phi-\\psi x=\\theta(1-\\omega x)',
    vars:['phi','psi','x','theta','omega'],
    solutions:{
      x:'(phi - theta)/(psi - theta*omega)',
      psi:'(phi - theta)/x + theta*omega',
      theta:'(phi - psi*x)/(1 - omega*x)',
      omega:'(theta - phi + psi*x)/(theta*x)',
      phi:'theta*(1 - omega*x) + psi*x'
    },
    constraints:{ nonZero:['x','theta'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_alpha_mas_beta_x_por_epsilon_igual_zeta',
    nivel:4, categoria:'matematicas',
    display:'(α + β x) ε = ζ', tex:'(\\alpha+\\beta x)\\,\\varepsilon=\\zeta',
    vars:['alpha','beta','x','epsilon','zeta'],
    solutions:{
      x:'(zeta/epsilon - alpha)/beta',
      alpha:'zeta/epsilon - beta*x',
      beta:'(zeta/epsilon - alpha)/x',
      epsilon:'zeta/(alpha + beta*x)',
      zeta:'epsilon*(alpha + beta*x)'
    },
    constraints:{ nonZero:['beta','x','epsilon'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_nu_igual_alpha_por_x_mas_beta_mas_gamma_por_x_menos_delta',
    nivel:4, categoria:'matematicas',
    display:'ν = α(x + β) + γ(x - δ)', tex:'\\nu=\\alpha(x+\\beta)+\\gamma(x-\\delta)',
    vars:['nu','alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(nu - alpha*beta + gamma*delta)/(alpha + gamma)',
      alpha:'(nu - gamma*(x - delta))/(x + beta)',
      beta:'(nu - gamma*(x - delta))/alpha - x',
      gamma:'(nu - alpha*(x + beta))/(x - delta)',
      delta:'x - (nu - alpha*(x + beta))/gamma',
      nu:'(alpha + gamma)*x + (alpha*beta - gamma*delta)'
    },
    constraints:{ nonZero:['alpha','gamma'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_xi_por_x_menos_eta_mas_zeta_por_x_mas_theta_igual_chi',
    nivel:4, categoria:'matematicas',
    display:'ξ(x - η) + ζ(x + θ) = χ', tex:'\\xi(x-\\eta)+\\zeta(x+\\theta)=\\chi',
    vars:['xi','x','eta','zeta','theta','chi'],
    solutions:{
      x:'(chi + xi*eta - zeta*theta)/(xi + zeta)',
      xi:'(chi - zeta*(x + theta))/(x - eta)',
      zeta:'(chi - xi*(x - eta))/(x + theta)',
      eta:'x - (chi - zeta*(x + theta))/xi',
      theta:'(chi - xi*(x - eta))/zeta - x',
      chi:'xi*(x - eta) + zeta*(x + theta)'
    },
    constraints:{ nonZero:['xi','zeta'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_1_mas_alpha_x_por_beta_menos_gamma_x_igual_delta',
    nivel:4, categoria:'matematicas',
    display:'(1 + α x)(β - γ x) = δ', tex:'(1+\\alpha x)(\\beta-\\gamma x)=\\delta',
    vars:['alpha','x','beta','gamma','delta'],
    solutions:{
      x:'(alpha*beta - gamma - sqrt((gamma - alpha*beta)^2 - 4*alpha*gamma*(delta - beta)])/(2*alpha*gamma)',
      alpha:'(delta/(beta - gamma*x) - 1)/x',
      beta:'delta/(1 + alpha*x) + gamma*x',
      gamma:'(beta - delta/(1 + alpha*x))/x',
      delta:'(1 + alpha*x)*(beta - gamma*x)'
    },
    constraints:{ nonZero:['alpha','gamma','x'] },
    tags:['distributiva','cuadratica']
  },
  {
    id:'l4_gk_rho_por_x_mas_sigma_igual_tau_por_x_mas_upsilon',
    nivel:4, categoria:'matematicas',
    display:'ρ(x + σ) = τ x + υ', tex:'\\rho(x+\\sigma)=\\tau x+\\upsilon',
    vars:['rho','x','sigma','tau','upsilon'],
    solutions:{
      x:'(rho*sigma - upsilon)/(tau - rho)',
      rho:'(tau*x + upsilon)/(x + sigma)',
      tau:'(rho*(x + sigma) - upsilon)/x',
      sigma:'(tau*x + upsilon)/rho - x',
      upsilon:'rho*(x + sigma) - tau*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_beta_por_x_mas_gamma_menos_delta_por_x_menos_epsilon_igual_alpha',
    nivel:4, categoria:'matematicas',
    display:'β(x + γ) - δ(x - ε) = α', tex:'\\beta(x+\\gamma)-\\delta(x-\\varepsilon)=\\alpha',
    vars:['beta','x','gamma','delta','epsilon','alpha'],
    solutions:{
      x:'(alpha - beta*gamma + delta*epsilon)/(beta - delta)',
      beta:'(alpha + delta*(x - epsilon))/(x + gamma)',
      delta:'(beta*(x + gamma) - alpha)/(x - epsilon)',
      gamma:'(alpha + delta*(x - epsilon))/beta - x',
      epsilon:'x - (beta*(x + gamma) - alpha)/delta',
      alpha:'beta*(x + gamma) - delta*(x - epsilon)'
    },
    constraints:{ nonZero:['beta','delta'] },
    tags:['distributiva']
  },
  {
    id:'l4_gk_sigma_por_x_mas_beta_igual_y_por_1_mas_alpha_x',
    nivel:4, categoria:'matematicas',
    display:'σ x + β = y(1 + α x)', tex:'\\sigma x+\\beta=y(1+\\alpha x)',
    vars:['sigma','x','beta','y','alpha'],
    solutions:{
      x:'(y - beta)/(sigma - y*alpha)',
      sigma:'(y - beta)/x + y*alpha',
      alpha:'(sigma*x + beta - y)/(y*x)',
      y:'(sigma*x + beta)/(1 + alpha*x)',
      beta:'y*(1 + alpha*x) - sigma*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['distributiva']
  },
  {
    id:'l5_x_sobre_a_igual_b',
    nivel:5, categoria:'matematicas',
    display:'x/a = b', tex:'\\dfrac{x}{a}=b',
    vars:['x','a','b'],
    solutions:{
      x:'a*b',
      a:'x/b',
      b:'x/a'
    },
    constraints:{ nonZero:['a','b'] },
    tags:['fracciones']
  },
  {
    id:'l5_a_sobre_x_igual_b',
    nivel:5, categoria:'matematicas',
    display:'a/x = b', tex:'\\dfrac{a}{x}=b',
    vars:['a','x','b'],
    solutions:{
      x:'a/b',
      a:'b*x',
      b:'a/x'
    },
    constraints:{ nonZero:['x','b'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_mas_h_sobre_k_igual_m',
    nivel:5, categoria:'matematicas',
    display:'(x + h)/k = m', tex:'\\dfrac{x+h}{k}=m',
    vars:['x','h','k','m'],
    solutions:{
      x:'k*m - h',
      h:'k*m - x',
      k:'(x + h)/m',
      m:'(x + h)/k'
    },
    constraints:{ nonZero:['k','m'] },
    tags:['fracciones']
  },
  {
    id:'l5_k_sobre_x_menos_ell_igual_m',
    nivel:5, categoria:'matematicas',
    display:'k/(x - ℓ) = m', tex:'\\dfrac{k}{x-\\ell}=m',
    vars:['k','x','ell','m'],
    solutions:{
      x:'k/m + ell',
      k:'m*(x - ell)',
      ell:'x - k/m',
      m:'k/(x - ell)'
    },
    constraints:{ nonZero:['m'] },
    tags:['fracciones','nota:x≠ℓ']
  },
  {
    id:'l5_ax_mas_b_sobre_cx_mas_d_igual_y',
    nivel:5, categoria:'matematicas',
    display:'(a x + b)/(c x + d) = y', tex:'\\dfrac{ax+b}{cx+d}=y',
    vars:['a','b','c','d','x','y'],
    solutions:{
      x:'(b - y*d)/(y*c - a)',
      a:'(y*(c*x + d) - b)/x',
      b:'y*(c*x + d) - a*x',
      c:'(a*x + b - y*d)/(y*x)',
      d:'(a*x + b - y*c*x)/y',
      y:'(a*x + b)/(c*x + d)'
    },
    constraints:{ nonZero:['x','y'] },
    tags:['fracciones','proporciones','nota:cx+d≠0']
  },
  {
    id:'l5_I_igual_V_sobre_R_mas_r_x',
    nivel:5, categoria:'electricidad',
    display:'I = V/(R + r x)', tex:'I=\\dfrac{V}{R+rx}',
    vars:['I','V','R','r','x'],
    solutions:{
      x:'(V/I - R)/r',
      I:'V/(R + r*x)',
      V:'I*(R + r*x)',
      R:'V/I - r*x',
      r:'(V/I - R)/x'
    },
    constraints:{ nonZero:['I','r','x'] },
    tags:['fracciones','circuitos','nota:R+rx≠0']
  },
  {
    id:'l5_v_igual_d_sobre_t_mas_x',
    nivel:5, categoria:'fisica',
    display:'v = d/(t + x)', tex:'v=\\dfrac{d}{t+x}',
    vars:['v','d','t','x'],
    solutions:{
      x:'d/v - t',
      v:'d/(t + x)',
      d:'v*(t + x)',
      t:'d/v - x'
    },
    constraints:{ nonZero:['v'] },
    tags:['fracciones']
  },
  {
    id:'l5_P_igual_W_sobre_t_menos_x',
    nivel:5, categoria:'fisica',
    display:'P = W/(t - x)', tex:'P=\\dfrac{W}{t-x}',
    vars:['P','W','t','x'],
    solutions:{
      x:'t - W/P',
      P:'W/(t - x)',
      W:'P*(t - x)',
      t:'x + W/P'
    },
    constraints:{ nonZero:['P'] },
    tags:['fracciones','nota:t≠x']
  },
  {
    id:'l5_y_igual_1_sobre_a_mas_bx',
    nivel:5, categoria:'matematicas',
    display:'y = 1/(a + b x)', tex:'y=\\dfrac{1}{a+bx}',
    vars:['y','a','b','x'],
    solutions:{
      x:'(1/y - a)/b',
      y:'1/(a + b*x)',
      a:'1/y - b*x',
      b:'(1/y - a)/x'
    },
    constraints:{ nonZero:['y','b','x'] },
    tags:['fracciones','nota:a+bx≠0']
  },
  {
    id:'l5_k_igual_x_sobre_x_mas_ell',
    nivel:5, categoria:'matematicas',
    display:'k = x/(x + ℓ)', tex:'k=\\dfrac{x}{x+\\ell}',
    vars:['k','x','ell'],
    solutions:{
      x:'(k*ell)/(1 - k)',
      k:'x/(x + ell)',
      ell:'x*(1 - k)/k'
    },
    constraints:{ nonZero:['k'] },
    tags:['fracciones','nota:k≠1']
  },
  {
    id:'l5_Req_igual_R1R2_sobre_R1_mas_R2_mas_x',
    nivel:5, categoria:'electricidad',
    display:'R_eq = (R₁ R₂)/(R₁ + R₂ + x)', tex:'R_{eq}=\\dfrac{R_{1}R_{2}}{R_{1}+R_{2}+x}',
    vars:['R_eq','R1','R2','x'],
    solutions:{
      x:'R1*R2/R_eq - (R1 + R2)',
      R_eq:'(R1*R2)/(R1 + R2 + x)',
      R1:'R_eq*(R2 + x)/(R2 - R_eq)',
      R2:'R_eq*(R1 + x)/(R1 - R_eq)'
    },
    constraints:{ nonZero:['R_eq'] },
    tags:['fracciones','circuitos','nota:R1≠R_eq, R2≠R_eq']
  },
  {
    id:'l5_A_sobre_x_mas_B_sobre_C_igual_D',
    nivel:5, categoria:'matematicas',
    display:'A/x + B/C = D', tex:'\\dfrac{A}{x}+\\dfrac{B}{C}=D',
    vars:['A','x','B','C','D'],
    solutions:{
      x:'A/(D - B/C)',
      A:'x*(D - B/C)',
      B:'C*(D - A/x)',
      C:'B/(D - A/x)',
      D:'A/x + B/C'
    },
    constraints:{ nonZero:['x','C'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_menos_alpha_sobre_beta_menos_gamma_x_igual_delta',
    nivel:5, categoria:'matematicas',
    display:'(x - α)/(β - γ x) = δ', tex:'\\dfrac{x-\\alpha}{\\beta-\\gamma x}=\\delta',
    vars:['x','alpha','beta','gamma','delta'],
    solutions:{
      x:'(delta*beta + alpha)/(1 + delta*gamma)',
      alpha:'x - delta*(beta - gamma*x)',
      beta:'(x - alpha)/delta + gamma*x',
      gamma:'(beta*delta - (x - alpha))/(delta*x)',
      delta:'(x - alpha)/(beta - gamma*x)'
    },
    constraints:{ nonZero:['delta','x'] },
    tags:['fracciones','proporciones','nota:beta-γx≠0']
  },
  {
    id:'l5_k_sobre_x_menos_l_sobre_m_igual_n',
    nivel:5, categoria:'matematicas',
    display:'k/x - ℓ/m = n', tex:'\\dfrac{k}{x}-\\dfrac{\\ell}{m}=n',
    vars:['k','x','ell','m','n'],
    solutions:{
      x:'k/(n + ell/m)',
      k:'x*(n + ell/m)',
      ell:'m*(k/x - n)',
      m:'ell/(k/x - n)',
      n:'k/x - ell/m'
    },
    constraints:{ nonZero:['x','m'] },
    tags:['fracciones']
  },
  {
    id:'l5_p_igual_rho_g_h_sobre_1_mas_lambda_x',
    nivel:5, categoria:'fisica',
    display:'p = (ρ g h)/(1 + λ x)', tex:'p=\\dfrac{\\rho g h}{1+\\lambda x}',
    vars:['p','rho','g','h','lambda','x'],
    solutions:{
      x:'(rho*g*h/p - 1)/lambda',
      p:'rho*g*h/(1 + lambda*x)',
      rho:'p*(1 + lambda*x)/(g*h)',
      g:'p*(1 + lambda*x)/(rho*h)',
      h:'p*(1 + lambda*x)/(rho*g)',
      lambda:'(rho*g*h/p - 1)/x'
    },
    constraints:{ nonZero:['p','rho','g','h','lambda','x'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_sobre_a_mas_x_sobre_b_igual_c',
    nivel:5, categoria:'matematicas',
    display:'x/a + x/b = c', tex:'\\dfrac{x}{a}+\\dfrac{x}{b}=c',
    vars:['x','a','b','c'],
    solutions:{
      x:'c*a*b/(a + b)',
      a:'(b*x)/(c*b - x)',
      b:'(a*x)/(c*a - x)',
      c:'x/a + x/b'
    },
    constraints:{ nonZero:['a','b'] },
    tags:['fracciones','suma']
  },
  {
    id:'l5_1_sobre_x_mas_1_sobre_x_mas_eta_igual_kappa',
    nivel:5, categoria:'matematicas',
    display:'1/x + 1/(x + η) = κ', tex:'\\dfrac{1}{x}+\\dfrac{1}{x+\\eta}=\\kappa',
    vars:['x','eta','kappa'],
    solutions:{
      x:'(2 - kappa*eta + sqrt(kappa^2*eta^2 + 4))/(2*kappa)',
      eta:'(kappa*x^2 - 2*x)/(1 - kappa*x)',
      kappa:'(2*x + eta)/(x*(x + eta))'
    },
    constraints:{ nonZero:['x','kappa'] },
    tags:['fracciones','cuadratica','nota:x+η≠0']
  },
  {
    id:'l5_phi_x_mas_psi_sobre_chi_x_mas_omega_igual_zeta',
    nivel:5, categoria:'matematicas',
    display:'(φ x + ψ)/(χ x + ω) = ζ', tex:'\\dfrac{\\phi x+\\psi}{\\chi x+\\omega}=\\zeta',
    vars:['phi','psi','chi','omega','x','zeta'],
    solutions:{
      x:'(zeta*omega - psi)/(phi - zeta*chi)',
      phi:'(zeta*chi*x + zeta*omega - psi)/x',
      psi:'zeta*(chi*x + omega) - phi*x',
      chi:'(phi*x + psi - zeta*omega)/(zeta*x)',
      omega:'(phi*x + psi)/zeta - chi*x',
      zeta:'(phi*x + psi)/(chi*x + omega)'
    },
    constraints:{ nonZero:['x','zeta'] },
    tags:['fracciones','proporciones','nota:χx+ω≠0']
  },
  {
    id:'l5_y_igual_k_sobre_raiz_x',
    nivel:5, categoria:'matematicas',
    display:'y = k/√x', tex:'y=\\dfrac{k}{\\sqrt{x}}',
    vars:['y','k','x'],
    solutions:{
      x:'(k/y)^2',
      y:'k/sqrt(x)',
      k:'y*sqrt(x)'
    },
    constraints:{ nonZero:['y'] },
    tags:['fracciones','radical','nota:x>0']
  },
  {
    id:'l5_1_sobre_a_menos_bx_igual_c',
    nivel:5, categoria:'matematicas',
    display:'1/(a - b x) = c', tex:'\\dfrac{1}{a-bx}=c',
    vars:['a','b','x','c'],
    solutions:{
      x:'(a - 1/c)/b',
      a:'1/c + b*x',
      b:'(a - 1/c)/x',
      c:'1/(a - b*x)'
    },
    constraints:{ nonZero:['b','x','c'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_menos_a_sobre_b_igual_c',
    nivel:5, categoria:'matematicas',
    display:'(x - a)/b = c', tex:'\\dfrac{x-a}{b}=c',
    vars:['x','a','b','c'],
    solutions:{
      x:'b*c + a',
      a:'x - b*c',
      b:'(x - a)/c',
      c:'(x - a)/b'
    },
    constraints:{ nonZero:['b','c'] },
    tags:['fracciones']
  },
  {
    id:'l5_a_sobre_x_mas_b_igual_c',
    nivel:5, categoria:'matematicas',
    display:'a/(x + b) = c', tex:'\\dfrac{a}{x+b}=c',
    vars:['a','x','b','c'],
    solutions:{
      x:'a/c - b',
      a:'c*(x + b)',
      b:'a/c - x',
      c:'a/(x + b)'
    },
    constraints:{ nonZero:['c'] },
    tags:['fracciones','nota:x≠-b']
  },
  {
    id:'l5_px_mas_q_sobre_r_igual_s',
    nivel:5, categoria:'matematicas',
    display:'(p x + q)/r = s', tex:'\\dfrac{px+q}{r}=s',
    vars:['p','x','q','r','s'],
    solutions:{
      x:'(r*s - q)/p',
      p:'(r*s - q)/x',
      q:'r*s - p*x',
      r:'(p*x + q)/s',
      s:'(p*x + q)/r'
    },
    constraints:{ nonZero:['p','r','s','x'] },
    tags:['fracciones']
  },
  {
    id:'l5_k_sobre_x_mas_u_igual_m',
    nivel:5, categoria:'matematicas',
    display:'k/(x + u) = m', tex:'\\dfrac{k}{x+u}=m',
    vars:['k','x','u','m'],
    solutions:{
      x:'k/m - u',
      k:'m*(x + u)',
      u:'k/m - x',
      m:'k/(x + u)'
    },
    constraints:{ nonZero:['m'] },
    tags:['fracciones']
  },
  {
    id:'l5_y_igual_c_sobre_a_menos_bx',
    nivel:5, categoria:'matematicas',
    display:'y = c/(a - b x)', tex:'y=\\dfrac{c}{a-bx}',
    vars:['y','c','a','b','x'],
    solutions:{
      x:'(a - c/y)/b',
      y:'c/(a - b*x)',
      c:'y*(a - b*x)',
      a:'c/y + b*x',
      b:'(a - c/y)/x'
    },
    constraints:{ nonZero:['y','b','x'] },
    tags:['fracciones']
  },
  {
    id:'l5_y_igual_k_sobre_x_mas_h',
    nivel:5, categoria:'matematicas',
    display:'y = k/(x + h)', tex:'y=\\dfrac{k}{x+h}',
    vars:['y','k','x','h'],
    solutions:{
      x:'k/y - h',
      y:'k/(x + h)',
      k:'y*(x + h)',
      h:'k/y - x'
    },
    constraints:{ nonZero:['y'] },
    tags:['fracciones']
  },
  {
    id:'l5_y_igual_mx_mas_n_sobre_px_mas_q',
    nivel:5, categoria:'matematicas',
    display:'y = (m x + n)/(p x + q)', tex:'y=\\dfrac{mx+n}{px+q}',
    vars:['y','m','n','p','q','x'],
    solutions:{
      x:'(y*q - n)/(m - y*p)',
      m:'(y*(p*x + q) - n)/x',
      n:'y*(p*x + q) - m*x',
      p:'(m*x + n - y*q)/(y*x)',
      q:'(m*x + n - y*p*x)/y',
      y:'(m*x + n)/(p*x + q)'
    },
    constraints:{ nonZero:['x','y'] },
    tags:['fracciones','proporciones']
  },
  {
    id:'l5_k_igual_x_sobre_a_x_mas_b',
    nivel:5, categoria:'matematicas',
    display:'k = x/(a x + b)', tex:'k=\\dfrac{x}{ax+b}',
    vars:['k','x','a','b'],
    solutions:{
      x:'(k*b)/(1 - k*a)',
      a:'(x/k - b)/x',
      b:'x/k - a*x',
      k:'x/(a*x + b)'
    },
    constraints:{ nonZero:['k'] },
    tags:['fracciones','nota:1-ka≠0']
  },
  {
    id:'l5_x_mas_a_sobre_x_mas_b_igual_k',
    nivel:5, categoria:'matematicas',
    display:'(x + a)/(x + b) = k', tex:'\\dfrac{x+a}{x+b}=k',
    vars:['x','a','b','k'],
    solutions:{
      x:'(k*b - a)/(1 - k)',
      a:'k*(x + b) - x',
      b:'(x + a)/k - x',
      k:'(x + a)/(x + b)'
    },
    constraints:{ nonZero:['1-k'] },
    tags:['fracciones']
  },
  {
    id:'l5_A_sobre_x_mas_B_igual_C',
    nivel:5, categoria:'matematicas',
    display:'A/x + B = C', tex:'\\dfrac{A}{x}+B=C',
    vars:['A','x','B','C'],
    solutions:{
      x:'A/(C - B)',
      A:'x*(C - B)',
      B:'C - A/x',
      C:'A/x + B'
    },
    constraints:{ nonZero:['x'] },
    tags:['fracciones']
  },
  {
    id:'l5_p_sobre_qx_igual_r',
    nivel:5, categoria:'matematicas',
    display:'p/(q x) = r', tex:'\\dfrac{p}{q x}=r',
    vars:['p','q','x','r'],
    solutions:{
      x:'p/(q*r)',
      p:'q*r*x',
      q:'p/(r*x)',
      r:'p/(q*x)'
    },
    constraints:{ nonZero:['q','x','r'] },
    tags:['fracciones']
  },
  {
    id:'l5_T_igual_W_sobre_a_menos_bx',
    nivel:5, categoria:'matematicas',
    display:'T = W/(a - b x)', tex:'T=\\dfrac{W}{a-bx}',
    vars:['T','W','a','b','x'],
    solutions:{
      x:'(a - W/T)/b',
      T:'W/(a - b*x)',
      W:'T*(a - b*x)',
      a:'W/T + b*x',
      b:'(a - W/T)/x'
    },
    constraints:{ nonZero:['T','b','x'] },
    tags:['fracciones']
  },
  {
    id:'l5_p_igual_rho_g_sobre_h_mas_x',
    nivel:5, categoria:'fisica',
    display:'p = ρ g/(h + x)', tex:'p=\\dfrac{\\rho g}{h+x}',
    vars:['p','rho','g','h','x'],
    solutions:{
      x:'rho*g/p - h',
      p:'rho*g/(h + x)',
      rho:'p*(h + x)/g',
      g:'p*(h + x)/rho',
      h:'rho*g/p - x'
    },
    constraints:{ nonZero:['p','g'] },
    tags:['fracciones']
  },
  {
    id:'l5_1_sobre_x_mas_A_sobre_C_igual_D',
    nivel:5, categoria:'matematicas',
    display:'1/x + A/C = D', tex:'\\dfrac{1}{x}+\\dfrac{A}{C}=D',
    vars:['x','A','C','D'],
    solutions:{
      x:'1/(D - A/C)',
      A:'C*(D - 1/x)',
      C:'A/(D - 1/x)',
      D:'1/x + A/C'
    },
    constraints:{ nonZero:['x','C'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_sobre_a_menos_b_sobre_c_igual_d',
    nivel:5, categoria:'matematicas',
    display:'x/a - b/c = d', tex:'\\dfrac{x}{a}-\\dfrac{b}{c}=d',
    vars:['x','a','b','c','d'],
    solutions:{
      x:'a*(d + b/c)',
      a:'x/(d + b/c)',
      b:'c*(x/a - d)',
      c:'b/(x/a - d)',
      d:'x/a - b/c'
    },
    constraints:{ nonZero:['a','c'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_sobre_a_mas_b_igual_c',
    nivel:5, categoria:'matematicas',
    display:'x/(a + b) = c', tex:'\\dfrac{x}{a+b}=c',
    vars:['x','a','b','c'],
    solutions:{
      x:'c*(a + b)',
      a:'x/c - b',
      b:'x/c - a',
      c:'x/(a + b)'
    },
    tags:['fracciones']
  },
  {
    id:'l5_a_sobre_b_mas_cx_igual_d',
    nivel:5, categoria:'matematicas',
    display:'a/(b + c x) = d', tex:'\\dfrac{a}{b+cx}=d',
    vars:['a','b','c','x','d'],
    solutions:{
      x:'(a/d - b)/c',
      a:'d*(b + c*x)',
      b:'a/d - c*x',
      c:'(a/d - b)/x',
      d:'a/(b + c*x)'
    },
    constraints:{ nonZero:['c','d','x'] },
    tags:['fracciones']
  },
  {
    id:'l5_x_sobre_k_igual_m_mas_n',
    nivel:5, categoria:'matematicas',
    display:'x/k = m + n', tex:'\\dfrac{x}{k}=m+n',
    vars:['x','k','m','n'],
    solutions:{
      x:'k*(m + n)',
      k:'x/(m + n)',
      m:'x/k - n',
      n:'x/k - m'
    },
    constraints:{ nonZero:['k'] },
    tags:['fracciones']
  },
  {
    id:'l5_k_sobre_x_igual_m_menos_n',
    nivel:5, categoria:'matematicas',
    display:'k/x = m - n', tex:'\\dfrac{k}{x}=m-n',
    vars:['k','x','m','n'],
    solutions:{
      x:'k/(m - n)',
      k:'x*(m - n)',
      m:'k/x + n',
      n:'m - k/x'
    },
    constraints:{ nonZero:['x'] },
    tags:['fracciones']
  },
  {
    id:'l5_sub_x1_sobre_a1_igual_b1',
    nivel:5, categoria:'matematicas',
    display:'x₁/a₁ = b₁', tex:'\\dfrac{x_{1}}{a_{1}}=b_{1}',
    vars:['x_1','a_1','b_1'],
    solutions:{ x_1:'a_1*b_1', a_1:'x_1/b_1', b_1:'x_1/a_1' },
    constraints:{ nonZero:['a_1','b_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_a1_sobre_x1_igual_b1',
    nivel:5, categoria:'matematicas',
    display:'a₁/x₁ = b₁', tex:'\\dfrac{a_{1}}{x_{1}}=b_{1}',
    vars:['a_1','x_1','b_1'],
    solutions:{ x_1:'a_1/b_1', a_1:'b_1*x_1', b_1:'a_1/x_1' },
    constraints:{ nonZero:['x_1','b_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_x1_mas_h2_sobre_k1_igual_m2',
    nivel:5, categoria:'matematicas',
    display:'(x₁ + h₂)/k₁ = m₂', tex:'\\dfrac{x_{1}+h_{2}}{k_{1}}=m_{2}',
    vars:['x_1','h_2','k_1','m_2'],
    solutions:{ x_1:'k_1*m_2 - h_2', h_2:'k_1*m_2 - x_1', k_1:'(x_1 + h_2)/m_2', m_2:'(x_1 + h_2)/k_1' },
    constraints:{ nonZero:['k_1','m_2'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_k2_sobre_x1_menos_l1_igual_m1',
    nivel:5, categoria:'matematicas',
    display:'k₂/(x₁ - ℓ₁) = m₁', tex:'\\dfrac{k_{2}}{x_{1}-\\ell_{1}}=m_{1}',
    vars:['k_2','x_1','l_1','m_1'],
    solutions:{ x_1:'k_2/m_1 + l_1', k_2:'m_1*(x_1 - l_1)', l_1:'x_1 - k_2/m_1', m_1:'k_2/(x_1 - l_1)' },
    constraints:{ nonZero:['m_1'] }, tags:['fracciones','nota:x₁≠ℓ₁']
  },
  {
    id:'l5_sub_a1x1_mas_b1_sobre_c1x1_mas_d1_igual_y1',
    nivel:5, categoria:'matematicas',
    display:'(a₁x₁ + b₁)/(c₁x₁ + d₁) = y₁', tex:'\\dfrac{a_{1}x_{1}+b_{1}}{c_{1}x_{1}+d_{1}}=y_{1}',
    vars:['a_1','b_1','c_1','d_1','x_1','y_1'],
    solutions:{
      x_1:'(b_1 - y_1*d_1)/(y_1*c_1 - a_1)',
      a_1:'(y_1*(c_1*x_1 + d_1) - b_1)/x_1',
      b_1:'y_1*(c_1*x_1 + d_1) - a_1*x_1',
      c_1:'(a_1*x_1 + b_1 - y_1*d_1)/(y_1*x_1)',
      d_1:'(a_1*x_1 + b_1 - y_1*c_1*x_1)/y_1',
      y_1:'(a_1*x_1 + b_1)/(c_1*x_1 + d_1)'
    },
    constraints:{ nonZero:['x_1','y_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_I1_igual_V1_sobre_R1_mas_r1x1',
    nivel:5, categoria:'electricidad',
    display:'I₁ = V₁/(R₁ + r₁ x₁)', tex:'I_{1}=\\dfrac{V_{1}}{R_{1}+r_{1}x_{1}}',
    vars:['I_1','V_1','R_1','r_1','x_1'],
    solutions:{
      x_1:'(V_1/I_1 - R_1)/r_1',
      I_1:'V_1/(R_1 + r_1*x_1)',
      V_1:'I_1*(R_1 + r_1*x_1)',
      R_1:'V_1/I_1 - r_1*x_1',
      r_1:'(V_1/I_1 - R_1)/x_1'
    },
    constraints:{ nonZero:['I_1','r_1','x_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_v1_igual_d1_sobre_t1_mas_x1',
    nivel:5, categoria:'fisica',
    display:'v₁ = d₁/(t₁ + x₁)', tex:'v_{1}=\\dfrac{d_{1}}{t_{1}+x_{1}}',
    vars:['v_1','d_1','t_1','x_1'],
    solutions:{ x_1:'d_1/v_1 - t_1', v_1:'d_1/(t_1 + x_1)', d_1:'v_1*(t_1 + x_1)', t_1:'d_1/v_1 - x_1' },
    constraints:{ nonZero:['v_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_P1_igual_W1_sobre_t1_menos_x1',
    nivel:5, categoria:'fisica',
    display:'P₁ = W₁/(t₁ - x₁)', tex:'P_{1}=\\dfrac{W_{1}}{t_{1}-x_{1}}',
    vars:['P_1','W_1','t_1','x_1'],
    solutions:{ x_1:'t_1 - W_1/P_1', P_1:'W_1/(t_1 - x_1)', W_1:'P_1*(t_1 - x_1)', t_1:'x_1 + W_1/P_1' },
    constraints:{ nonZero:['P_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_y1_igual_1_sobre_a1_mas_b1x1',
    nivel:5, categoria:'matematicas',
    display:'y₁ = 1/(a₁ + b₁ x₁)', tex:'y_{1}=\\dfrac{1}{a_{1}+b_{1}x_{1}}',
    vars:['y_1','a_1','b_1','x_1'],
    solutions:{ x_1:'(1/y_1 - a_1)/b_1', y_1:'1/(a_1 + b_1*x_1)', a_1:'1/y_1 - b_1*x_1', b_1:'(1/y_1 - a_1)/x_1' },
    constraints:{ nonZero:['y_1','b_1','x_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_k1_igual_x1_sobre_x1_mas_l1',
    nivel:5, categoria:'matematicas',
    display:'k₁ = x₁/(x₁ + ℓ₁)', tex:'k_{1}=\\dfrac{x_{1}}{x_{1}+\\ell_{1}}',
    vars:['k_1','x_1','l_1'],
    solutions:{ x_1:'(k_1*l_1)/(1 - k_1)', k_1:'x_1/(x_1 + l_1)', l_1:'x_1*(1 - k_1)/k_1' },
    constraints:{ nonZero:['k_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_Req1_igual_R11R21_sobre_R11_mas_R21_mas_x1',
    nivel:5, categoria:'electricidad',
    display:'R_eq₁ = (R₁₁ R₂₁)/(R₁₁ + R₂₁ + x₁)', tex:'R_{eq1}=\\dfrac{R_{11}R_{21}}{R_{11}+R_{21}+x_{1}}',
    vars:['Req_1','R11','R21','x_1'],
    solutions:{
      x_1:'R11*R21/Req_1 - (R11 + R21)',
      Req_1:'(R11*R21)/(R11 + R21 + x_1)',
      R11:'Req_1*(R21 + x_1)/(R21 - Req_1)',
      R21:'Req_1*(R11 + x_1)/(R11 - Req_1)'
    },
    constraints:{ nonZero:['Req_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_A1_sobre_x1_mas_B1_sobre_C1_igual_D1',
    nivel:5, categoria:'matematicas',
    display:'A₁/x₁ + B₁/C₁ = D₁', tex:'\\dfrac{A_{1}}{x_{1}}+\\dfrac{B_{1}}{C_{1}}=D_{1}',
    vars:['A_1','x_1','B_1','C_1','D_1'],
    solutions:{ x_1:'A_1/(D_1 - B_1/C_1)', A_1:'x_1*(D_1 - B_1/C_1)', B_1:'C_1*(D_1 - A_1/x_1)', C_1:'B_1/(D_1 - A_1/x_1)', D_1:'A_1/x_1 + B_1/C_1' },
    constraints:{ nonZero:['x_1','C_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_x1_menos_alpha1_sobre_beta1_menos_gamma1x1_igual_delta1',
    nivel:5, categoria:'matematicas',
    display:'(x₁ - α₁)/(β₁ - γ₁ x₁) = δ₁', tex:'\\dfrac{x_{1}-\\alpha_{1}}{\\beta_{1}-\\gamma_{1}x_{1}}=\\delta_{1}',
    vars:['x_1','alpha_1','beta_1','gamma_1','delta_1'],
    solutions:{
      x_1:'(delta_1*beta_1 + alpha_1)/(1 + delta_1*gamma_1)',
      alpha_1:'x_1 - delta_1*(beta_1 - gamma_1*x_1)',
      beta_1:'(x_1 - alpha_1)/delta_1 + gamma_1*x_1',
      gamma_1:'(beta_1*delta_1 - (x_1 - alpha_1))/(delta_1*x_1)',
      delta_1:'(x_1 - alpha_1)/(beta_1 - gamma_1*x_1)'
    },
    constraints:{ nonZero:['delta_1','x_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_k1_sobre_x1_menos_l1_sobre_m1_igual_n1',
    nivel:5, categoria:'matematicas',
    display:'k₁/x₁ - ℓ₁/m₁ = n₁', tex:'\\dfrac{k_{1}}{x_{1}}-\\dfrac{\\ell_{1}}{m_{1}}=n_{1}',
    vars:['k_1','x_1','l_1','m_1','n_1'],
    solutions:{ x_1:'k_1/(n_1 + l_1/m_1)', k_1:'x_1*(n_1 + l_1/m_1)', l_1:'m_1*(k_1/x_1 - n_1)', m_1:'l_1/(k_1/x_1 - n_1)', n_1:'k_1/x_1 - l_1/m_1' },
    constraints:{ nonZero:['x_1','m_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_p1_igual_rho1_g1_h1_sobre_1_mas_lambda1x1',
    nivel:5, categoria:'fisica',
    display:'p₁ = (ρ₁ g₁ h₁)/(1 + λ₁ x₁)', tex:'p_{1}=\\dfrac{\\rho_{1} g_{1} h_{1}}{1+\\lambda_{1}x_{1}}',
    vars:['p_1','rho_1','g_1','h_1','lambda_1','x_1'],
    solutions:{
      x_1:'(rho_1*g_1*h_1/p_1 - 1)/lambda_1',
      p_1:'rho_1*g_1*h_1/(1 + lambda_1*x_1)',
      rho_1:'p_1*(1 + lambda_1*x_1)/(g_1*h_1)',
      g_1:'p_1*(1 + lambda_1*x_1)/(rho_1*h_1)',
      h_1:'p_1*(1 + lambda_1*x_1)/(rho_1*g_1)',
      lambda_1:'(rho_1*g_1*h_1/p_1 - 1)/x_1'
    },
    constraints:{ nonZero:['p_1','rho_1','g_1','h_1','lambda_1','x_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_x1_sobre_a1_mas_x1_sobre_b1_igual_c1',
    nivel:5, categoria:'matematicas',
    display:'x₁/a₁ + x₁/b₁ = c₁', tex:'\\dfrac{x_{1}}{a_{1}}+\\dfrac{x_{1}}{b_{1}}=c_{1}',
    vars:['x_1','a_1','b_1','c_1'],
    solutions:{ x_1:'c_1*a_1*b_1/(a_1 + b_1)', a_1:'(b_1*x_1)/(c_1*b_1 - x_1)', b_1:'(a_1*x_1)/(c_1*a_1 - x_1)', c_1:'x_1/a_1 + x_1/b_1' },
    constraints:{ nonZero:['a_1','b_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_1_sobre_x1_mas_1_sobre_x1_mas_eta1_igual_kappa1',
    nivel:5, categoria:'matematicas',
    display:'1/x₁ + 1/(x₁ + η₁) = κ₁', tex:'\\dfrac{1}{x_{1}}+\\dfrac{1}{x_{1}+\\eta_{1}}=\\kappa_{1}',
    vars:['x_1','eta_1','kappa_1'],
    solutions:{ x_1:'(2 - kappa_1*eta_1 + sqrt(kappa_1^2*eta_1^2 + 4))/(2*kappa_1)', eta_1:'(kappa_1*x_1^2 - 2*x_1)/(1 - kappa_1*x_1)', kappa_1:'(2*x_1 + eta_1)/(x_1*(x_1 + eta_1))' },
    constraints:{ nonZero:['x_1','kappa_1'] }, tags:['fracciones','cuadratica']
  },
  {
    id:'l5_sub_phi1x1_mas_psi1_sobre_chi1x1_mas_omega1_igual_zeta1',
    nivel:5, categoria:'matematicas',
    display:'(φ₁x₁ + ψ₁)/(χ₁x₁ + ω₁) = ζ₁', tex:'\\dfrac{\\phi_{1}x_{1}+\\psi_{1}}{\\chi_{1}x_{1}+\\omega_{1}}=\\zeta_{1}',
    vars:['phi_1','psi_1','chi_1','omega_1','x_1','zeta_1'],
    solutions:{
      x_1:'(zeta_1*omega_1 - psi_1)/(phi_1 - zeta_1*chi_1)',
      phi_1:'(zeta_1*chi_1*x_1 + zeta_1*omega_1 - psi_1)/x_1',
      psi_1:'zeta_1*(chi_1*x_1 + omega_1) - phi_1*x_1',
      chi_1:'(phi_1*x_1 + psi_1 - zeta_1*omega_1)/(zeta_1*x_1)',
      omega_1:'(phi_1*x_1 + psi_1)/zeta_1 - chi_1*x_1',
      zeta_1:'(phi_1*x_1 + psi_1)/(chi_1*x_1 + omega_1)'
    },
    constraints:{ nonZero:['x_1','zeta_1'] }, tags:['fracciones']
  },
  {
    id:'l5_sub_y2_igual_k1_sobre_raiz_x1',
    nivel:5, categoria:'matematicas',
    display:'y₂ = k₁/√x₁', tex:'y_{2}=\\dfrac{k_{1}}{\\sqrt{x_{1}}}',
    vars:['y_2','k_1','x_1'],
    solutions:{ x_1:'(k_1/y_2)^2', y_2:'k_1/sqrt(x_1)', k_1:'y_2*sqrt(x_1)' },
    constraints:{ nonZero:['y_2'] }, tags:['fracciones','radical']
  },
  {
    id:'l5_sub_1_sobre_a1_menos_b1x1_igual_c1',
    nivel:5, categoria:'matematicas',
    display:'1/(a₁ - b₁ x₁) = c₁', tex:'\\dfrac{1}{a_{1}-b_{1}x_{1}}=c_{1}',
    vars:['a_1','b_1','x_1','c_1'],
    solutions:{ x_1:'(a_1 - 1/c_1)/b_1', a_1:'1/c_1 + b_1*x_1', b_1:'(a_1 - 1/c_1)/x_1', c_1:'1/(a_1 - b_1*x_1)' },
    constraints:{ nonZero:['b_1','x_1','c_1'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_x_sobre_alpha_igual_beta',
    nivel:5, categoria:'matematicas',
    display:'x/α = β', tex:'\\dfrac{x}{\\alpha}=\\beta',
    vars:['x','alpha','beta'],
    solutions:{ x:'alpha*beta', alpha:'x/beta', beta:'x/alpha' },
    constraints:{ nonZero:['alpha','beta'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_alpha_sobre_x_igual_beta',
    nivel:5, categoria:'matematicas',
    display:'α/x = β', tex:'\\dfrac{\\alpha}{x}=\\beta',
    vars:['alpha','x','beta'],
    solutions:{ x:'alpha/beta', alpha:'beta*x', beta:'alpha/x' },
    constraints:{ nonZero:['x','beta'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_x_mas_eta_sobre_kappa_igual_mu',
    nivel:5, categoria:'matematicas',
    display:'(x + η)/κ = μ', tex:'\\dfrac{x+\\eta}{\\kappa}=\\mu',
    vars:['x','eta','kappa','mu'],
    solutions:{ x:'kappa*mu - eta', eta:'kappa*mu - x', kappa:'(x + eta)/mu', mu:'(x + eta)/kappa' },
    constraints:{ nonZero:['kappa','mu'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_phi_sobre_x_menos_lambda_igual_psi',
    nivel:5, categoria:'matematicas',
    display:'φ/(x - λ) = ψ', tex:'\\dfrac{\\phi}{x-\\lambda}=\\psi',
    vars:['phi','x','lambda','psi'],
    solutions:{ x:'phi/psi + lambda', phi:'psi*(x - lambda)', lambda:'x - phi/psi', psi:'phi/(x - lambda)' },
    constraints:{ nonZero:['psi'] }, tags:['fracciones','nota:x≠λ']
  },
  {
    id:'l5_gk_alpha_x_mas_beta_sobre_gamma_x_mas_delta_igual_y',
    nivel:5, categoria:'matematicas',
    display:'(αx + β)/(γx + δ) = y', tex:'\\dfrac{\\alpha x+\\beta}{\\gamma x+\\delta}=y',
    vars:['alpha','beta','gamma','delta','x','y'],
    solutions:{
      x:'(beta - y*delta)/(y*gamma - alpha)',
      alpha:'(y*(gamma*x + delta) - beta)/x',
      beta:'y*(gamma*x + delta) - alpha*x',
      gamma:'(alpha*x + beta - y*delta)/(y*x)',
      delta:'(alpha*x + beta - y*gamma*x)/y',
      y:'(alpha*x + beta)/(gamma*x + delta)'
    },
    constraints:{ nonZero:['x','y'] }, tags:['fracciones','proporciones']
  },
  {
    id:'l5_gk_I_igual_V_sobre_R_mas_r_x',
    nivel:5, categoria:'electricidad',
    display:'I = V/(R + r x)', tex:'I=\\dfrac{V}{R+rx}',
    vars:['I','V','R','r','x'],
    solutions:{ x:'(V/I - R)/r', I:'V/(R + r*x)', V:'I*(R + r*x)', R:'V/I - r*x', r:'(V/I - R)/x' },
    constraints:{ nonZero:['I','r','x'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_v_igual_d_sobre_tau_mas_x',
    nivel:5, categoria:'fisica',
    display:'v = d/(τ + x)', tex:'v=\\dfrac{d}{\\tau+x}',
    vars:['v','d','tau','x'],
    solutions:{ x:'d/v - tau', v:'d/(tau + x)', d:'v*(tau + x)', tau:'d/v - x' },
    constraints:{ nonZero:['v'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_P_igual_W_sobre_sigma_menos_x',
    nivel:5, categoria:'fisica',
    display:'P = W/(σ - x)', tex:'P=\\dfrac{W}{\\sigma-x}',
    vars:['P','W','sigma','x'],
    solutions:{ x:'sigma - W/P', P:'W/(sigma - x)', W:'P*(sigma - x)', sigma:'x + W/P' },
    constraints:{ nonZero:['P'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_y_igual_1_sobre_alpha_mas_beta_x',
    nivel:5, categoria:'matematicas',
    display:'y = 1/(α + β x)', tex:'y=\\dfrac{1}{\\alpha+\\beta x}',
    vars:['y','alpha','beta','x'],
    solutions:{ x:'(1/y - alpha)/beta', y:'1/(alpha + beta*x)', alpha:'1/y - beta*x', beta:'(1/y - alpha)/x' },
    constraints:{ nonZero:['y','beta','x'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_kappa_igual_x_sobre_x_mas_lambda',
    nivel:5, categoria:'matematicas',
    display:'κ = x/(x + λ)', tex:'\\kappa=\\dfrac{x}{x+\\lambda}',
    vars:['kappa','x','lambda'],
    solutions:{ x:'(kappa*lambda)/(1 - kappa)', kappa:'x/(x + lambda)', lambda:'x*(1 - kappa)/kappa' },
    constraints:{ nonZero:['kappa'] }, tags:['fracciones','nota:κ≠1']
  },
  {
    id:'l5_gk_rhoeq_igual_rho1rho2_sobre_rho1_mas_rho2_mas_x',
    nivel:5, categoria:'fisica',
    display:'ρ_eq = (ρ₁ ρ₂)/(ρ₁ + ρ₂ + x)', tex:'\\rho_{eq}=\\dfrac{\\rho_{1}\\rho_{2}}{\\rho_{1}+\\rho_{2}+x}',
    vars:['rho_eq','rho1','rho2','x'],
    solutions:{ x:'rho1*rho2/rho_eq - (rho1 + rho2)', rho_eq:'(rho1*rho2)/(rho1 + rho2 + x)', rho1:'rho_eq*(rho2 + x)/(rho2 - rho_eq)', rho2:'rho_eq*(rho1 + x)/(rho1 - rho_eq)' },
    constraints:{ nonZero:['rho_eq'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_A_sobre_x_mas_B_sobre_Gamma_igual_Delta',
    nivel:5, categoria:'matematicas',
    display:'A/x + B/Γ = Δ', tex:'\\dfrac{A}{x}+\\dfrac{B}{\\Gamma}=\\Delta',
    vars:['A','x','B','Gamma','Delta'],
    solutions:{ x:'A/(Delta - B/Gamma)', A:'x*(Delta - B/Gamma)', B:'Gamma*(Delta - A/x)', Gamma:'B/(Delta - A/x)', Delta:'A/x + B/Gamma' },
    constraints:{ nonZero:['x','Gamma'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_x_menos_alpha_sobre_beta_menos_gamma_x_igual_delta',
    nivel:5, categoria:'matematicas',
    display:'(x - α)/(β - γ x) = δ', tex:'\\dfrac{x-\\alpha}{\\beta-\\gamma x}=\\delta',
    vars:['x','alpha','beta','gamma','delta'],
    solutions:{ x:'(delta*beta + alpha)/(1 + delta*gamma)', alpha:'x - delta*(beta - gamma*x)', beta:'(x - alpha)/delta + gamma*x', gamma:'(beta*delta - (x - alpha))/(delta*x)', delta:'(x - alpha)/(beta - gamma*x)' },
    constraints:{ nonZero:['delta','x'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_kappa_sobre_x_menos_lambda_sobre_mu_igual_nu',
    nivel:5, categoria:'matematicas',
    display:'κ/x - λ/μ = ν', tex:'\\dfrac{\\kappa}{x}-\\dfrac{\\lambda}{\\mu}=\\nu',
    vars:['kappa','x','lambda','mu','nu'],
    solutions:{ x:'kappa/(nu + lambda/mu)', kappa:'x*(nu + lambda/mu)', lambda:'mu*(kappa/x - nu)', mu:'lambda/(kappa/x - nu)', nu:'kappa/x - lambda/mu' },
    constraints:{ nonZero:['x','mu'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_p_igual_rho_g_h_sobre_1_mas_lambda_x',
    nivel:5, categoria:'fisica',
    display:'p = ρ g h/(1 + λ x)', tex:'p=\\dfrac{\\rho g h}{1+\\lambda x}',
    vars:['p','rho','g','h','lambda','x'],
    solutions:{ x:'(rho*g*h/p - 1)/lambda', p:'rho*g*h/(1 + lambda*x)', rho:'p*(1 + lambda*x)/(g*h)', g:'p*(1 + lambda*x)/(rho*h)', h:'p*(1 + lambda*x)/(rho*g)', lambda:'(rho*g*h/p - 1)/x' },
    constraints:{ nonZero:['p','rho','g','h','lambda','x'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_x_sobre_alpha_mas_x_sobre_beta_igual_gamma',
    nivel:5, categoria:'matematicas',
    display:'x/α + x/β = γ', tex:'\\dfrac{x}{\\alpha}+\\dfrac{x}{\\beta}=\\gamma',
    vars:['x','alpha','beta','gamma'],
    solutions:{ x:'gamma*alpha*beta/(alpha + beta)', alpha:'(beta*x)/(gamma*beta - x)', beta:'(alpha*x)/(gamma*alpha - x)', gamma:'x/alpha + x/beta' },
    constraints:{ nonZero:['alpha','beta'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_1_sobre_x_mas_1_sobre_x_mas_eta_igual_kappa',
    nivel:5, categoria:'matematicas',
    display:'1/x + 1/(x + η) = κ', tex:'\\dfrac{1}{x}+\\dfrac{1}{x+\\eta}=\\kappa',
    vars:['x','eta','kappa'],
    solutions:{ x:'(2 - kappa*eta + sqrt(kappa^2*eta^2 + 4))/(2*kappa)', eta:'(kappa*x^2 - 2*x)/(1 - kappa*x)', kappa:'(2*x + eta)/(x*(x + eta))' },
    constraints:{ nonZero:['x','kappa'] }, tags:['fracciones','cuadratica']
  },
  {
    id:'l5_gk_phi_x_mas_psi_sobre_chi_x_mas_omega_igual_zeta',
    nivel:5, categoria:'matematicas',
    display:'(φx + ψ)/(χx + ω) = ζ', tex:'\\dfrac{\\phi x+\\psi}{\\chi x+\\omega}=\\zeta',
    vars:['phi','psi','chi','omega','x','zeta'],
    solutions:{ x:'(zeta*omega - psi)/(phi - zeta*chi)', phi:'(zeta*chi*x + zeta*omega - psi)/x', psi:'zeta*(chi*x + omega) - phi*x', chi:'(phi*x + psi - zeta*omega)/(zeta*x)', omega:'(phi*x + psi)/zeta - chi*x', zeta:'(phi*x + psi)/(chi*x + omega)' },
    constraints:{ nonZero:['x','zeta'] }, tags:['fracciones']
  },
  {
    id:'l5_gk_y_igual_kappa_sobre_raiz_x',
    nivel:5, categoria:'matematicas',
    display:'y = κ/√x', tex:'y=\\dfrac{\\kappa}{\\sqrt{x}}',
    vars:['y','kappa','x'],
    solutions:{ x:'(kappa/y)^2', y:'kappa/sqrt(x)', kappa:'y*sqrt(x)' },
    constraints:{ nonZero:['y'] }, tags:['fracciones','radical']
  },
  {
    id:'l5_gk_1_sobre_alpha_menos_beta_x_igual_gamma',
    nivel:5, categoria:'matematicas',
    display:'1/(α - β x) = γ', tex:'\\dfrac{1}{\\alpha-\\beta x}=\\gamma',
    vars:['alpha','beta','x','gamma'],
    solutions:{ x:'(alpha - 1/gamma)/beta', alpha:'1/gamma + beta*x', beta:'(alpha - 1/gamma)/x', gamma:'1/(alpha - beta*x)' },
    constraints:{ nonZero:['beta','x','gamma'] }, tags:['fracciones']
  },
  {
    id:'l6_x2_igual_a',
    nivel:6, categoria:'matematicas',
    display:'x^2 = a', tex:'x^2=a',
    vars:['x','a'],
    solutions:{ x:'sqrt(a)', a:'x^2' },
    tags:['potencias','nota:a≥0']
  },
  {
    id:'l6_x3_igual_k',
    nivel:6, categoria:'matematicas',
    display:'x^3 = k', tex:'x^3=k',
    vars:['x','k'],
    solutions:{ x:'cbrt(k)', k:'x^3' },
    tags:['potencias']
  },
  {
    id:'l6_raizx_igual_a',
    nivel:6, categoria:'matematicas',
    display:'√x = a', tex:'\\sqrt{x}=a',
    vars:['x','a'],
    solutions:{ x:'a^2', a:'sqrt(x)' },
    tags:['raices','nota:a≥0, x≥0']
  },
  {
    id:'l6_raizn_x_igual_k',
    nivel:6, categoria:'matematicas',
    display:'ⁿ√x = k', tex:'\\sqrt[n]{x}=k',
    vars:['x','n','k'],
    solutions:{ x:'k^n', n:'ln(x)/ln(k)', k:'x^(1/n)' },
    tags:['raices','log','nota:k>0, x>0']
  },
  {
    id:'l6_y_igual_x_menos_h_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'y = (x - h)^2', tex:'y=(x-h)^2',
    vars:['y','x','h'],
    solutions:{ x:'h + sqrt(y)', h:'x - sqrt(y)', y:'(x - h)^2' },
    tags:['potencias','nota:y≥0']
  },
  {
    id:'l6_Ek_igual_1_2_k_x2',
    nivel:6, categoria:'fisica',
    display:'E_k = (1/2) k x^2', tex:'E_k=\\dfrac{1}{2}k x^2',
    vars:['Ek','k','x'],
    solutions:{ x:'sqrt(2*Ek/k)', k:'2*Ek/x^2', Ek:'0.5*k*x^2' },
    constraints:{ nonZero:['k','x'] },
    tags:['potencias','energia','nota:Ek≥0, k>0']
  },
  {
    id:'l6_v2_igual_v02_mas_2ax',
    nivel:6, categoria:'fisica',
    display:'v^2 = v_0^2 + 2 a x', tex:'v^2=v_0^2+2ax',
    vars:['v','v0','a','x'],
    solutions:{
      x:'(v^2 - v0^2)/(2*a)',
      a:'(v^2 - v0^2)/(2*x)',
      v0:'sqrt(v^2 - 2*a*x)',
      v:'sqrt(v0^2 + 2*a*x)'
    },
    constraints:{ nonZero:['a','x'] },
    tags:['cinematica','potencias','nota:argumentos≥0']
  },
  {
    id:'l6_T_igual_2pi_raiz_L_sobre_gmasx',
    nivel:6, categoria:'fisica',
    display:'T = 2π √(L/(g + x))', tex:'T=2\\pi\\sqrt{\\frac{L}{g+x}}',
    vars:['T','L','g','x'],
    solutions:{
      x:'4*pi^2*L/T^2 - g',
      L:'(g + x)*T^2/(4*pi^2)',
      g:'4*pi^2*L/T^2 - x',
      T:'2*pi*sqrt(L/(g + x))'
    },
    constraints:{ nonZero:['T'] },
    tags:['raices','pendulo','nota:g+x>0, L>0']
  },
  {
    id:'l6_y_igual_raiz_ax_mas_b',
    nivel:6, categoria:'matematicas',
    display:'y = √(a x + b)', tex:'y=\\sqrt{ax+b}',
    vars:['y','a','x','b'],
    solutions:{ x:'(y^2 - b)/a', a:'(y^2 - b)/x', b:'y^2 - a*x', y:'sqrt(a*x + b)' },
    constraints:{ nonZero:['a','x'] },
    tags:['raices','nota:ax+b≥0']
  },
  {
    id:'l6_P_igual_k_x_a',
    nivel:6, categoria:'matematicas',
    display:'P = k x^α', tex:'P=k\\,x^{\\alpha}',
    vars:['P','k','x','alpha'],
    solutions:{
      x:'(P/k)^(1/alpha)',
      k:'P/x^alpha',
      alpha:'ln(P/k)/ln(x)',
      P:'k*x^alpha'
    },
    constraints:{ nonZero:['k','x'] },
    tags:['potencias','log','nota:x>0, P/k>0']
  },
  {
    id:'l6_I_igual_I0_e_menos_lambda_x',
    nivel:6, categoria:'fisica',
    display:'I = I₀ e^{-λ x}', tex:'I=I_{0} e^{-\\lambda x}',
    vars:['I','I0','lambda','x'],
    solutions:{
      x:'-ln(I/I0)/lambda',
      I0:'I*e^(lambda*x)',
      lambda:'-ln(I/I0)/x',
      I:'I0*e^(-lambda*x)'
    },
    constraints:{ nonZero:['lambda','x'] },
    tags:['exponencial','log','nota:I,I0>0']
  },
  {
    id:'l6_y_igual_a_raizn_bx_mas_c',
    nivel:6, categoria:'matematicas',
    display:'y = a · ⁿ√(b x + c)', tex:'y=a\\,\\sqrt[n]{bx+c}',
    vars:['y','a','n','b','x','c'],
    solutions:{
      x:'((y/a)^n - c)/b',
      a:'y/( (b*x + c)^(1/n) )',
      n:'ln(b*x + c)/ln(y/a)',
      b:'((y/a)^n - c)/x',
      c:'(y/a)^n - b*x',
      y:'a*(b*x + c)^(1/n)'
    },
    constraints:{ nonZero:['a','b','x'] },
    tags:['raices','log','nota:b*x+c>0, y/a>0']
  },
  {
    id:'l6_u_igual_cuberoot_beta_menos_gamma_x',
    nivel:6, categoria:'matematicas',
    display:'u = (β - γ x)^{1/3}', tex:'u=(\\beta-\\gamma x)^{1/3}',
    vars:['u','beta','gamma','x'],
    solutions:{
      x:'(beta - u^3)/gamma',
      beta:'u^3 + gamma*x',
      gamma:'(beta - u^3)/x',
      u:'(beta - gamma*x)^(1/3)'
    },
    constraints:{ nonZero:['gamma','x'] },
    tags:['raices']
  },
  {
    id:'l6_omega_igual_raiz_k_sobre_m_mas_x',
    nivel:6, categoria:'fisica',
    display:'ω = √(k/(m + x))', tex:'\\omega=\\sqrt{\\dfrac{k}{m+x}}',
    vars:['omega','k','m','x'],
    solutions:{
      x:'k/omega^2 - m',
      k:'omega^2*(m + x)',
      m:'k/omega^2 - x',
      omega:'sqrt(k/(m + x))'
    },
    constraints:{ nonZero:['omega'] },
    tags:['raices','nota:m+x>0, k>0']
  },
  {
    id:'l6_V_igual_raiz_E_menos_I_R',
    nivel:6, categoria:'electricidad',
    display:'V = √(E - I R)', tex:'V=\\sqrt{E-IR}',
    vars:['V','E','I','R'],
    solutions:{
      I:'(E - V^2)/R',
      R:'(E - V^2)/I',
      E:'V^2 + I*R',
      V:'sqrt(E - I*R)'
    },
    constraints:{ nonZero:['I','R'] },
    tags:['raices','circuitos','nota:E-IR≥0']
  },
  {
    id:'l6_p_igual_1_mas_alpha_x_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'p = (1 + α x)^2', tex:'p=(1+\\alpha x)^2',
    vars:['p','alpha','x'],
    solutions:{
      x:'(sqrt(p) - 1)/alpha',
      alpha:'(sqrt(p) - 1)/x',
      p:'(1 + alpha*x)^2'
    },
    constraints:{ nonZero:['alpha','x'] },
    tags:['potencias','nota:p≥0']
  },
  {
    id:'l6_q_igual_raiz_r_mas_sx_mas_t',
    nivel:6, categoria:'matematicas',
    display:'q = √(r + s x + t)', tex:'q=\\sqrt{r+sx+t}',
    vars:['q','r','s','x','t'],
    solutions:{
      x:'(q^2 - r - t)/s',
      r:'q^2 - s*x - t',
      s:'(q^2 - r - t)/x',
      t:'q^2 - r - s*x',
      q:'sqrt(r + s*x + t)'
    },
    constraints:{ nonZero:['s','x'] },
    tags:['raices','nota:r+sx+t≥0']
  },
  {
    id:'l6_A_igual_B_por_x_mas_l_a_la_n',
    nivel:6, categoria:'matematicas',
    display:'A = B (x + ℓ)^n', tex:'A=B(x+\\ell)^{n}',
    vars:['A','B','x','ell','n'],
    solutions:{
      x:'(A/B)^(1/n) - ell',
      B:'A/(x + ell)^n',
      ell:'(A/B)^(1/n) - x',
      n:'ln(A/B)/ln(x + ell)',
      A:'B*(x + ell)^n'
    },
    constraints:{ nonZero:['B'] },
    tags:['potencias','log','nota:x+ℓ>0, A/B>0']
  },
  {
    id:'l6_theta_igual_raiz_phi_menos_psi_x',
    nivel:6, categoria:'matematicas',
    display:'θ = √(φ - ψ x)', tex:'\\theta=\\sqrt{\\phi-\\psi x}',
    vars:['theta','phi','psi','x'],
    solutions:{
      x:'(phi - theta^2)/psi',
      phi:'theta^2 + psi*x',
      psi:'(phi - theta^2)/x',
      theta:'sqrt(phi - psi*x)'
    },
    constraints:{ nonZero:['psi','x'] },
    tags:['raices','nota:φ-ψx≥0']
  },
  {
    id:'l6_y_igual_ax_mas_b_a_la_menos_1_2',
    nivel:6, categoria:'matematicas',
    display:'y = (a x + b)^{-1/2}', tex:'y=(ax+b)^{-1/2}',
    vars:['y','a','x','b'],
    solutions:{
      x:'(y^{-2} - b)/a',
      a:'(y^{-2} - b)/x',
      b:'y^{-2} - a*x',
      y:'(a*x + b)^(-1/2)'
    },
    constraints:{ nonZero:['a','x','y'] },
    tags:['potencias','raices','nota:a*x+b>0']
  },
  {
    id:'l6_x_mas_a_al_cuadrado_igual_b',
    nivel:6, categoria:'matematicas',
    display:'(x + a)^2 = b', tex:'(x+a)^2=b',
    vars:['x','a','b'],
    solutions:{ x:'-a + sqrt(b)', a:'-x + sqrt(b)', b:'(x + a)^2' },
    tags:['potencias','nota:b≥0']
  },
  {
    id:'l6_x_menos_h_al_cubo_igual_m',
    nivel:6, categoria:'matematicas',
    display:'(x - h)^3 = m', tex:'(x-h)^3=m',
    vars:['x','h','m'],
    solutions:{ x:'h + cbrt(m)', h:'x - cbrt(m)', m:'(x - h)^3' },
    tags:['potencias']
  },
  {
    id:'l6_y_menos_c_igual_raiz_x_menos_h',
    nivel:6, categoria:'matematicas',
    display:'y - c = √(x - h)', tex:'y-c=\\sqrt{x-h}',
    vars:['y','c','x','h'],
    solutions:{ x:'(y - c)^2 + h', h:'x - (y - c)^2', y:'c + sqrt(x - h)', c:'y - sqrt(x - h)' },
    tags:['raices','nota:x-h≥0']
  },
  {
    id:'l6_y_igual_c_sobre_raiz_ax_mas_b',
    nivel:6, categoria:'matematicas',
    display:'y = c/√(a x + b)', tex:'y=\\dfrac{c}{\\sqrt{ax+b}}',
    vars:['y','c','a','x','b'],
    solutions:{ x:'( (c/y)^2 - b)/a', c:'y*sqrt(a*x + b)', a:'( (c/y)^2 - b)/x', b:'(c/y)^2 - a*x', y:'c/sqrt(a*x + b)' },
    constraints:{ nonZero:['a','x','y'] },
    tags:['raices','fracciones']
  },
  {
    id:'l6_y_igual_k_x_a',
    nivel:6, categoria:'matematicas',
    display:'y = k x^α', tex:'y=k x^{\\alpha}',
    vars:['y','k','x','alpha'],
    solutions:{ x:'(y/k)^(1/alpha)', k:'y/x^alpha', alpha:'ln(y/k)/ln(x)', y:'k*x^alpha' },
    constraints:{ nonZero:['k','x'] },
    tags:['potencias','log','nota:x>0']
  },
  {
    id:'l6_y_igual_A_cuberoot_bx_mas_c',
    nivel:6, categoria:'matematicas',
    display:'y = A · ³√(b x + c)', tex:'y=A\\,(bx+c)^{1/3}',
    vars:['y','A','b','x','c'],
    solutions:{ x:'((y/A)^3 - c)/b', A:'y/( (b*x + c)^(1/3) )', b:'((y/A)^3 - c)/x', c:'(y/A)^3 - b*x', y:'A*(b*x + c)^(1/3)' },
    constraints:{ nonZero:['A','b','x'] },
    tags:['raices']
  },
  {
    id:'l6_u_igual_bx_mas_c_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'u = (b x + c)^2', tex:'u=(bx+c)^2',
    vars:['u','b','x','c'],
    solutions:{ x:'(sqrt(u) - c)/b', b:'(sqrt(u) - c)/x', c:'sqrt(u) - b*x', u:'(b*x + c)^2' },
    constraints:{ nonZero:['b','x'] },
    tags:['potencias','nota:u≥0']
  },
  {
    id:'l6_y_igual_expon_A_e_kx',
    nivel:6, categoria:'matematicas',
    display:'y = A e^{k x}', tex:'y=A e^{k x}',
    vars:['y','A','k','x'],
    solutions:{ x:'ln(y/A)/k', A:'y/e^{k x}', k:'ln(y/A)/x', y:'A*e^{k x}' },
    constraints:{ nonZero:['k','x'] },
    tags:['exponencial','log','nota:y,A>0']
  },
  {
    id:'l6_y_igual_A_e_menos_k_x_mas_h',
    nivel:6, categoria:'matematicas',
    display:'y = A e^{-k (x + h)}', tex:'y=A e^{-k(x+h)}',
    vars:['y','A','k','x','h'],
    solutions:{ x:'-ln(y/A)/k - h', h:'-ln(y/A)/k - x', k:'-ln(y/A)/(x + h)', A:'y*e^{k(x + h)}', y:'A*e^{-k(x + h)}' },
    constraints:{ nonZero:['k'] },
    tags:['exponencial','log','nota:y,A>0']
  },
  {
    id:'l6_y_igual_mas_nx_a_la_menos_p',
    nivel:6, categoria:'matematicas',
    display:'y = (m + n x)^{-p}', tex:'y=(m+nx)^{-p}',
    vars:['y','m','n','x','p'],
    solutions:{ x:'(y^{-1/p} - m)/n', m:'y^{-1/p} - n*x', n:'(y^{-1/p} - m)/x', p:'-ln(y)/ln(m + n*x)', y:'(m + n*x)^(-p)' },
    constraints:{ nonZero:['n','x'] },
    tags:['potencias','log','nota:m+nx>0, y>0']
  },
  {
    id:'l6_y_igual_x_mas_a_al_cuadrado_mas_b',
    nivel:6, categoria:'matematicas',
    display:'y = (x + a)^2 + b', tex:'y=(x+a)^2+b',
    vars:['y','x','a','b'],
    solutions:{ x:'-a + sqrt(y - b)', a:'-x + sqrt(y - b)', b:'y - (x + a)^2', y:'(x + a)^2 + b' },
    tags:['potencias','nota:y-b≥0']
  },
  {
    id:'l6_omega_igual_raiz_x_mas_m_sobre_k',
    nivel:6, categoria:'matematicas',
    display:'ω = √((x + m)/k)', tex:'\\omega=\\sqrt{\\dfrac{x+m}{k}}',
    vars:['omega','x','m','k'],
    solutions:{ x:'k*omega^2 - m', m:'k*omega^2 - x', k:'(x + m)/omega^2', omega:'sqrt((x + m)/k)' },
    constraints:{ nonZero:['omega'] },
    tags:['raices','nota:k>0']
  },
  {
    id:'l6_y_igual_raiz_x_mas_h_sobre_k',
    nivel:6, categoria:'matematicas',
    display:'y = √((x + h)/k)', tex:'y=\\sqrt{\\dfrac{x+h}{k}}',
    vars:['y','x','h','k'],
    solutions:{ x:'k*y^2 - h', h:'k*y^2 - x', k:'(x + h)/y^2', y:'sqrt((x + h)/k)' },
    constraints:{ nonZero:['y'] },
    tags:['raices','nota:k>0']
  },
  {
    id:'l6_v2_igual_v02_mas_2a_x_menos_x0',
    nivel:6, categoria:'fisica',
    display:'v^2 = v_0^2 + 2 a (x - x_0)', tex:'v^2=v_0^2+2a(x-x_0)',
    vars:['v','v0','a','x','x0'],
    solutions:{
      x:'x0 + (v^2 - v0^2)/(2*a)',
      x0:'x - (v^2 - v0^2)/(2*a)',
      a:'(v^2 - v0^2)/(2*(x - x0))',
      v0:'sqrt(v^2 - 2*a*(x - x0))',
      v:'sqrt(v0^2 + 2*a*(x - x0))'
    },
    constraints:{ nonZero:['a'] },
    tags:['cinematica','potencias']
  },
  {
    id:'l6_y_igual_ax_mas_b_a_la_p',
    nivel:6, categoria:'matematicas',
    display:'y = (a x + b)^p', tex:'y=(ax+b)^{p}',
    vars:['y','a','x','b','p'],
    solutions:{ x:'(y^(1/p) - b)/a', a:'(y^(1/p) - b)/x', b:'y^(1/p) - a*x', p:'ln(y)/ln(a*x + b)', y:'(a*x + b)^p' },
    constraints:{ nonZero:['a','x'] },
    tags:['potencias','log','nota:a*x+b>0, y>0']
  },
  {
    id:'l6_y_igual_ax_mas_b_a_la_menos_1_3',
    nivel:6, categoria:'matematicas',
    display:'y = (a x + b)^{-1/3}', tex:'y=(ax+b)^{-1/3}',
    vars:['y','a','x','b'],
    solutions:{ x:'(y^{-3} - b)/a', a:'(y^{-3} - b)/x', b:'y^{-3} - a*x', y:'(a*x + b)^(-1/3)' },
    constraints:{ nonZero:['a','x','y'] },
    tags:['potencias','raices','nota:a*x+b>0']
  },
  {
    id:'l6_omega_igual_raiz_k_sobre_m_mas_nx',
    nivel:6, categoria:'fisica',
    display:'ω = √(k/(m + n x))', tex:'\\omega=\\sqrt{\\dfrac{k}{m+n x}}',
    vars:['omega','k','m','n','x'],
    solutions:{ x:'(k/omega^2 - m)/n', n:'(k/omega^2 - m)/x', m:'k/omega^2 - n*x', k:'omega^2*(m + n*x)', omega:'sqrt(k/(m + n*x))' },
    constraints:{ nonZero:['n','x','omega'] },
    tags:['raices','nota:m+nx>0']
  },
  {
    id:'l6_y_igual_c_raiz_x',
    nivel:6, categoria:'matematicas',
    display:'y = c √x', tex:'y=c\\sqrt{x}',
    vars:['y','c','x'],
    solutions:{ x:'(y/c)^2', c:'y/sqrt(x)', y:'c*sqrt(x)' },
    constraints:{ nonZero:['c'] },
    tags:['raices','nota:x≥0']
  },
  {
    id:'l6_y_igual_a_mas_b_por_raiz_x_menos_h',
    nivel:6, categoria:'matematicas',
    display:'y = (a + b) √(x - h)', tex:'y=(a+b)\\sqrt{x-h}',
    vars:['y','a','b','x','h'],
    solutions:{ x:'(y/(a+b))^2 + h', h:'x - (y/(a+b))^2', a:'y/\\sqrt{x-h} - b', b:'y/\\sqrt{x-h} - a', y:'(a+b)*sqrt(x - h)' },
    constraints:{ nonZero:['a','b'] },
    tags:['raices','nota:x-h≥0']
  },
  {
    id:'l6_sub_x1_2_igual_a1',
    nivel:6, categoria:'matematicas',
    display:'x₁^2 = a₁', tex:'x_{1}^2=a_{1}',
    vars:['x_1','a_1'],
    solutions:{ x_1:'sqrt(a_1)', a_1:'x_1^2' },
    tags:['potencias','nota:a₁≥0']
  },
  {
    id:'l6_sub_x2_3_igual_k1',
    nivel:6, categoria:'matematicas',
    display:'x₂^3 = k₁', tex:'x_{2}^3=k_{1}',
    vars:['x_2','k_1'],
    solutions:{ x_2:'cbrt(k_1)', k_1:'x_2^3' },
    tags:['potencias']
  },
  {
    id:'l6_sub_raiz_x1_igual_a2',
    nivel:6, categoria:'matematicas',
    display:'√x₁ = a₂', tex:'\\sqrt{x_{1}}=a_{2}',
    vars:['x_1','a_2'],
    solutions:{ x_1:'a_2^2', a_2:'sqrt(x_1)' },
    tags:['raices','nota:x₁≥0']
  },
  {
    id:'l6_sub_raizn_x1_igual_k2',
    nivel:6, categoria:'matematicas',
    display:'ⁿ√x₁ = k₂', tex:'\\sqrt[n]{x_{1}}=k_{2}',
    vars:['x_1','n','k_2'],
    solutions:{ x_1:'k_2^n', n:'ln(x_1)/ln(k_2)', k_2:'x_1^(1/n)' },
    tags:['raices','log','nota:k₂>0, x₁>0']
  },
  {
    id:'l6_sub_y1_igual_x1_menos_h1_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'y₁ = (x₁ - h₁)^2', tex:'y_{1}=(x_{1}-h_{1})^2',
    vars:['y_1','x_1','h_1'],
    solutions:{ x_1:'h_1 + sqrt(y_1)', h_1:'x_1 - sqrt(y_1)', y_1:'(x_1 - h_1)^2' },
    tags:['potencias','nota:y₁≥0']
  },
  {
    id:'l6_sub_Ek1_igual_1_2_k1_x1_2',
    nivel:6, categoria:'fisica',
    display:'E_{k1} = (1/2) k₁ x₁^2', tex:'E_{k1}=\\dfrac{1}{2}k_{1} x_{1}^2',
    vars:['Ek_1','k_1','x_1'],
    solutions:{ x_1:'sqrt(2*Ek_1/k_1)', k_1:'2*Ek_1/x_1^2', Ek_1:'0.5*k_1*x_1^2' },
    constraints:{ nonZero:['k_1','x_1'] },
    tags:['potencias']
  },
  {
    id:'l6_sub_v1_2_igual_v01_2_mas_2a1x1',
    nivel:6, categoria:'fisica',
    display:'v₁^2 = v_{01}^2 + 2 a₁ x₁', tex:'v_{1}^2=v_{01}^2+2a_{1}x_{1}',
    vars:['v_1','v0_1','a_1','x_1'],
    solutions:{ x_1:'(v_1^2 - v0_1^2)/(2*a_1)', a_1:'(v_1^2 - v0_1^2)/(2*x_1)', v0_1:'sqrt(v_1^2 - 2*a_1*x_1)', v_1:'sqrt(v0_1^2 + 2*a_1*x_1)' },
    constraints:{ nonZero:['a_1','x_1'] },
    tags:['cinematica']
  },
  {
    id:'l6_sub_T1_igual_2pi_raiz_L1_sobre_g1_mas_x1',
    nivel:6, categoria:'fisica',
    display:'T₁ = 2π √(L₁/(g₁ + x₁))', tex:'T_{1}=2\\pi\\sqrt{\\dfrac{L_{1}}{g_{1}+x_{1}}}',
    vars:['T_1','L_1','g_1','x_1'],
    solutions:{ x_1:'4*pi^2*L_1/T_1^2 - g_1', L_1:'(g_1 + x_1)*T_1^2/(4*pi^2)', g_1:'4*pi^2*L_1/T_1^2 - x_1', T_1:'2*pi*sqrt(L_1/(g_1 + x_1))' },
    tags:['raices','pendulo']
  },
  {
    id:'l6_sub_y2_igual_raiz_a1x1_mas_b1',
    nivel:6, categoria:'matematicas',
    display:'y₂ = √(a₁ x₁ + b₁)', tex:'y_{2}=\\sqrt{a_{1}x_{1}+b_{1}}',
    vars:['y_2','a_1','x_1','b_1'],
    solutions:{ x_1:'(y_2^2 - b_1)/a_1', a_1:'(y_2^2 - b_1)/x_1', b_1:'y_2^2 - a_1*x_1', y_2:'sqrt(a_1*x_1 + b_1)' },
    constraints:{ nonZero:['a_1','x_1'] },
    tags:['raices']
  },
  {
    id:'l6_sub_P1_igual_k1_x1_a1',
    nivel:6, categoria:'matematicas',
    display:'P₁ = k₁ x₁^{α₁}', tex:'P_{1}=k_{1}x_{1}^{\\alpha_{1}}',
    vars:['P_1','k_1','x_1','alpha_1'],
    solutions:{ x_1:'(P_1/k_1)^(1/alpha_1)', k_1:'P_1/x_1^{alpha_1}', alpha_1:'ln(P_1/k_1)/ln(x_1)', P_1:'k_1*x_1^{alpha_1}' },
    constraints:{ nonZero:['k_1','x_1'] },
    tags:['potencias','log']
  },
  {
    id:'l6_sub_I1_igual_I01_e_menos_lambda1_x1',
    nivel:6, categoria:'fisica',
    display:'I₁ = I₀₁ e^{-λ₁ x₁}', tex:'I_{1}=I_{01} e^{-\\lambda_{1} x_{1}}',
    vars:['I_1','I0_1','lambda_1','x_1'],
    solutions:{ x_1:'-ln(I_1/I0_1)/lambda_1', I0_1:'I_1*e^{lambda_1*x_1}', lambda_1:'-ln(I_1/I0_1)/x_1', I_1:'I0_1*e^{-lambda_1*x_1}' },
    constraints:{ nonZero:['lambda_1','x_1'] },
    tags:['exponencial','log']
  },
  {
    id:'l6_sub_y1_igual_a1_raizn_b1x1_mas_c1',
    nivel:6, categoria:'matematicas',
    display:'y₁ = a₁ · ⁿ√(b₁ x₁ + c₁)', tex:'y_{1}=a_{1}\\,\\sqrt[n]{b_{1}x_{1}+c_{1}}',
    vars:['y_1','a_1','n','b_1','x_1','c_1'],
    solutions:{ x_1:'((y_1/a_1)^n - c_1)/b_1', a_1:'y_1/( (b_1*x_1 + c_1)^(1/n) )', n:'ln(b_1*x_1 + c_1)/ln(y_1/a_1)', b_1:'((y_1/a_1)^n - c_1)/x_1', c_1:'(y_1/a_1)^n - b_1*x_1', y_1:'a_1*(b_1*x_1 + c_1)^(1/n)' },
    constraints:{ nonZero:['a_1','b_1','x_1'] },
    tags:['raices','log']
  },
  {
    id:'l6_sub_u1_igual_beta1_menos_gamma1x1_cuberoot',
    nivel:6, categoria:'matematicas',
    display:'u₁ = (β₁ - γ₁ x₁)^{1/3}', tex:'u_{1}=(\\beta_{1}-\\gamma_{1}x_{1})^{1/3}',
    vars:['u_1','beta_1','gamma_1','x_1'],
    solutions:{ x_1:'(beta_1 - u_1^3)/gamma_1', beta_1:'u_1^3 + gamma_1*x_1', gamma_1:'(beta_1 - u_1^3)/x_1', u_1:'(beta_1 - gamma_1*x_1)^(1/3)' },
    constraints:{ nonZero:['gamma_1','x_1'] },
    tags:['raices']
  },
  {
    id:'l6_sub_omega1_igual_raiz_k1_sobre_m1_mas_x1',
    nivel:6, categoria:'fisica',
    display:'ω₁ = √(k₁/(m₁ + x₁))', tex:'\\omega_{1}=\\sqrt{\\dfrac{k_{1}}{m_{1}+x_{1}}}',
    vars:['omega_1','k_1','m_1','x_1'],
    solutions:{ x_1:'k_1/omega_1^2 - m_1', k_1:'omega_1^2*(m_1 + x_1)', m_1:'k_1/omega_1^2 - x_1', omega_1:'sqrt(k_1/(m_1 + x_1))' },
    tags:['raices']
  },
  {
    id:'l6_sub_V1_igual_raiz_E1_menos_I1R1',
    nivel:6, categoria:'electricidad',
    display:'V₁ = √(E₁ - I₁ R₁)', tex:'V_{1}=\\sqrt{E_{1}-I_{1}R_{1}}',
    vars:['V_1','E_1','I_1','R_1'],
    solutions:{ I_1:'(E_1 - V_1^2)/R_1', R_1:'(E_1 - V_1^2)/I_1', E_1:'V_1^2 + I_1*R_1', V_1:'sqrt(E_1 - I_1*R_1)' },
    constraints:{ nonZero:['I_1','R_1'] },
    tags:['raices','circuitos']
  },
  {
    id:'l6_sub_p1_igual_1_mas_alpha1x1_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'p₁ = (1 + α₁ x₁)^2', tex:'p_{1}=(1+\\alpha_{1}x_{1})^2',
    vars:['p_1','alpha_1','x_1'],
    solutions:{ x_1:'(sqrt(p_1) - 1)/alpha_1', alpha_1:'(sqrt(p_1) - 1)/x_1', p_1:'(1 + alpha_1*x_1)^2' },
    constraints:{ nonZero:['alpha_1','x_1'] },
    tags:['potencias']
  },
  {
    id:'l6_sub_q1_igual_raiz_r1_mas_s1x1_mas_t1',
    nivel:6, categoria:'matematicas',
    display:'q₁ = √(r₁ + s₁ x₁ + t₁)', tex:'q_{1}=\\sqrt{r_{1}+s_{1}x_{1}+t_{1}}',
    vars:['q_1','r_1','s_1','x_1','t_1'],
    solutions:{ x_1:'(q_1^2 - r_1 - t_1)/s_1', r_1:'q_1^2 - s_1*x_1 - t_1', s_1:'(q_1^2 - r_1 - t_1)/x_1', t_1:'q_1^2 - r_1 - s_1*x_1', q_1:'sqrt(r_1 + s_1*x_1 + t_1)' },
    constraints:{ nonZero:['s_1','x_1'] },
    tags:['raices']
  },
  {
    id:'l6_sub_A1_igual_B1_por_x1_mas_l1_a_la_n1',
    nivel:6, categoria:'matematicas',
    display:'A₁ = B₁ (x₁ + ℓ₁)^{n₁}', tex:'A_{1}=B_{1}(x_{1}+\\ell_{1})^{n_{1}}',
    vars:['A_1','B_1','x_1','l_1','n_1'],
    solutions:{ x_1:'(A_1/B_1)^(1/n_1) - l_1', B_1:'A_1/(x_1 + l_1)^{n_1}', l_1:'(A_1/B_1)^(1/n_1) - x_1', n_1:'ln(A_1/B_1)/ln(x_1 + l_1)', A_1:'B_1*(x_1 + l_1)^{n_1}' },
    constraints:{ nonZero:['B_1'] },
    tags:['potencias','log']
  },
  {
    id:'l6_sub_theta1_igual_raiz_phi1_menos_psi1x1',
    nivel:6, categoria:'matematicas',
    display:'θ₁ = √(φ₁ - ψ₁ x₁)', tex:'\\theta_{1}=\\sqrt{\\phi_{1}-\\psi_{1}x_{1}}',
    vars:['theta_1','phi_1','psi_1','x_1'],
    solutions:{ x_1:'(phi_1 - theta_1^2)/psi_1', phi_1:'theta_1^2 + psi_1*x_1', psi_1:'(phi_1 - theta_1^2)/x_1', theta_1:'sqrt(phi_1 - psi_1*x_1)' },
    constraints:{ nonZero:['psi_1','x_1'] },
    tags:['raices']
  },
  {
    id:'l6_sub_y1_igual_a1x1_mas_b1_a_la_menos_1_2',
    nivel:6, categoria:'matematicas',
    display:'y₁ = (a₁ x₁ + b₁)^{-1/2}', tex:'y_{1}=(a_{1}x_{1}+b_{1})^{-1/2}',
    vars:['y_1','a_1','x_1','b_1'],
    solutions:{ x_1:'(y_1^{-2} - b_1)/a_1', a_1:'(y_1^{-2} - b_1)/x_1', b_1:'y_1^{-2} - a_1*x_1', y_1:'(a_1*x_1 + b_1)^(-1/2)' },
    constraints:{ nonZero:['a_1','x_1','y_1'] },
    tags:['potencias','raices']
  },
  {
    id:'l6_gk_x2_igual_alpha',
    nivel:6, categoria:'matematicas',
    display:'x^2 = α', tex:'x^2=\\alpha',
    vars:['x','alpha'],
    solutions:{ x:'sqrt(alpha)', alpha:'x^2' },
    tags:['potencias','nota:α≥0']
  },
  {
    id:'l6_gk_x3_igual_beta',
    nivel:6, categoria:'matematicas',
    display:'x^3 = β', tex:'x^3=\\beta',
    vars:['x','beta'],
    solutions:{ x:'cbrt(beta)', beta:'x^3' },
    tags:['potencias']
  },
  {
    id:'l6_gk_raizx_igual_gamma',
    nivel:6, categoria:'matematicas',
    display:'√x = γ', tex:'\\sqrt{x}=\\gamma',
    vars:['x','gamma'],
    solutions:{ x:'gamma^2', gamma:'sqrt(x)' },
    tags:['raices']
  },
  {
    id:'l6_gk_raizn_x_igual_kappa',
    nivel:6, categoria:'matematicas',
    display:'ⁿ√x = κ', tex:'\\sqrt[n]{x}=\\kappa',
    vars:['x','n','kappa'],
    solutions:{ x:'kappa^n', n:'ln(x)/ln(kappa)', kappa:'x^(1/n)' },
    tags:['raices','log','nota:κ>0, x>0']
  },
  {
    id:'l6_gk_y_igual_x_menos_lambda_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'y = (x - λ)^2', tex:'y=(x-\\lambda)^2',
    vars:['y','x','lambda'],
    solutions:{ x:'lambda + sqrt(y)', lambda:'x - sqrt(y)', y:'(x - lambda)^2' },
    tags:['potencias']
  },
  {
    id:'l6_gk_Ek_igual_1_2_k_x2',
    nivel:6, categoria:'fisica',
    display:'E_k = (1/2) k x^2', tex:'E_k=\\dfrac{1}{2}k x^2',
    vars:['Ek','k','x'],
    solutions:{ x:'sqrt(2*Ek/k)', k:'2*Ek/x^2', Ek:'0.5*k*x^2' },
    constraints:{ nonZero:['k','x'] },
    tags:['potencias']
  },
  {
    id:'l6_gk_v2_igual_v02_mas_2alpha_x',
    nivel:6, categoria:'fisica',
    display:'v^2 = v_0^2 + 2 α x', tex:'v^2=v_0^2+2\\alpha x',
    vars:['v','v0','alpha','x'],
    solutions:{ x:'(v^2 - v0^2)/(2*alpha)', alpha:'(v^2 - v0^2)/(2*x)', v0:'sqrt(v^2 - 2*alpha*x)', v:'sqrt(v0^2 + 2*alpha*x)' },
    constraints:{ nonZero:['alpha','x'] },
    tags:['cinematica']
  },
  {
    id:'l6_gk_T_igual_2pi_raiz_L_sobre_g_mas_mu',
    nivel:6, categoria:'fisica',
    display:'T = 2π √(L/(g + μ))', tex:'T=2\\pi\\sqrt{\\dfrac{L}{g+\\mu}}',
    vars:['T','L','g','mu'],
    solutions:{ mu:'4*pi^2*L/T^2 - g', L:'(g + mu)*T^2/(4*pi^2)', g:'4*pi^2*L/T^2 - mu', T:'2*pi*sqrt(L/(g + mu))' },
    tags:['raices','pendulo']
  },
  {
    id:'l6_gk_y_igual_raiz_alpha_x_mas_beta',
    nivel:6, categoria:'matematicas',
    display:'y = √(α x + β)', tex:'y=\\sqrt{\\alpha x+\\beta}',
    vars:['y','alpha','x','beta'],
    solutions:{ x:'(y^2 - beta)/alpha', alpha:'(y^2 - beta)/x', beta:'y^2 - alpha*x', y:'sqrt(alpha*x + beta)' },
    constraints:{ nonZero:['alpha','x'] },
    tags:['raices']
  },
  {
    id:'l6_gk_P_igual_kappa_x_a',
    nivel:6, categoria:'matematicas',
    display:'P = κ x^α', tex:'P=\\kappa x^{\\alpha}',
    vars:['P','kappa','x','alpha'],
    solutions:{ x:'(P/kappa)^(1/alpha)', kappa:'P/x^alpha', alpha:'ln(P/kappa)/ln(x)', P:'kappa*x^alpha' },
    constraints:{ nonZero:['kappa','x'] },
    tags:['potencias','log']
  },
  {
    id:'l6_gk_I_igual_I0_e_menos_lambda_x',
    nivel:6, categoria:'fisica',
    display:'I = I₀ e^{-λ x}', tex:'I=I_{0} e^{-\\lambda x}',
    vars:['I','I0','lambda','x'],
    solutions:{ x:'-ln(I/I0)/lambda', I0:'I*e^{lambda*x}', lambda:'-ln(I/I0)/x', I:'I0*e^{-lambda*x}' },
    constraints:{ nonZero:['lambda','x'] },
    tags:['exponencial','log']
  },
  {
    id:'l6_gk_y_igual_alpha_raizn_beta_x_mas_gamma',
    nivel:6, categoria:'matematicas',
    display:'y = α · ⁿ√(β x + γ)', tex:'y=\\alpha\\,\\sqrt[n]{\\beta x+\\gamma}',
    vars:['y','alpha','n','beta','x','gamma'],
    solutions:{ x:'((y/alpha)^n - gamma)/beta', alpha:'y/( (beta*x + gamma)^(1/n) )', n:'ln(beta*x + gamma)/ln(y/alpha)', beta:'((y/alpha)^n - gamma)/x', gamma:'(y/alpha)^n - beta*x', y:'alpha*(beta*x + gamma)^(1/n)' },
    constraints:{ nonZero:['alpha','beta','x'] },
    tags:['raices','log']
  },
  {
    id:'l6_gk_u_igual_beta_menos_gamma_x_cuberoot',
    nivel:6, categoria:'matematicas',
    display:'u = (β - γ x)^{1/3}', tex:'u=(\\beta-\\gamma x)^{1/3}',
    vars:['u','beta','gamma','x'],
    solutions:{ x:'(beta - u^3)/gamma', beta:'u^3 + gamma*x', gamma:'(beta - u^3)/x', u:'(beta - gamma*x)^(1/3)' },
    constraints:{ nonZero:['gamma','x'] },
    tags:['raices']
  },
  {
    id:'l6_gk_omega_igual_raiz_kappa_sobre_mu_mas_x',
    nivel:6, categoria:'fisica',
    display:'ω = √(κ/(μ + x))', tex:'\\omega=\\sqrt{\\dfrac{\\kappa}{\\mu+x}}',
    vars:['omega','kappa','mu','x'],
    solutions:{ x:'kappa/omega^2 - mu', kappa:'omega^2*(mu + x)', mu:'kappa/omega^2 - x', omega:'sqrt(kappa/(mu + x))' },
    constraints:{ nonZero:['omega'] },
    tags:['raices']
  },
  {
    id:'l6_gk_V_igual_raiz_E_menos_I_R',
    nivel:6, categoria:'electricidad',
    display:'V = √(E - I R)', tex:'V=\\sqrt{E-IR}',
    vars:['V','E','I','R'],
    solutions:{ I:'(E - V^2)/R', R:'(E - V^2)/I', E:'V^2 + I*R', V:'sqrt(E - I*R)' },
    constraints:{ nonZero:['I','R'] },
    tags:['raices','circuitos']
  },
  {
    id:'l6_gk_p_igual_1_mas_alpha_x_al_cuadrado',
    nivel:6, categoria:'matematicas',
    display:'p = (1 + α x)^2', tex:'p=(1+\\alpha x)^2',
    vars:['p','alpha','x'],
    solutions:{ x:'(sqrt(p) - 1)/alpha', alpha:'(sqrt(p) - 1)/x', p:'(1 + alpha*x)^2' },
    constraints:{ nonZero:['alpha','x'] },
    tags:['potencias']
  },
  {
    id:'l6_gk_q_igual_raiz_r_mas_sigma_x_mas_tau',
    nivel:6, categoria:'matematicas',
    display:'q = √(r + σ x + τ)', tex:'q=\\sqrt{r+\\sigma x+\\tau}',
    vars:['q','r','sigma','x','tau'],
    solutions:{ x:'(q^2 - r - tau)/sigma', r:'q^2 - sigma*x - tau', sigma:'(q^2 - r - tau)/x', tau:'q^2 - r - sigma*x', q:'sqrt(r + sigma*x + tau)' },
    constraints:{ nonZero:['sigma','x'] },
    tags:['raices']
  },
  {
    id:'l6_gk_A_igual_B_por_x_mas_lambda_a_la_nu',
    nivel:6, categoria:'matematicas',
    display:'A = B (x + λ)^{ν}', tex:'A=B(x+\\lambda)^{\\nu}',
    vars:['A','B','x','lambda','nu'],
    solutions:{ x:'(A/B)^(1/nu) - lambda', B:'A/(x + lambda)^nu', lambda:'(A/B)^(1/nu) - x', nu:'ln(A/B)/ln(x + lambda)', A:'B*(x + lambda)^nu' },
    constraints:{ nonZero:['B'] },
    tags:['potencias','log']
  },
  {
    id:'l6_gk_theta_igual_raiz_phi_menos_psi_x',
    nivel:6, categoria:'matematicas',
    display:'θ = √(φ - ψ x)', tex:'\\theta=\\sqrt{\\phi-\\psi x}',
    vars:['theta','phi','psi','x'],
    solutions:{ x:'(phi - theta^2)/psi', phi:'theta^2 + psi*x', psi:'(phi - theta^2)/x', theta:'sqrt(phi - psi*x)' },
    constraints:{ nonZero:['psi','x'] },
    tags:['raices']
  },
  {
    id:'l6_gk_y_igual_alpha_x_mas_beta_a_la_menos_1_2',
    nivel:6, categoria:'matematicas',
    display:'y = (α x + β)^{-1/2}', tex:'y=(\\alpha x+\\beta)^{-1/2}',
    vars:['y','alpha','x','beta'],
    solutions:{ x:'(y^{-2} - beta)/alpha', alpha:'(y^{-2} - beta)/x', beta:'y^{-2} - alpha*x', y:'(alpha*x + beta)^(-1/2)' },
    constraints:{ nonZero:['alpha','x','y'] },
    tags:['potencias','raices']
  },
  {
    id:'l7_ax_mas_bx_igual_c',
    nivel:7, categoria:'matematicas',
    display:'a x + b x = c', tex:'ax+bx=c',
    vars:['a','b','x','c'],
    solutions:{
      x:'c/(a+b)',
      a:'c/x - b',
      b:'c/x - a',
      c:'(a+b)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:a+b≠0']
  },
  {
    id:'l7_x_por_a_mas_b_igual_c',
    nivel:7, categoria:'matematicas',
    display:'x (a + b) = c', tex:'x(a+b)=c',
    vars:['x','a','b','c'],
    solutions:{
      x:'c/(a+b)',
      a:'c/x - b',
      b:'c/x - a',
      c:'x*(a+b)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:a+b≠0']
  },
  {
    id:'l7_kx_mas_lx_igual_m',
    nivel:7, categoria:'matematicas',
    display:'k x + ℓ x = m', tex:'kx+\\ell x=m',
    vars:['k','ell','x','m'],
    solutions:{
      x:'m/(k+ell)',
      k:'m/x - ell',
      ell:'m/x - k',
      m:'(k+ell)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:k+ℓ≠0']
  },
  {
    id:'l7_x_alpha_menos_beta_mas_gamma_x_igual_delta',
    nivel:7, categoria:'matematicas',
    display:'x(α - β) + γ x = δ', tex:'x(\\alpha-\\beta)+\\gamma x=\\delta',
    vars:['alpha','beta','gamma','x','delta'],
    solutions:{
      x:'delta/(alpha - beta + gamma)',
      alpha:'beta + delta/x - gamma',
      beta:'alpha + gamma - delta/x',
      gamma:'delta/x - (alpha - beta)',
      delta:'x*(alpha - beta + gamma)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:α-β+γ≠0']
  },
  {
    id:'l7_Fx_menos_kx_igual_W',
    nivel:7, categoria:'fisica',
    display:'F x - k x = W', tex:'Fx-kx=W',
    vars:['F','k','x','W'],
    solutions:{
      x:'W/(F-k)',
      F:'W/x + k',
      k:'F - W/x',
      W:'(F-k)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:F≠k']
  },
  {
    id:'l7_x_1_mas_lambda_igual_mu_mas_nu_x',
    nivel:7, categoria:'matematicas',
    display:'x(1 + λ) = μ + ν x', tex:'x(1+\\lambda)=\\mu+\\nu x',
    vars:['x','lambda','mu','nu'],
    solutions:{
      x:'mu/(1 + lambda - nu)',
      lambda:'mu/x + nu - 1',
      mu:'x*(1 + lambda - nu)',
      nu:'1 + lambda - mu/x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:1+λ-ν≠0']
  },
  {
    id:'l7_xA_mas_Bx_mas_BD_igual_E',
    nivel:7, categoria:'matematicas',
    display:'x(A + B) + C(x + D) = E', tex:'x(A+B)+C(x+D)=E',
    vars:['A','B','C','D','x','E'],
    solutions:{
      x:'(E - C*D)/(A + B + C)',
      A:'(E - C*D)/x - (B + C)',
      B:'(E - C*D)/x - (A + C)',
      C:'(E - x*(A + B))/(x + D)',
      D:'(E - x*(A + B + C))/C',
      E:'x*(A + B + C) + C*D'
    },
    constraints:{ nonZero:['x','C'] },
    tags:['factorizacion','nota:A+B+C≠0, x+D≠0']
  },
  {
    id:'l7_xr_mas_s_mas_t_igual_u',
    nivel:7, categoria:'matematicas',
    display:'x(r + s + t) = u', tex:'x(r+s+t)=u',
    vars:['x','r','s','t','u'],
    solutions:{
      x:'u/(r+s+t)',
      r:'u/x - (s + t)',
      s:'u/x - (r + t)',
      t:'u/x - (r + s)',
      u:'x*(r+s+t)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','suma']
  },
  {
    id:'l7_x_por_1sobrea_mas_1sobreb_igual_c',
    nivel:7, categoria:'matematicas',
    display:'x(1/a + 1/b) = c', tex:'x\\left(\\tfrac{1}{a}+\\tfrac{1}{b}\\right)=c',
    vars:['x','a','b','c'],
    solutions:{
      x:'c / (1/a + 1/b)',
      a:'x*b / (c*b - x)',
      b:'x*a / (c*a - x)',
      c:'x*(1/a + 1/b)'
    },
    constraints:{ nonZero:['a','b'] },
    tags:['factorizacion','nota:a+b≠0']
  },
  {
    id:'l7_x1_menos_eta_igual_kappa1_mas_eta',
    nivel:7, categoria:'matematicas',
    display:'x(1 - η) = κ(1 + η)', tex:'x(1-\\eta)=\\kappa(1+\\eta)',
    vars:['x','eta','kappa'],
    solutions:{
      x:'kappa*(1 + eta)/(1 - eta)',
      eta:'(x - kappa)/(x + kappa)',
      kappa:'x*(1 - eta)/(1 + eta)'
    },
    tags:['factorizacion','nota:η≠±1, x+κ≠0']
  },
  {
    id:'l7_xphi_menos_psi_mas_omega_x_igual_zeta',
    nivel:7, categoria:'matematicas',
    display:'x(φ - ψ) + ω x = ζ', tex:'x(\\phi-\\psi)+\\omega x=\\zeta',
    vars:['phi','psi','omega','x','zeta'],
    solutions:{
      x:'zeta/(phi - psi + omega)',
      phi:'psi - omega + zeta/x',
      psi:'phi + omega - zeta/x',
      omega:'zeta/x - (phi - psi)',
      zeta:'x*(phi - psi + omega)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:φ-ψ+ω≠0']
  },
  {
    id:'l7_P_igual_xF_mas_W',
    nivel:7, categoria:'matematicas',
    display:'P = x F + W', tex:'P=xF+W',
    vars:['P','x','F','W'],
    solutions:{
      x:'(P - W)/F',
      F:'(P - W)/x',
      W:'P - x*F',
      P:'x*F + W'
    },
    constraints:{ nonZero:['x','F'] },
    tags:['factorizacion']
  },
  {
    id:'l7_y_igual_xa_menos_b_mas_c_menos_d_por_x',
    nivel:7, categoria:'matematicas',
    display:'y = x(a - b) + (c - d) x', tex:'y=x(a-b)+(c-d)x',
    vars:['y','x','a','b','c','d'],
    solutions:{
      x:'y/(a - b + c - d)',
      a:'y/x + b - c + d',
      b:'a + c - d - y/x',
      c:'y/x - a + b + d',
      d:'a - b + c - y/x',
      y:'x*(a - b + c - d)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_M_igual_xg_mas_xmu_h',
    nivel:7, categoria:'fisica',
    display:'M = x g + x μ h', tex:'M=xg+x\\mu h',
    vars:['M','x','g','mu','h'],
    solutions:{
      x:'M/(g + mu*h)',
      g:'M/x - mu*h',
      mu:'(M/x - g)/h',
      h:'(M/x - g)/mu',
      M:'x*(g + mu*h)'
    },
    constraints:{ nonZero:['x','mu','h'] },
    tags:['factorizacion']
  },
  {
    id:'l7_Q_igual_x_por_k_sobre_R_mas_1_sobrer',
    nivel:7, categoria:'matematicas',
    display:'Q = x (k/R + 1/r)', tex:'Q=x\\left(\\tfrac{k}{R}+\\tfrac{1}{r}\\right)',
    vars:['Q','x','k','R','r'],
    solutions:{
      x:'Q / (k/R + 1/r)',
      k:'R*(Q/x - 1/r)',
      R:'k/(Q/x - 1/r)',
      r:'1/(Q/x - k/R)',
      Q:'x*(k/R + 1/r)'
    },
    constraints:{ nonZero:['x','R','r'] },
    tags:['factorizacion']
  },
  {
    id:'l7_S_igual_xA_mas_Bx_mas_Bl',
    nivel:7, categoria:'matematicas',
    display:'S = x A + B(x + ℓ)', tex:'S=xA+B(x+\\ell)',
    vars:['S','x','A','B','ell'],
    solutions:{
      x:'(S - B*ell)/(A + B)',
      A:'(S - B*ell)/x - B',
      B:'(S - x*A)/(x + ell)',
      ell:'(S - x*(A + B))/B',
      S:'x*(A + B) + B*ell'
    },
    constraints:{ nonZero:['x','B'] },
    tags:['factorizacion','nota:x+ℓ≠0']
  },
  {
    id:'l7_0_igual_x_alpha_mas_beta_menos_gamma',
    nivel:7, categoria:'matematicas',
    display:'0 = x(α + β) - γ', tex:'0=x(\\alpha+\\beta)-\\gamma',
    vars:['alpha','beta','x','gamma'],
    solutions:{
      x:'gamma/(alpha + beta)',
      alpha:'gamma/x - beta',
      beta:'gamma/x - alpha',
      gamma:'x*(alpha + beta)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_T_igual_xlambda_mas_mu_mas_nu_x',
    nivel:7, categoria:'matematicas',
    display:'T = x λ + μ + ν x', tex:'T=x\\lambda+\\mu+\\nu x',
    vars:['T','x','lambda','mu','nu'],
    solutions:{
      x:'(T - mu)/(lambda + nu)',
      lambda:'(T - mu)/x - nu',
      nu:'(T - mu)/x - lambda',
      mu:'T - x*(lambda + nu)',
      T:'x*(lambda + nu) + mu'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_V_igual_x_a_mas_b_mas_c_mas_d',
    nivel:7, categoria:'matematicas',
    display:'V = x(a + b + c) + d', tex:'V=x(a+b+c)+d',
    vars:['V','x','a','b','c','d'],
    solutions:{
      x:'(V - d)/(a + b + c)',
      a:'(V - d)/x - (b + c)',
      b:'(V - d)/x - (a + c)',
      c:'(V - d)/x - (a + b)',
      d:'V - x*(a + b + c)',
      V:'x*(a + b + c) + d'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_W_igual_x_k_menos_m_menos_n',
    nivel:7, categoria:'matematicas',
    display:'W = x(k - m) - n x', tex:'W=x(k-m)-nx',
    vars:['W','x','k','m','n'],
    solutions:{
      x:'W/(k - m - n)',
      k:'W/x + m + n',
      m:'k - n - W/x',
      n:'k - m - W/x',
      W:'x*(k - m - n)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_px_mas_qx_igual_r_mas_s',
    nivel:7, categoria:'matematicas',
    display:'(p + q) x = r + s', tex:'(p+q)x=r+s',
    vars:['p','q','x','r','s'],
    solutions:{
      x:'(r + s)/(p + q)',
      p:'(r + s)/x - q',
      q:'(r + s)/x - p',
      r:'x*(p + q) - s',
      s:'x*(p + q) - r'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_xu_menos_v_mas_w_igual_y',
    nivel:7, categoria:'matematicas',
    display:'x(u - v) + w = y', tex:'x(u-v)+w=y',
    vars:['x','u','v','w','y'],
    solutions:{
      x:'(y - w)/(u - v)',
      u:'v + (y - w)/x',
      v:'u - (y - w)/x',
      w:'y - x*(u - v)',
      y:'x*(u - v) + w'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion','nota:u-v≠0']
  },
  {
    id:'l7_extra_xa_mas_b_mas_cx_menos_cd_igual_e',
    nivel:7, categoria:'matematicas',
    display:'x(a + b) + c(x - d) = e', tex:'x(a+b)+c(x-d)=e',
    vars:['a','b','c','d','x','e'],
    solutions:{
      x:'(e + c*d)/(a + b + c)',
      a:'(e + c*d)/x - (b + c)',
      b:'(e + c*d)/x - (a + c)',
      c:'(e - x*(a + b))/(x - d)',
      d:'x - (e - x*(a + b))/c',
      e:'x*(a + b + c) - c*d'
    },
    constraints:{ nonZero:['x','c'] },
    tags:['factorizacion','nota:a+b+c≠0, x-d≠0']
  },
  {
    id:'l7_extra_x1_mas_p_igual_q_por_1_menos_r',
    nivel:7, categoria:'matematicas',
    display:'x(1 + p) = q(1 - r)', tex:'x(1+p)=q(1-r)',
    vars:['x','p','q','r'],
    solutions:{
      x:'q*(1 - r)/(1 + p)',
      p:'q*(1 - r)/x - 1',
      q:'x*(1 + p)/(1 - r)',
      r:'1 - x*(1 + p)/q'
    },
    tags:['factorizacion','nota:r≠1']
  },
  {
    id:'l7_extra_a_menos_2b_por_x_igual_c_menos_d',
    nivel:7, categoria:'matematicas',
    display:'(a - 2b) x = c - d', tex:'(a-2b)x=c-d',
    vars:['a','b','x','c','d'],
    solutions:{
      x:'(c - d)/(a - 2*b)',
      a:'2*b + (c - d)/x',
      b:'(a - (c - d)/x)/2',
      c:'(a - 2*b)*x + d',
      d:'c - (a - 2*b)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_m_mas_n_por_x_mas_p_x_mas_pq_igual_r',
    nivel:7, categoria:'matematicas',
    display:'(m + n)x + p(x + q) = r', tex:'(m+n)x+p(x+q)=r',
    vars:['m','n','p','q','x','r'],
    solutions:{
      x:'(r - p*q)/(m + n + p)',
      m:'(r - p*q)/x - (n + p)',
      n:'(r - p*q)/x - (m + p)',
      p:'(r - x*(m + n))/(x + q)',
      q:'(r - x*(m + n + p))/p',
      r:'x*(m + n + p) + p*q'
    },
    constraints:{ nonZero:['x','p'] },
    tags:['factorizacion','nota:x+q≠0']
  },
  {
    id:'l7_extra_A_mas_B_mas_C_por_x_igual_D_menos_E',
    nivel:7, categoria:'matematicas',
    display:'(A + B + C)x = D - E', tex:'(A+B+C)x=D-E',
    vars:['A','B','C','x','D','E'],
    solutions:{
      x:'(D - E)/(A + B + C)',
      A:'(D - E)/x - (B + C)',
      B:'(D - E)/x - (A + C)',
      C:'(D - E)/x - (A + B)',
      D:'x*(A + B + C) + E',
      E:'D - x*(A + B + C)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_xa_menos_b_menos_c_mas_d_igual_e',
    nivel:7, categoria:'matematicas',
    display:'x(a - b - c) + d = e', tex:'x(a-b-c)+d=e',
    vars:['x','a','b','c','d','e'],
    solutions:{
      x:'(e - d)/(a - b - c)',
      a:'b + c + (e - d)/x',
      b:'a - c - (e - d)/x',
      c:'a - b - (e - d)/x',
      d:'e - x*(a - b - c)',
      e:'x*(a - b - c) + d'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_p_menos_q_mas_r_por_x_igual_s',
    nivel:7, categoria:'matematicas',
    display:'(p - q + r) x = s', tex:'(p-q+r)x=s',
    vars:['p','q','r','x','s'],
    solutions:{
      x:'s/(p - q + r)',
      p:'s/x + q - r',
      q:'p + r - s/x',
      r:'s/x - p + q',
      s:'x*(p - q + r)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_t_igual_xg_menos_hx_mas_k',
    nivel:7, categoria:'matematicas',
    display:'t = x g - h x + k', tex:'t=xg-hx+k',
    vars:['t','x','g','h','k'],
    solutions:{
      x:'(t - k)/(g - h)',
      g:'(t - k)/x + h',
      h:'g - (t - k)/x',
      k:'t - x*(g - h)',
      t:'x*(g - h) + k'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_y_igual_xu_mas_vx_mas_vw_mas_z',
    nivel:7, categoria:'matematicas',
    display:'y = x(u + v) + v w + z', tex:'y=x(u+v)+vw+z',
    vars:['y','x','u','v','w','z'],
    solutions:{
      x:'(y - v*w - z)/(u + v)',
      u:'(y - v*w - z)/x - v',
      v:'(y - z - x*u)/(x + w)',
      w:'(y - z - x*(u + v))/v',
      z:'y - x*(u + v) - v*w',
      y:'x*(u + v) + v*w + z'
    },
    constraints:{ nonZero:['x','v'] },
    tags:['factorizacion','nota:x+w≠0']
  },
  {
    id:'l7_extra_s_igual_a_mas_b_menos_c_por_x',
    nivel:7, categoria:'matematicas',
    display:'s = (a + b - c) x', tex:'s=(a+b-c)x',
    vars:['s','a','b','c','x'],
    solutions:{
      x:'s/(a + b - c)',
      a:'s/x - b + c',
      b:'s/x - a + c',
      c:'a + b - s/x',
      s:'(a + b - c)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_xa_mas_b_mas_cx_mas_cd_mas_e_igual_f',
    nivel:7, categoria:'matematicas',
    display:'x(a + b + c) + c d + e = f', tex:'x(a+b+c)+cd+e=f',
    vars:['x','a','b','c','d','e','f'],
    solutions:{
      x:'(f - c*d - e)/(a + b + c)',
      a:'(f - c*d - e)/x - (b + c)',
      b:'(f - c*d - e)/x - (a + c)',
      c:'(f - e - x*(a + b))/(x + d)',
      d:'(f - x*(a + b + c) - e)/c',
      e:'f - x*(a + b + c) - c*d',
      f:'x*(a + b + c) + c*d + e'
    },
    constraints:{ nonZero:['x','c'] },
    tags:['factorizacion','nota:x+d≠0']
  },
  {
    id:'l7_extra_kx_mas_l_menos_m_por_x_igual_n',
    nivel:7, categoria:'matematicas',
    display:'(k + ℓ - m) x = n', tex:'(k+\\ell-m)x=n',
    vars:['k','ell','m','x','n'],
    solutions:{
      x:'n/(k + ell - m)',
      k:'n/x - ell + m',
      ell:'n/x - k + m',
      m:'k + ell - n/x',
      n:'(k + ell - m)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_xa_menos_b_igual_c_por_d_menos_e',
    nivel:7, categoria:'matematicas',
    display:'x(a - b) = c(d - e)', tex:'x(a-b)=c(d-e)',
    vars:['x','a','b','c','d','e'],
    solutions:{
      x:'c*(d - e)/(a - b)',
      a:'b + c*(d - e)/x',
      b:'a - c*(d - e)/x',
      c:'x*(a - b)/(d - e)',
      d:'x*(a - b)/c + e',
      e:'d - x*(a - b)/c'
    },
    constraints:{ nonZero:['x','c'] },
    tags:['factorizacion','nota:a-b≠0, d-e≠0']
  },
  {
    id:'l7_extra_1_mas_a_menos_b_por_x_igual_c_mas_d',
    nivel:7, categoria:'matematicas',
    display:'(1 + a - b) x = c + d', tex:'(1+a-b)x=c+d',
    vars:['x','a','b','c','d'],
    solutions:{
      x:'(c + d)/(1 + a - b)',
      a:'(c + d)/x - 1 + b',
      b:'1 + a - (c + d)/x',
      c:'x*(1 + a - b) - d',
      d:'x*(1 + a - b) - c'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_x2a_mas_3b_mas_c_igual_d',
    nivel:7, categoria:'matematicas',
    display:'x(2a + 3b) + c = d', tex:'x(2a+3b)+c=d',
    vars:['x','a','b','c','d'],
    solutions:{
      x:'(d - c)/(2*a + 3*b)',
      a:'(d - c)/(2*x) - (3*b)/2',
      b:'(d - c)/(3*x) - (2*a)/3',
      c:'d - x*(2*a + 3*b)',
      d:'x*(2*a + 3*b) + c'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_xa_mas_b_mas_c_igual_s',
    nivel:7, categoria:'matematicas',
    display:'x(a + b + c) = s', tex:'x(a+b+c)=s',
    vars:['x','a','b','c','s'],
    solutions:{
      x:'s/(a + b + c)',
      a:'s/x - (b + c)',
      b:'s/x - (a + c)',
      c:'s/x - (a + b)',
      s:'x*(a + b + c)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_t_igual_xp_mas_q_menos_r',
    nivel:7, categoria:'matematicas',
    display:'t = x(p + q) - r', tex:'t=x(p+q)-r',
    vars:['t','x','p','q','r'],
    solutions:{
      x:'(t + r)/(p + q)',
      p:'(t + r)/x - q',
      q:'(t + r)/x - p',
      r:'x*(p + q) - t',
      t:'x*(p + q) - r'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_extra_w_igual_x_menos_rx_mas_s',
    nivel:7, categoria:'matematicas',
    display:'w = x - r x + s', tex:'w=x-rx+s',
    vars:['w','x','r','s'],
    solutions:{
      x:'(w - s)/(1 - r)',
      r:'1 - (w - s)/x',
      s:'w - x*(1 - r)',
      w:'x*(1 - r) + s'
    },
    tags:['factorizacion','nota:r≠1']
  },

  {
    id:'l7_sub_a1x1_mas_b1x1_igual_c1',
    nivel:7, categoria:'matematicas',
    display:'a₁ x₁ + b₁ x₁ = c₁', tex:'a_{1}x_{1}+b_{1}x_{1}=c_{1}',
    vars:['a_1','b_1','x_1','c_1'],
    solutions:{
      x_1:'c_1/(a_1 + b_1)',
      a_1:'c_1/x_1 - b_1',
      b_1:'c_1/x_1 - a_1',
      c_1:'(a_1 + b_1)*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1_a1_mas_b1_igual_c1',
    nivel:7, categoria:'matematicas',
    display:'x₁ (a₁ + b₁) = c₁', tex:'x_{1}(a_{1}+b_{1})=c_{1}',
    vars:['x_1','a_1','b_1','c_1'],
    solutions:{
      x_1:'c_1/(a_1 + b_1)',
      a_1:'c_1/x_1 - b_1',
      b_1:'c_1/x_1 - a_1',
      c_1:'x_1*(a_1 + b_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_k1x1_mas_l1x1_igual_m1',
    nivel:7, categoria:'matematicas',
    display:'k₁ x₁ + ℓ₁ x₁ = m₁', tex:'k_{1}x_{1}+\\ell_{1}x_{1}=m_{1}',
    vars:['k_1','l_1','x_1','m_1'],
    solutions:{
      x_1:'m_1/(k_1 + l_1)',
      k_1:'m_1/x_1 - l_1',
      l_1:'m_1/x_1 - k_1',
      m_1:'(k_1 + l_1)*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1_alpha1_menos_beta1_mas_gamma1x1_igual_delta1',
    nivel:7, categoria:'matematicas',
    display:'x₁(α₁ - β₁) + γ₁ x₁ = δ₁', tex:'x_{1}(\\alpha_{1}-\\beta_{1})+\\gamma_{1}x_{1}=\\delta_{1}',
    vars:['alpha_1','beta_1','gamma_1','x_1','delta_1'],
    solutions:{
      x_1:'delta_1/(alpha_1 - beta_1 + gamma_1)',
      alpha_1:'beta_1 + delta_1/x_1 - gamma_1',
      beta_1:'alpha_1 + gamma_1 - delta_1/x_1',
      gamma_1:'delta_1/x_1 - (alpha_1 - beta_1)',
      delta_1:'x_1*(alpha_1 - beta_1 + gamma_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_F1x1_menos_k1x1_igual_W1',
    nivel:7, categoria:'fisica',
    display:'F₁ x₁ - k₁ x₁ = W₁', tex:'F_{1}x_{1}-k_{1}x_{1}=W_{1}',
    vars:['F_1','k_1','x_1','W_1'],
    solutions:{
      x_1:'W_1/(F_1 - k_1)',
      F_1:'W_1/x_1 + k_1',
      k_1:'F_1 - W_1/x_1',
      W_1:'(F_1 - k_1)*x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1_1_mas_lambda1_igual_mu1_mas_nu1x1',
    nivel:7, categoria:'matematicas',
    display:'x₁(1 + λ₁) = μ₁ + ν₁ x₁', tex:'x_{1}(1+\\lambda_{1})=\\mu_{1}+\\nu_{1}x_{1}',
    vars:['x_1','lambda_1','mu_1','nu_1'],
    solutions:{
      x_1:'mu_1/(1 + lambda_1 - nu_1)',
      lambda_1:'mu_1/x_1 + nu_1 - 1',
      mu_1:'x_1*(1 + lambda_1 - nu_1)',
      nu_1:'1 + lambda_1 - mu_1/x_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1A1_mas_B1x1_mas_C1D1_igual_E1',
    nivel:7, categoria:'matematicas',
    display:'x₁(A₁ + B₁) + C₁(x₁ + D₁) = E₁', tex:'x_{1}(A_{1}+B_{1})+C_{1}(x_{1}+D_{1})=E_{1}',
    vars:['A_1','B_1','C_1','D_1','x_1','E_1'],
    solutions:{
      x_1:'(E_1 - C_1*D_1)/(A_1 + B_1 + C_1)',
      A_1:'(E_1 - C_1*D_1)/x_1 - (B_1 + C_1)',
      B_1:'(E_1 - C_1*D_1)/x_1 - (A_1 + C_1)',
      C_1:'(E_1 - x_1*(A_1 + B_1))/(x_1 + D_1)',
      D_1:'(E_1 - x_1*(A_1 + B_1 + C_1))/C_1',
      E_1:'x_1*(A_1 + B_1 + C_1) + C_1*D_1'
    },
    constraints:{ nonZero:['x_1','C_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1_r1_mas_s1_mas_t1_igual_u1',
    nivel:7, categoria:'matematicas',
    display:'x₁(r₁ + s₁ + t₁) = u₁', tex:'x_{1}(r_{1}+s_{1}+t_{1})=u_{1}',
    vars:['x_1','r_1','s_1','t_1','u_1'],
    solutions:{
      x_1:'u_1/(r_1 + s_1 + t_1)',
      r_1:'u_1/x_1 - (s_1 + t_1)',
      s_1:'u_1/x_1 - (r_1 + t_1)',
      t_1:'u_1/x_1 - (r_1 + s_1)',
      u_1:'x_1*(r_1 + s_1 + t_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1_por_1sobrea1_mas_1sobreb1_igual_c1',
    nivel:7, categoria:'matematicas',
    display:'x₁(1/a₁ + 1/b₁) = c₁', tex:'x_{1}\\left(\\tfrac{1}{a_{1}}+\\tfrac{1}{b_{1}}\\right)=c_{1}',
    vars:['x_1','a_1','b_1','c_1'],
    solutions:{
      x_1:'c_1 / (1/a_1 + 1/b_1)',
      a_1:'x_1*b_1/(c_1*b_1 - x_1)',
      b_1:'x_1*a_1/(c_1*a_1 - x_1)',
      c_1:'x_1*(1/a_1 + 1/b_1)'
    },
    constraints:{ nonZero:['a_1','b_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_x1_1_menos_eta1_igual_kappa1_1_mas_eta1',
    nivel:7, categoria:'matematicas',
    display:'x₁(1 - η₁) = κ₁(1 + η₁)', tex:'x_{1}(1-\\eta_{1})=\\kappa_{1}(1+\\eta_{1})',
    vars:['x_1','eta_1','kappa_1'],
    solutions:{
      x_1:'kappa_1*(1 + eta_1)/(1 - eta_1)',
      eta_1:'(x_1 - kappa_1)/(x_1 + kappa_1)',
      kappa_1:'x_1*(1 - eta_1)/(1 + eta_1)'
    },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_P1_igual_x1F1_mas_W1',
    nivel:7, categoria:'matematicas',
    display:'P₁ = x₁ F₁ + W₁', tex:'P_{1}=x_{1}F_{1}+W_{1}',
    vars:['P_1','x_1','F_1','W_1'],
    solutions:{
      x_1:'(P_1 - W_1)/F_1',
      F_1:'(P_1 - W_1)/x_1',
      W_1:'P_1 - x_1*F_1',
      P_1:'x_1*F_1 + W_1'
    },
    constraints:{ nonZero:['x_1','F_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_y1_igual_x1a1_mas_b1_mas_c1_menos_d1_por_x1',
    nivel:7, categoria:'matematicas',
    display:'y₁ = x₁(a₁ - b₁) + (c₁ - d₁) x₁', tex:'y_{1}=x_{1}(a_{1}-b_{1})+(c_{1}-d_{1})x_{1}',
    vars:['y_1','x_1','a_1','b_1','c_1','d_1'],
    solutions:{
      x_1:'y_1/(a_1 - b_1 + c_1 - d_1)',
      a_1:'y_1/x_1 + b_1 - c_1 + d_1',
      b_1:'a_1 + c_1 - d_1 - y_1/x_1',
      c_1:'y_1/x_1 - a_1 + b_1 + d_1',
      d_1:'a_1 - b_1 + c_1 - y_1/x_1',
      y_1:'x_1*(a_1 - b_1 + c_1 - d_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_M1_igual_x1g1_mas_x1mu1_h1',
    nivel:7, categoria:'fisica',
    display:'M₁ = x₁ g₁ + x₁ μ₁ h₁', tex:'M_{1}=x_{1}g_{1}+x_{1}\\mu_{1}h_{1}',
    vars:['M_1','x_1','g_1','mu_1','h_1'],
    solutions:{
      x_1:'M_1/(g_1 + mu_1*h_1)',
      g_1:'M_1/x_1 - mu_1*h_1',
      mu_1:'(M_1/x_1 - g_1)/h_1',
      h_1:'(M_1/x_1 - g_1)/mu_1',
      M_1:'x_1*(g_1 + mu_1*h_1)'
    },
    constraints:{ nonZero:['x_1','mu_1','h_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_Q1_igual_x1_k1sobreR1_mas_1sobrer1',
    nivel:7, categoria:'matematicas',
    display:'Q₁ = x₁ (k₁/R₁ + 1/r₁)', tex:'Q_{1}=x_{1}\\left(\\tfrac{k_{1}}{R_{1}}+\\tfrac{1}{r_{1}}\\right)',
    vars:['Q_1','x_1','k_1','R_1','r_1'],
    solutions:{
      x_1:'Q_1 / (k_1/R_1 + 1/r_1)',
      k_1:'R_1*(Q_1/x_1 - 1/r_1)',
      R_1:'k_1/(Q_1/x_1 - 1/r_1)',
      r_1:'1/(Q_1/x_1 - k_1/R_1)',
      Q_1:'x_1*(k_1/R_1 + 1/r_1)'
    },
    constraints:{ nonZero:['x_1','R_1','r_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_S1_igual_x1A1_mas_B1x1_mas_B1l1',
    nivel:7, categoria:'matematicas',
    display:'S₁ = x₁ A₁ + B₁(x₁ + ℓ₁)', tex:'S_{1}=x_{1}A_{1}+B_{1}(x_{1}+\\ell_{1})',
    vars:['S_1','x_1','A_1','B_1','l_1'],
    solutions:{
      x_1:'(S_1 - B_1*l_1)/(A_1 + B_1)',
      A_1:'(S_1 - B_1*l_1)/x_1 - B_1',
      B_1:'(S_1 - x_1*A_1)/(x_1 + l_1)',
      l_1:'(S_1 - x_1*(A_1 + B_1))/B_1',
      S_1:'x_1*(A_1 + B_1) + B_1*l_1'
    },
    constraints:{ nonZero:['x_1','B_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_0_igual_x1_alpha1_mas_beta1_menos_gamma1',
    nivel:7, categoria:'matematicas',
    display:'0 = x₁(α₁ + β₁) - γ₁', tex:'0=x_{1}(\\alpha_{1}+\\beta_{1})-\\gamma_{1}',
    vars:['alpha_1','beta_1','x_1','gamma_1'],
    solutions:{
      x_1:'gamma_1/(alpha_1 + beta_1)',
      alpha_1:'gamma_1/x_1 - beta_1',
      beta_1:'gamma_1/x_1 - alpha_1',
      gamma_1:'x_1*(alpha_1 + beta_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_T1_igual_x1lambda1_mas_mu1_mas_nu1x1',
    nivel:7, categoria:'matematicas',
    display:'T₁ = x₁ λ₁ + μ₁ + ν₁ x₁', tex:'T_{1}=x_{1}\\lambda_{1}+\\mu_{1}+\\nu_{1}x_{1}',
    vars:['T_1','x_1','lambda_1','mu_1','nu_1'],
    solutions:{
      x_1:'(T_1 - mu_1)/(lambda_1 + nu_1)',
      lambda_1:'(T_1 - mu_1)/x_1 - nu_1',
      nu_1:'(T_1 - mu_1)/x_1 - lambda_1',
      mu_1:'T_1 - x_1*(lambda_1 + nu_1)',
      T_1:'x_1*(lambda_1 + nu_1) + mu_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_V1_igual_x1_a1_mas_b1_mas_c1_mas_d1',
    nivel:7, categoria:'matematicas',
    display:'V₁ = x₁(a₁ + b₁ + c₁) + d₁', tex:'V_{1}=x_{1}(a_{1}+b_{1}+c_{1})+d_{1}',
    vars:['V_1','x_1','a_1','b_1','c_1','d_1'],
    solutions:{
      x_1:'(V_1 - d_1)/(a_1 + b_1 + c_1)',
      a_1:'(V_1 - d_1)/x_1 - (b_1 + c_1)',
      b_1:'(V_1 - d_1)/x_1 - (a_1 + c_1)',
      c_1:'(V_1 - d_1)/x_1 - (a_1 + b_1)',
      d_1:'V_1 - x_1*(a_1 + b_1 + c_1)',
      V_1:'x_1*(a_1 + b_1 + c_1) + d_1'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_sub_W1_igual_x1_k1_menos_m1_menos_n1',
    nivel:7, categoria:'matematicas',
    display:'W₁ = x₁(k₁ - m₁) - n₁ x₁', tex:'W_{1}=x_{1}(k_{1}-m_{1})-n_{1}x_{1}',
    vars:['W_1','x_1','k_1','m_1','n_1'],
    solutions:{
      x_1:'W_1/(k_1 - m_1 - n_1)',
      k_1:'W_1/x_1 + m_1 + n_1',
      m_1:'k_1 - n_1 - W_1/x_1',
      n_1:'k_1 - m_1 - W_1/x_1',
      W_1:'x_1*(k_1 - m_1 - n_1)'
    },
    constraints:{ nonZero:['x_1'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_alphax_mas_betax_igual_gamma',
    nivel:7, categoria:'matematicas',
    display:'α x + β x = γ', tex:'\\alpha x+\\beta x=\\gamma',
    vars:['alpha','beta','x','gamma'],
    solutions:{
      x:'gamma/(alpha + beta)',
      alpha:'gamma/x - beta',
      beta:'gamma/x - alpha',
      gamma:'(alpha + beta)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_x_alpha_mas_beta_igual_gamma',
    nivel:7, categoria:'matematicas',
    display:'x(α + β) = γ', tex:'x(\\alpha+\\beta)=\\gamma',
    vars:['x','alpha','beta','gamma'],
    solutions:{
      x:'gamma/(alpha + beta)',
      alpha:'gamma/x - beta',
      beta:'gamma/x - alpha',
      gamma:'x*(alpha + beta)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_kappax_mas_lambdax_igual_mu',
    nivel:7, categoria:'matematicas',
    display:'κ x + λ x = μ', tex:'\\kappa x+\\lambda x=\\mu',
    vars:['kappa','lambda','x','mu'],
    solutions:{
      x:'mu/(kappa + lambda)',
      kappa:'mu/x - lambda',
      lambda:'mu/x - kappa',
      mu:'(kappa + lambda)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_xalpha_menos_beta_mas_gammax_igual_delta',
    nivel:7, categoria:'matematicas',
    display:'x(α - β) + γ x = δ', tex:'x(\\alpha-\\beta)+\\gamma x=\\delta',
    vars:['alpha','beta','gamma','x','delta'],
    solutions:{
      x:'delta/(alpha - beta + gamma)',
      alpha:'beta + delta/x - gamma',
      beta:'alpha + gamma - delta/x',
      gamma:'delta/x - (alpha - beta)',
      delta:'x*(alpha - beta + gamma)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_phix_menos_psix_igual_omega',
    nivel:7, categoria:'matematicas',
    display:'φ x - ψ x = ω', tex:'\\phi x-\\psi x=\\omega',
    vars:['phi','psi','x','omega'],
    solutions:{
      x:'omega/(phi - psi)',
      phi:'omega/x + psi',
      psi:'phi - omega/x',
      omega:'(phi - psi)*x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_x1_mas_lambda_igual_mu_mas_nux',
    nivel:7, categoria:'matematicas',
    display:'x(1 + λ) = μ + ν x', tex:'x(1+\\lambda)=\\mu+\\nu x',
    vars:['x','lambda','mu','nu'],
    solutions:{
      x:'mu/(1 + lambda - nu)',
      lambda:'mu/x + nu - 1',
      mu:'x*(1 + lambda - nu)',
      nu:'1 + lambda - mu/x'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_xA_mas_B_mas_Cx_mas_CD_igual_E',
    nivel:7, categoria:'matematicas',
    display:'x(A + B) + C(x + D) = E', tex:'x(A+B)+C(x+D)=E',
    vars:['A','B','C','D','x','E'],
    solutions:{
      x:'(E - C*D)/(A + B + C)',
      A:'(E - C*D)/x - (B + C)',
      B:'(E - C*D)/x - (A + C)',
      C:'(E - x*(A + B))/(x + D)',
      D:'(E - x*(A + B + C))/C',
      E:'x*(A + B + C) + C*D'
    },
    constraints:{ nonZero:['x','C'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_xrho_mas_sigma_mas_tau_igual_upsilon',
    nivel:7, categoria:'matematicas',
    display:'x(ρ + σ + τ) = υ', tex:'x(\\rho+\\sigma+\\tau)=\\upsilon',
    vars:['x','rho','sigma','tau','upsilon'],
    solutions:{
      x:'upsilon/(rho + sigma + tau)',
      rho:'upsilon/x - (sigma + tau)',
      sigma:'upsilon/x - (rho + tau)',
      tau:'upsilon/x - (rho + sigma)',
      upsilon:'x*(rho + sigma + tau)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_x_por_1sobrealpha_mas_1sobrebeta_igual_gamma',
    nivel:7, categoria:'matematicas',
    display:'x(1/α + 1/β) = γ', tex:'x\\left(\\tfrac{1}{\\alpha}+\\tfrac{1}{\\beta}\\right)=\\gamma',
    vars:['x','alpha','beta','gamma'],
    solutions:{
      x:'gamma / (1/alpha + 1/beta)',
      alpha:'x*beta/(gamma*beta - x)',
      beta:'x*alpha/(gamma*alpha - x)',
      gamma:'x*(1/alpha + 1/beta)'
    },
    constraints:{ nonZero:['alpha','beta'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_x1_menos_eta_igual_kappa1_mas_eta',
    nivel:7, categoria:'matematicas',
    display:'x(1 - η) = κ(1 + η)', tex:'x(1-\\eta)=\\kappa(1+\\eta)',
    vars:['x','eta','kappa'],
    solutions:{
      x:'kappa*(1 + eta)/(1 - eta)',
      eta:'(x - kappa)/(x + kappa)',
      kappa:'x*(1 - eta)/(1 + eta)'
    },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_phi_menos_psi_por_x_mas_omega_x_igual_zeta',
    nivel:7, categoria:'matematicas',
    display:'(φ - ψ)x + ω x = ζ', tex:'(\\phi-\\psi)x+\\omega x=\\zeta',
    vars:['phi','psi','omega','x','zeta'],
    solutions:{
      x:'zeta/(phi - psi + omega)',
      phi:'psi - omega + zeta/x',
      psi:'phi + omega - zeta/x',
      omega:'zeta/x - (phi - psi)',
      zeta:'x*(phi - psi + omega)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_P_igual_xPhi_mas_W',
    nivel:7, categoria:'matematicas',
    display:'P = x Φ + W', tex:'P=x\\Phi+W',
    vars:['P','x','Phi','W'],
    solutions:{
      x:'(P - W)/Phi',
      Phi:'(P - W)/x',
      W:'P - x*Phi',
      P:'x*Phi + W'
    },
    constraints:{ nonZero:['x','Phi'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_y_igual_xalpha_menos_beta_mas_gamma_menos_delta_por_x',
    nivel:7, categoria:'matematicas',
    display:'y = x(α - β) + (γ - δ) x', tex:'y=x(\\alpha-\\beta)+(\\gamma-\\delta)x',
    vars:['y','x','alpha','beta','gamma','delta'],
    solutions:{
      x:'y/(alpha - beta + gamma - delta)',
      alpha:'y/x + beta - gamma + delta',
      beta:'alpha + gamma - delta - y/x',
      gamma:'y/x - alpha + beta + delta',
      delta:'alpha - beta + gamma - y/x',
      y:'x*(alpha - beta + gamma - delta)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_M_igual_xg_mas_xmu_h',
    nivel:7, categoria:'fisica',
    display:'M = x g + x μ h', tex:'M=xg+x\\mu h',
    vars:['M','x','g','mu','h'],
    solutions:{
      x:'M/(g + mu*h)',
      g:'M/x - mu*h',
      mu:'(M/x - g)/h',
      h:'(M/x - g)/mu',
      M:'x*(g + mu*h)'
    },
    constraints:{ nonZero:['x','mu','h'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_Q_igual_x_kappa_sobre_R_mas_1_sobre_rho',
    nivel:7, categoria:'matematicas',
    display:'Q = x (κ/R + 1/ρ)', tex:'Q=x\\left(\\tfrac{\\kappa}{R}+\\tfrac{1}{\\rho}\\right)',
    vars:['Q','x','kappa','R','rho'],
    solutions:{
      x:'Q / (kappa/R + 1/rho)',
      kappa:'R*(Q/x - 1/rho)',
      R:'kappa/(Q/x - 1/rho)',
      rho:'1/(Q/x - kappa/R)',
      Q:'x*(kappa/R + 1/rho)'
    },
    constraints:{ nonZero:['x','R','rho'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_S_igual_xA_mas_Bx_mas_Blambda',
    nivel:7, categoria:'matematicas',
    display:'S = x A + B(x + λ)', tex:'S=xA+B(x+\\lambda)',
    vars:['S','x','A','B','lambda'],
    solutions:{
      x:'(S - B*lambda)/(A + B)',
      A:'(S - B*lambda)/x - B',
      B:'(S - x*A)/(x + lambda)',
      lambda:'(S - x*(A + B))/B',
      S:'x*(A + B) + B*lambda'
    },
    constraints:{ nonZero:['x','B'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_0_igual_xalpha_mas_beta_menos_gamma',
    nivel:7, categoria:'matematicas',
    display:'0 = x(α + β) - γ', tex:'0=x(\\alpha+\\beta)-\\gamma',
    vars:['alpha','beta','x','gamma'],
    solutions:{
      x:'gamma/(alpha + beta)',
      alpha:'gamma/x - beta',
      beta:'gamma/x - alpha',
      gamma:'x*(alpha + beta)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_T_igual_xlambda_mas_mu_mas_nu_x',
    nivel:7, categoria:'matematicas',
    display:'T = x λ + μ + ν x', tex:'T=x\\lambda+\\mu+\\nu x',
    vars:['T','x','lambda','mu','nu'],
    solutions:{
      x:'(T - mu)/(lambda + nu)',
      lambda:'(T - mu)/x - nu',
      nu:'(T - mu)/x - lambda',
      mu:'T - x*(lambda + nu)',
      T:'x*(lambda + nu) + mu'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_V_igual_xalpha_mas_beta_mas_gamma_mas_delta_mas_d',
    nivel:7, categoria:'matematicas',
    display:'V = x(α + β + γ) + δ', tex:'V=x(\\alpha+\\beta+\\gamma)+\\delta',
    vars:['V','x','alpha','beta','gamma','delta'],
    solutions:{
      x:'(V - delta)/(alpha + beta + gamma)',
      alpha:'(V - delta)/x - (beta + gamma)',
      beta:'(V - delta)/x - (alpha + gamma)',
      gamma:'(V - delta)/x - (alpha + beta)',
      delta:'V - x*(alpha + beta + gamma)',
      V:'x*(alpha + beta + gamma) + delta'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  {
    id:'l7_gk_W_igual_xkappa_menos_mu_menos_nu',
    nivel:7, categoria:'matematicas',
    display:'W = x(κ - μ) - ν x', tex:'W=x(\\kappa-\\mu)-\\nu x',
    vars:['W','x','kappa','mu','nu'],
    solutions:{
      x:'W/(kappa - mu - nu)',
      kappa:'W/x + mu + nu',
      mu:'kappa - nu - W/x',
      nu:'kappa - mu - W/x',
      W:'x*(kappa - mu - nu)'
    },
    constraints:{ nonZero:['x'] },
    tags:['factorizacion']
  },
  // 1) s = v0 t + 1/2 a t^2 y v = v0 + a t  ⇒  s = v t - (1/2) a t^2
  {
    id:'l8_s_v0t_12at2_y_v_v0_at',
    nivel:8, categoria:'fisica',
    display:'s = v₀ t + (1/2) a t²;  v = v₀ + a t',
    tex:'s=v_{0}t+\\tfrac12 a t^{2},\\quad v=v_{0}+at',
    vars:['s','v0','a','t','v'],
    solutions:{
      // desde s = v t - (1/2) a t^2
      t:'(v ± sqrt(v^2 - 2*a*s))/a',
      v:'(s + 0.5*a*t^2)/t',
      a:'2*(v*t - s)/t^2',
      s:'v*t - 0.5*a*t^2',
      v0:'v - a*t'
    },
    constraints:{ nonZero:['a','t'], notes:['Discriminante v^2 - 2 a s ≥ 0'] },
    tags:['cinemática','cuadrática']
  },

  // 2) F = k x y Ek = (1/2) k x^2  ⇒  Ek = (1/2) F x
  {
    id:'l8_F_kx_y_Ek_12k_x2',
    nivel:8, categoria:'fisica',
    display:'F = k x;  E_k = (1/2) k x²',
    tex:'F=kx,\\quad E_k=\\tfrac12 k x^{2}',
    vars:['F','k','x','Ek'],
    solutions:{
      x:'2*Ek/F',
      F:'2*Ek/x',
      k:'F/x',          // == 2Ek/x^2
      Ek:'0.5*F*x'
    },
    constraints:{ nonZero:['F','x'] },
    tags:['resorte','energía']
  },

  // 3) p = ρ g h y ρ = m/V  ⇒  p = (m/V) g h
  {
    id:'l8_p_rho_g_h_y_rho_m_sobre_V',
    nivel:8, categoria:'fisica',
    display:'p = ρ g h;  ρ = m/V',
    tex:'p=\\rho g h,\\quad \\rho=\\tfrac{m}{V}',
    vars:['p','rho','g','h','m','V'],
    solutions:{
      V:'m*g*h/p',
      p:'rho*g*h',
      rho:'p/(g*h)',
      g:'p*V/(m*h)',
      h:'p*V/(m*g)',
      m:'p*V/(g*h)'
    },
    constraints:{ nonZero:['p','g','h'] },
    tags:['fluidos']
  },

  // 4) P = I V y V = E - I R  ⇒  P = IE - I^2 R
  {
    id:'l8_P_IV_y_V_E_menos_IR',
    nivel:8, categoria:'electricidad',
    display:'P = I V;  V = E - I R',
    tex:'P=IV,\\quad V=E-IR',
    vars:['P','E','R','I','V'],
    solutions:{
      I:'(E ± sqrt(E^2 - 4*P*R))/(2*R)',
      P:'I*(E - I*R)',
      E:'P/I + I*R',
      R:'(E*I - P)/I^2',
      V:'E - I*R'
    },
    constraints:{ nonZero:['R','I'], notes:['Discriminante E^2 - 4 P R ≥ 0'] },
    tags:['circuitos','cuadrática']
  },

  // 5) v^2 = v0^2 + 2 a x y a = F/m  ⇒  v^2 = v0^2 + 2 (F/m) x
  {
    id:'l8_v2_v02_2ax_y_a_F_sobre_m',
    nivel:8, categoria:'fisica',
    display:'v² = v₀² + 2 a x;  a = F/m',
    tex:'v^{2}=v_{0}^{2}+2ax,\\quad a=F/m',
    vars:['v','v0','a','x','F','m'],
    solutions:{
      F:'m*(v^2 - v0^2)/(2*x)',
      x:'m*(v^2 - v0^2)/(2*F)',
      m:'2*F*x/(v^2 - v0^2)',
      a:'F/m',
      v:'sqrt(v0^2 + 2*(F/m)*x)',
      v0:'sqrt(v^2 - 2*(F/m)*x)'
    },
    constraints:{ nonZero:['x','F','m'], notes:['v^2 - v0^2 y radicandos ≥ 0'] },
    tags:['dinámica','cuadrática']
  },

  // 6) Q = m c ΔT y ΔT = T_f - T_i
  {
    id:'l8_Q_mcDeltaT_y_DeltaT_Tf_menos_Ti',
    nivel:8, categoria:'fisica',
    display:'Q = m c (T_f - T_i)',
    tex:'Q=mc\\,(T_{f}-T_{i})',
    vars:['Q','m','c','Tf','Ti','DeltaT'],
    solutions:{
      c:'Q/(m*(Tf - Ti))',
      m:'Q/(c*(Tf - Ti))',
      DeltaT:'Q/(m*c)',
      Tf:'Ti + Q/(m*c)',
      Ti:'Tf - Q/(m*c)',
      Q:'m*c*(Tf - Ti)'
    },
    constraints:{ nonZero:['m','c','Tf','Ti'], notes:['Tf ≠ Ti'] },
    tags:['calorimetría']
  },

  // 7) P = W/t y W = F d  ⇒  P = F d / t
  {
    id:'l8_P_W_sobre_t_y_W_Fd',
    nivel:8, categoria:'fisica',
    display:'P = W/t;  W = F d',
    tex:'P=\\tfrac{W}{t},\\quad W=Fd',
    vars:['P','W','t','F','d'],
    solutions:{
      d:'P*t/F',
      F:'P*t/d',
      t:'W/P',        // o  (F d)/P
      W:'F*d',
      P:'F*d/t'
    },
    constraints:{ nonZero:['P','F','d','t'] },
    tags:['potencia','trabajo']
  },

  // 8) V = Q/C y C = ε A / d  ⇒  V = Q d / (ε A)
  {
    id:'l8_V_Q_sobre_C_y_C_epsA_sobre_d',
    nivel:8, categoria:'electricidad',
    display:'V = Q/C;  C = εA/d',
    tex:'V=\\tfrac{Q}{C},\\quad C=\\tfrac{\\varepsilon A}{d}',
    vars:['V','Q','C','eps','A','d'],
    solutions:{
      d:'V*eps*A/Q',
      V:'Q*d/(eps*A)',
      Q:'V*eps*A/d',
      eps:'Q*d/(V*A)',
      A:'Q*d/(V*eps)',
      C:'eps*A/d'
    },
    constraints:{ nonZero:['V','Q','eps','A','d'] },
    tags:['capacitancia']
  },

  // 9) T = 2π √(L/g) y g = g0 (1 - α h)
  {
    id:'l8_T_2pi_raiz_L_sobre_g_y_g_g0_1_menos_alphah',
    nivel:8, categoria:'fisica',
    display:'T = 2π √(L/g),  g = g₀(1 - αh)',
    tex:'T=2\\pi\\sqrt{\\tfrac{L}{g}},\\quad g=g_{0}(1-\\alpha h)',
    vars:['T','L','g0','alpha','h','g'],
    solutions:{
      h:'(1 - 4*pi^2*L/(g0*T^2))/alpha',
      L:'g0*(1 - alpha*h)*T^2/(4*pi^2)',
      g0:'4*pi^2*L/(T^2*(1 - alpha*h))',
      alpha:'(1 - 4*pi^2*L/(g0*T^2))/h',
      T:'2*pi*sqrt(L/(g0*(1 - alpha*h)))',
      g:'g0*(1 - alpha*h)'
    },
    constraints:{ nonZero:['alpha','T'], notes:['1 - αh > 0, L>0, g0>0'] },
    tags:['péndulo']
  },

  // 10) R = ρ L / A y A = π r^2  ⇒  R = ρ L/(π r^2)
  {
    id:'l8_R_rhoL_sobre_A_y_A_pi_r2',
    nivel:8, categoria:'electricidad',
    display:'R = ρ L/A;  A = π r²',
    tex:'R=\\tfrac{\\rho L}{A},\\quad A=\\pi r^{2}',
    vars:['R','rho','L','A','r'],
    solutions:{
      r:'sqrt(rho*L/(pi*R))',
      R:'rho*L/(pi*r^2)',
      rho:'R*pi*r^2/L',
      L:'R*pi*r^2/rho',
      A:'pi*r^2'
    },
    constraints:{ nonZero:['R','rho','L','r'] },
    tags:['resistividad','geometría']
  },

  // 11) s = 1/2 (v + v0) t y v = v0 + a t  ⇒  s = v0 t + 1/2 a t^2
  {
    id:'l8_s_12_vmasv0_t_y_v_v0_at',
    nivel:8, categoria:'fisica',
    display:'s = (1/2)(v + v₀)t;  v = v₀ + a t',
    tex:'s=\\tfrac12(v+v_{0})t,\\quad v=v_{0}+at',
    vars:['s','v','v0','a','t'],
    solutions:{
      t:'(-v0 ± sqrt(v0^2 + 2*a*s))/a',
      a:'2*(s - v0*t)/t^2',
      v0:'(s - 0.5*a*t^2)/t',
      v:'v0 + a*t',
      s:'v0*t + 0.5*a*t^2'
    },
    constraints:{ nonZero:['a','t'], notes:['Discriminante v0^2 + 2 a s ≥ 0'] },
    tags:['cinemática','cuadrática']
  },

  // 12) E = Q^2/(2C) y C = εA/d  ⇒  E = Q^2 d/(2 ε A)
  {
    id:'l8_E_Q2_sobre_2C_y_C_epsA_sobre_d',
    nivel:8, categoria:'electricidad',
    display:'E = Q²/(2C);  C = εA/d',
    tex:'E=\\tfrac{Q^{2}}{2C},\\quad C=\\tfrac{\\varepsilon A}{d}',
    vars:['E','Q','C','eps','A','d'],
    solutions:{
      Q:'sqrt(2*eps*A*E/d)',
      d:'2*eps*A*E/Q^2',
      eps:'Q^2*d/(2*A*E)',
      A:'Q^2*d/(2*eps*E)',
      C:'eps*A/d',
      E:'Q^2*d/(2*eps*A)'
    },
    constraints:{ nonZero:['Q','eps','A','d'], notes:['E ≥ 0'] },
    tags:['energía','capacitor']
  },

  // 13) pV = nRT y n = m/M  ⇒  pV = (m/M) R T
  {
    id:'l8_pV_nRT_y_n_m_sobre_M',
    nivel:8, categoria:'fisica',
    display:'pV = nRT;  n = m/M',
    tex:'pV=nRT,\\quad n=\\tfrac{m}{M}',
    vars:['p','V','n','R','T','m','M'],
    solutions:{
      T:'p*V*M/(m*R)',
      p:'m*R*T/(M*V)',
      V:'m*R*T/(M*p)',
      m:'p*V*M/(R*T)',
      M:'m*R*T/(p*V)',
      n:'m/M'
    },
    constraints:{ nonZero:['p','V','R','T','m','M'] },
    tags:['gas ideal']
  },

  // 14) f = 1/T y T = 2π √(L/g)  ⇒  f = (1/2π) √(g/L)
  {
    id:'l8_f_1_sobre_T_y_T_2pi_raiz_L_sobre_g',
    nivel:8, categoria:'fisica',
    display:'f = 1/T;  T = 2π √(L/g)',
    tex:'f=\\tfrac{1}{T},\\quad T=2\\pi\\sqrt{\\tfrac{L}{g}}',
    vars:['f','T','L','g'],
    solutions:{
      L:'g/(4*pi^2*f^2)',
      f:'1/T',
      T:'2*pi*sqrt(L/g)',
      g:'4*pi^2*f^2*L'
    },
    constraints:{ nonZero:['f','T'] },
    tags:['oscilaciones']
  },

  // 15) F_d = (1/2) C_d ρ A v^2 y P = F_d v  ⇒  P = (1/2) C_d ρ A v^3
  {
    id:'l8_Fd_12_Cd_rho_A_v2_y_P_Fd_v',
    nivel:8, categoria:'fisica',
    display:'F_d = (1/2) C_d ρ A v²;  P = F_d v',
    tex:'F_{d}=\\tfrac12 C_{d}\\rho A v^{2},\\quad P=F_{d}v',
    vars:['Fd','P','Cd','rho','A','v'],
    solutions:{
      v:'(2*P/(Cd*rho*A))^(1/3)',
      P:'0.5*Cd*rho*A*v^3',
      Fd:'0.5*Cd*rho*A*v^2',
      Cd:'2*P/(rho*A*v^3)',
      rho:'2*P/(Cd*A*v^3)',
      A:'2*P/(Cd*rho*v^3)'
    },
    constraints:{ nonZero:['Cd','rho','A','v'] },
    tags:['flujo','potencia']
  },

  // 16) E_p = m g h y h = v^2/(2g)  ⇒  E_p = (1/2) m v^2
  {
    id:'l8_Ep_mgh_y_h_v2_sobre_2g',
    nivel:8, categoria:'fisica',
    display:'E_p = m g h;  h = v²/(2g)',
    tex:'E_{p}=mgh,\\quad h=\\tfrac{v^{2}}{2g}',
    vars:['Ep','m','g','h','v'],
    solutions:{
      v:'sqrt(2*Ep/m)',
      Ep:'0.5*m*v^2',
      h:'Ep/(m*g)',
      g:'Ep/(m*h)',
      m:'2*Ep/v^2'
    },
    constraints:{ nonZero:['m','g','v'] },
    tags:['energía','cinemática']
  },

  // 17) v = ω r y a_c = ω^2 r  ⇒  a_c = v^2 / r
  {
    id:'l8_v_omega_r_y_ac_omega2_r',
    nivel:8, categoria:'fisica',
    display:'v = ω r;  a_c = ω² r',
    tex:'v=\\omega r,\\quad a_{c}=\\omega^{2}r',
    vars:['v','omega','r','ac'],
    solutions:{
      r:'v^2/ac',
      v:'sqrt(ac*r)',
      omega:'v/r',              // == sqrt(ac/r)
      ac:'v^2/r'
    },
    constraints:{ nonZero:['r','ac'] },
    tags:['movimiento circular']
  },

  // 18) I = V/R_eq y R_eq = (R1 R2)/(R1 + R2)
  {
    id:'l8_I_V_sobre_Req_y_Req_paralelo_R1_R2',
    nivel:8, categoria:'electricidad',
    display:'I = V/R_eq;  R_eq = (R₁R₂)/(R₁+R₂)',
    tex:'I=\\tfrac{V}{R_{eq}},\\quad R_{eq}=\\tfrac{R_{1}R_{2}}{R_{1}+R_{2}}',
    vars:['I','V','Req','R1','R2'],
    solutions:{
      R2:'V*R1/(I*R1 - V)',
      R1:'V*R2/(I*R2 - V)',
      Req:'R1*R2/(R1 + R2)',
      I:'V*(R1 + R2)/(R1*R2)',
      V:'I*R1*R2/(R1 + R2)'
    },
    constraints:{ nonZero:['I','V','R1','R2'], notes:['Evitar I R₁ = V y I R₂ = V'] },
    tags:['paralelo','circuitos']
  },

  // 19) P = I^2 R y I = V/R  ⇒  P = V^2 / R
  {
    id:'l8_P_I2R_y_I_V_sobre_R',
    nivel:8, categoria:'electricidad',
    display:'P = I² R;  I = V/R',
    tex:'P=I^{2}R,\\quad I=\\tfrac{V}{R}',
    vars:['P','I','R','V'],
    solutions:{
      R:'V^2/P',
      V:'sqrt(P*R)',
      I:'sqrt(P/R)',
      P:'V^2/R'        // o I^2 R
    },
    constraints:{ nonZero:['P','R'] },
    tags:['potencia','circuitos']
  },

  // 20) y = a e^{b x} y b = ln(k)/x  ⇒  y = a k
  {
    id:'l8_y_a_e_bx_y_b_ln_k_sobre_x',
    nivel:8, categoria:'matematicas',
    display:'y = a e^{b x};  b = ln(k)/x',
    tex:'y=a e^{bx},\\quad b=\\tfrac{\\ln k}{x}',
    vars:['y','a','b','k','x'],
    solutions:{
      y:'a*k',
      a:'y/k',
      k:'y/a',
      b:'ln(k)/x',
      x:'ln(k)/b'
    },
    constraints:{ nonZero:['a','k','b','x'], notes:['k>0, y/a = k'] },
    tags:['exponencial','sustitución']
  },
  // 1) x = x0 + v t ; v = v0 + a t  ⇒  x = x0 + v0 t + a t^2
  {
    id:'l8e1_x_x0_vt_y_v_v0_at',
    nivel:8, categoria:'fisica',
    display:'x = x₀ + v t;  v = v₀ + a t',
    tex:'x=x_{0}+vt,\\quad v=v_{0}+at',
    vars:['x','x0','v','v0','a','t'],
    solutions:{
      t:'(-v0 ± sqrt(v0^2 - 4*a*(x0 - x)))/(2*a)',
      v:'v0 + a*t',
      v0:'(x - x0 - a*t^2)/t',
      a:'(x - x0 - v0*t)/t^2',
      x0:'x - v0*t - a*t^2',
      x:'x0 + v0*t + a*t^2'
    },
    constraints:{ nonZero:['a','t'], notes:['Discriminante v0^2 - 4 a (x0 - x) ≥ 0; t≠0 para v0'] },
    tags:['cinemática','cuadrática']
  },

  // 2) I = V/(R1+R2)
  {
    id:'l8e2_I_V_sobre_R1masR2',
    nivel:8, categoria:'electricidad',
    display:'I = V/(R₁ + R₂)',
    tex:'I=\\tfrac{V}{R_{1}+R_{2}}',
    vars:['I','V','R1','R2'],
    solutions:{
      I:'V/(R1 + R2)',
      V:'I*(R1 + R2)',
      R1:'V/I - R2',
      R2:'V/I - R1'
    },
    constraints:{ notes:['R₁+R₂≠0; I≠0 si se usa V/I'] },
    tags:['ohm','series']
  },

  // 3) Q = C V y C = ε A / d  ⇒  Q = ε A V / d
  {
    id:'l8e3_Q_CV_y_C_epsA_sobre_d',
    nivel:8, categoria:'electricidad',
    display:'Q = C V;  C = εA/d',
    tex:'Q=CV,\\quad C=\\tfrac{\\varepsilon A}{d}',
    vars:['Q','C','V','eps','A','d'],
    solutions:{
      Q:'eps*A*V/d',
      V:'Q*d/(eps*A)',
      C:'eps*A/d',
      d:'eps*A*V/Q',
      eps:'Q*d/(A*V)',
      A:'Q*d/(eps*V)'
    },
    constraints:{ nonZero:['Q','V','eps','A','d'] },
    tags:['capacitor']
  },

  // 4) ω^2 = k/m y T = 2π/ω  ⇒  T = 2π√(m/k)
  {
    id:'l8e4_omega2_k_sobre_m_y_T_2pi_sobre_omega',
    nivel:8, categoria:'fisica',
    display:'ω² = k/m;  T = 2π/ω',
    tex:'\\omega^{2}=k/m,\\quad T=2\\pi/\\omega',
    vars:['omega','k','m','T'],
    solutions:{
      omega:'2*pi/T',
      T:'2*pi*sqrt(m/k)',
      k:'4*pi^2*m/T^2',
      m:'k*T^2/(4*pi^2)'
    },
    constraints:{ nonZero:['T','k'] },
    tags:['oscilaciones']
  },

  // 5) P = I^2 R y R = ρ L / A  ⇒  P = I^2 ρ L / A
  {
    id:'l8e5_P_I2R_y_R_rhoL_sobre_A',
    nivel:8, categoria:'electricidad',
    display:'P = I²R;  R = ρL/A',
    tex:'P=I^{2}R,\\quad R=\\tfrac{\\rho L}{A}',
    vars:['P','I','R','rho','L','A'],
    solutions:{
      P:'I^2*rho*L/A',
      I:'sqrt(P*A/(rho*L))',
      R:'rho*L/A',
      rho:'P*A/(I^2*L)',
      L:'P*A/(I^2*rho)',
      A:'I^2*rho*L/P'
    },
    constraints:{ nonZero:['I','rho','L','A','P'] },
    tags:['potencia','materiales']
  },

  // 6) E = 1/2 m v^2 y v = ω r
  {
    id:'l8e6_E_12mv2_y_v_omega_r',
    nivel:8, categoria:'fisica',
    display:'E = (1/2) m v²;  v = ω r',
    tex:'E=\\tfrac12 mv^{2},\\quad v=\\omega r',
    vars:['E','m','v','omega','r'],
    solutions:{
      E:'0.5*m*(omega*r)^2',
      v:'omega*r',
      omega:'v/r',
      r:'v/omega',
      m:'2*E/v^2'
    },
    constraints:{ nonZero:['v','r','omega'] },
    tags:['energía','circular']
  },

  // 7) F_c = m v^2 / r y v = 2π r / T
  {
    id:'l8e7_Fc_mv2_sobre_r_y_v_2pi_r_sobre_T',
    nivel:8, categoria:'fisica',
    display:'F_c = m v²/r;  v = 2πr/T',
    tex:'F_{c}=\\tfrac{mv^{2}}{r},\\quad v=\\tfrac{2\\pi r}{T}',
    vars:['Fc','m','v','r','T'],
    solutions:{
      v:'2*pi*r/T',
      T:'2*pi*r/v',
      Fc:'m*v^2/r',
      r:'Fc*T^2/(4*pi^2*m)',
      m:'Fc*T^2/(4*pi^2*r)'
    },
    constraints:{ nonZero:['r','T','m'] },
    tags:['circular','dinámica']
  },

  // 8) τ = R C y C = ε A / d  ⇒  τ = R ε A / d
  {
    id:'l8e8_tau_RC_y_C_epsA_sobre_d',
    nivel:8, categoria:'electricidad',
    display:'τ = RC;  C = εA/d',
    tex:'\\tau=RC,\\quad C=\\tfrac{\\varepsilon A}{d}',
    vars:['tau','R','C','eps','A','d'],
    solutions:{
      tau:'R*C',
      C:'eps*A/d',
      R:'tau/C',
      d:'eps*A*R/tau',
      eps:'tau*d/(R*A)',
      A:'tau*d/(R*eps)'
    },
    constraints:{ nonZero:['tau','R','C','eps','A','d'] },
    tags:['RC']
  },

  // 9) E_p = m g h y m = ρ V  ⇒  E_p = ρ V g h
  {
    id:'l8e9_Ep_mgh_y_m_rhoV',
    nivel:8, categoria:'fisica',
    display:'E_p = mgh;  m = ρV',
    tex:'E_{p}=mgh,\\quad m=\\rho V',
    vars:['Ep','m','rho','V','g','h'],
    solutions:{
      Ep:'rho*V*g*h',
      m:'rho*V',
      V:'Ep/(rho*g*h)',
      rho:'Ep/(V*g*h)',
      h:'Ep/(rho*V*g)',
      g:'Ep/(rho*V*h)'
    },
    constraints:{ nonZero:['rho','V','g','h'] },
    tags:['energía','fluidos']
  },

  // 10) a = F/m y F = k x  ⇒  a = k x / m
  {
    id:'l8e10_a_F_sobre_m_y_F_kx',
    nivel:8, categoria:'fisica',
    display:'a = F/m;  F = kx',
    tex:'a=\\tfrac{F}{m},\\quad F=kx',
    vars:['a','F','m','k','x'],
    solutions:{
      a:'k*x/m',
      F:'m*a',
      m:'k*x/a',
      k:'a*m/x',
      x:'m*a/k'
    },
    constraints:{ nonZero:['a','m','k','x'] },
    tags:['dinámica','resorte']
  },

  // 11) p = m v;  v = v0 + a t
  {
    id:'l8e11_p_mv_y_v_v0_at',
    nivel:8, categoria:'fisica',
    display:'p = m v;  v = v₀ + a t',
    tex:'p=mv,\\quad v=v_{0}+at',
    vars:['p','m','v','v0','a','t'],
    solutions:{
      p:'m*(v0 + a*t)',
      v:'v0 + a*t',
      m:'p/v',
      t:'(v - v0)/a',
      a:'(v - v0)/t',
      v0:'v - a*t'
    },
    constraints:{ nonZero:['v','a','t'] },
    tags:['cantidad de movimiento']
  },

  // 12) v = λ f y f = 1/T  ⇒  v = λ / T
  {
    id:'l8e12_v_lambda_f_y_f_1_sobre_T',
    nivel:8, categoria:'ondas',
    display:'v = λ f;  f = 1/T',
    tex:'v=\\lambda f,\\quad f=\\tfrac{1}{T}',
    vars:['v','lambda','f','T'],
    solutions:{
      v:'lambda/T',
      lambda:'v*T',
      f:'v/lambda',
      T:'1/f'
    },
    constraints:{ nonZero:['lambda','f','T'] },
    tags:['ondas']
  },

  // 13) U = 1/2 k x^2 y F = k x  ⇒  U = 1/2 F x
  {
    id:'l8e13_U_12kx2_y_F_kx',
    nivel:8, categoria:'fisica',
    display:'U = (1/2) k x²;  F = k x',
    tex:'U=\\tfrac12 kx^{2},\\quad F=kx',
    vars:['U','k','x','F'],
    solutions:{
      U:'0.5*F*x',
      x:'2*U/F',
      F:'k*x',
      k:'2*U/x^2'
    },
    constraints:{ nonZero:['F','x'] },
    tags:['resorte','energía']
  },

  // 14) U = 1/2 C V^2 y C = ε A / d
  {
    id:'l8e14_U_12CV2_y_C_epsA_sobre_d',
    nivel:8, categoria:'electricidad',
    display:'U = (1/2) C V²;  C = εA/d',
    tex:'U=\\tfrac12 CV^{2},\\quad C=\\tfrac{\\varepsilon A}{d}',
    vars:['U','C','V','eps','A','d'],
    solutions:{
      U:'0.5*(eps*A/d)*V^2',
      V:'sqrt(2*U*d/(eps*A))',
      C:'2*U/V^2',
      d:'eps*A*V^2/(2*U)',
      eps:'2*U*d/(A*V^2)',
      A:'2*U*d/(eps*V^2)'
    },
    constraints:{ nonZero:['U','eps','A','d','V'] },
    tags:['energía','capacitor']
  },

  // 15) Φ = k A ΔT / L y A = π r^2
  {
    id:'l8e15_Flux_kADeltaT_sobre_L_y_A_pi_r2',
    nivel:8, categoria:'fisica',
    display:'Φ = k A ΔT / L;  A = π r²',
    tex:'\\Phi=\\tfrac{kA\\,\\Delta T}{L},\\quad A=\\pi r^{2}',
    vars:['Phi','k','A','DeltaT','L','r'],
    solutions:{
      Phi:'k*pi*r^2*DeltaT/L',
      r:'sqrt(Phi*L/(k*pi*DeltaT))',
      A:'Phi*L/(k*DeltaT)',
      k:'Phi*L/(A*DeltaT)',
      DeltaT:'Phi*L/(k*A)',
      L:'k*A*DeltaT/Phi'
    },
    constraints:{ nonZero:['k','A','DeltaT','L'] },
    tags:['conducción']
  },

  // 16) v_e = √(2GM/r) y g = GM/r^2  ⇒  v_e = √(2 g r)
  {
    id:'l8e16_ve_raiz_2GM_sobre_r_y_g_GM_sobre_r2',
    nivel:8, categoria:'fisica',
    display:'vₑ = √(2GM/r);  g = GM/r²',
    tex:'v_{e}=\\sqrt{\\tfrac{2GM}{r}},\\quad g=\\tfrac{GM}{r^{2}}',
    vars:['ve','G','M','r','g'],
    solutions:{
      ve:'sqrt(2*G*M/r)',
      r:'2*G*M/ve^2',
      G:'ve^2*r/(2*M)',
      M:'ve^2*r/(2*G)',
      g:'G*M/r^2'
    },
    constraints:{ nonZero:['r','M','G','ve'] },
    tags:['gravitación']
  },

  // 17) Q(t) = C V (1 - e^{-t/τ}) con τ = RC
  {
    id:'l8e17_Qt_CV_1_exp_menos_t_sobre_tau',
    nivel:8, categoria:'electricidad',
    display:'Q = C V (1 - e^{-t/τ})',
    tex:'Q=CV\\,(1-e^{-t/\\tau})',
    vars:['Q','C','V','t','tau'],
    solutions:{
      Q:'C*V*(1 - exp(-t/tau))',
      t:'-tau*ln(1 - Q/(C*V))',
      tau:'-t/ln(1 - Q/(C*V))',
      C:'Q/(V*(1 - exp(-t/tau)))',
      V:'Q/(C*(1 - exp(-t/tau)))'
    },
    constraints:{ notes:['0 < Q < C V para los logaritmos'] },
    tags:['RC','exponencial']
  },

  // 18) N = N0 e^{-λ t} y A = λ N  ⇒  A = λ N0 e^{-λ t}
  {
    id:'l8e18_N_N0_exp_menos_lambda_t_y_A_lambdaN',
    nivel:8, categoria:'fisica',
    display:'N = N₀ e^{-λt};  A = λN',
    tex:'N=N_{0}e^{-\\lambda t},\\quad A=\\lambda N',
    vars:['N','N0','lambda','t','A'],
    solutions:{
      N:'N0*exp(-lambda*t)',
      A:'lambda*N0*exp(-lambda*t)',
      t:'(1/lambda)*ln(lambda*N0/A)',
      lambda:'A/N',
      N0:'A*exp(lambda*t)/lambda'
    },
    constraints:{ nonZero:['lambda','N','A'] , notes:['A>0, N>0']},
    tags:['decaimiento']
  },

  // 19) ω = 2π f y f = 1/T  ⇒  ω = 2π/T
  {
    id:'l8e19_omega_2pi_f_y_f_1_sobre_T',
    nivel:8, categoria:'fisica',
    display:'ω = 2π f;  f = 1/T',
    tex:'\\omega=2\\pi f,\\quad f=\\tfrac1T',
    vars:['omega','f','T'],
    solutions:{
      omega:'2*pi*f',
      f:'omega/(2*pi)',
      T:'1/f'
    },
    constraints:{ nonZero:['f','T'] },
    tags:['frecuencia','periodo']
  },

  // 20) P = σ A T^4 y A = 4π r^2
  {
    id:'l8e20_P_sigmaAT4_y_A_4pi_r2',
    nivel:8, categoria:'fisica',
    display:'P = σ A T⁴;  A = 4π r²',
    tex:'P=\\sigma AT^{4},\\quad A=4\\pi r^{2}',
    vars:['P','sigma','A','T','r'],
    solutions:{
      P:'sigma*A*T^4',
      A:'P/(sigma*T^4)',
      T:'(P/(sigma*A))^(1/4)',
      r:'sqrt(P/(4*pi*sigma*T^4))',
      sigma:'P/(A*T^4)'
    },
    constraints:{ nonZero:['sigma','A','T'] },
    tags:['radiación']
  },
  {
    id:'l8s1_x1_x01_v1t1_y_v1_v01_a1t1',
    nivel:8, categoria:'fisica',
    display:'x₁ = x₀₁ + v₁ t₁;  v₁ = v₀₁ + a₁ t₁',
    tex:'x_{1}=x_{01}+v_{1}t_{1},\\quad v_{1}=v_{01}+a_{1}t_{1}',
    vars:['x_1','x01','v_1','v01','a_1','t_1'],
    solutions:{
      t_1:'(-v01 ± sqrt(v01^2 - 4*a_1*(x01 - x_1)))/(2*a_1)',
      v_1:'v01 + a_1*t_1',
      v01:'(x_1 - x01 - a_1*t_1^2)/t_1',
      a_1:'(x_1 - x01 - v01*t_1)/t_1^2',
      x01:'x_1 - v01*t_1 - a_1*t_1^2',
      x_1:'x01 + v01*t_1 + a_1*t_1^2'
    },
    constraints:{ nonZero:['a_1','t_1'] },
    tags:['cinemática','cuadrática']
  },

  {
    id:'l8s2_I1_V1_sobre_R11mas_R21',
    nivel:8, categoria:'electricidad',
    display:'I₁ = V₁/(R₁₁ + R₂₁)',
    tex:'I_{1}=\\tfrac{V_{1}}{R_{11}+R_{21}}',
    vars:['I_1','V_1','R11','R21'],
    solutions:{
      I_1:'V_1/(R11 + R21)',
      V_1:'I_1*(R11 + R21)',
      R11:'V_1/I_1 - R21',
      R21:'V_1/I_1 - R11'
    },
    tags:['ohm','series']
  },

  {
    id:'l8s3_Q1_C1V1_y_C1_eps1A1_sobre_d1',
    nivel:8, categoria:'electricidad',
    display:'Q₁ = C₁ V₁;  C₁ = ε₁A₁/d₁',
    tex:'Q_{1}=C_{1}V_{1},\\quad C_{1}=\\tfrac{\\varepsilon_{1}A_{1}}{d_{1}}',
    vars:['Q_1','C_1','V_1','eps_1','A_1','d_1'],
    solutions:{
      Q_1:'eps_1*A_1*V_1/d_1',
      V_1:'Q_1*d_1/(eps_1*A_1)',
      C_1:'eps_1*A_1/d_1',
      d_1:'eps_1*A_1*V_1/Q_1',
      eps_1:'Q_1*d_1/(A_1*V_1)',
      A_1:'Q_1*d_1/(eps_1*V_1)'
    },
    tags:['capacitor']
  },

  {
    id:'l8s4_omega1_2pi_sobre_T1_y_k1_4pi2m1_sobre_T12',
    nivel:8, categoria:'fisica',
    display:'ω₁ = 2π/T₁;  k₁ = 4π² m₁ / T₁²',
    tex:'\\omega_{1}=\\tfrac{2\\pi}{T_{1}},\\quad k_{1}=\\tfrac{4\\pi^{2}m_{1}}{T_{1}^{2}}',
    vars:['omega_1','k_1','m_1','T_1'],
    solutions:{
      omega_1:'2*pi/T_1',
      T_1:'2*pi*sqrt(m_1/k_1)',
      k_1:'4*pi^2*m_1/T_1^2',
      m_1:'k_1*T_1^2/(4*pi^2)'
    },
    tags:['oscilaciones']
  },

  {
    id:'l8s5_P1_I12R1_y_R1_rho1L1_sobre_A1',
    nivel:8, categoria:'electricidad',
    display:'P₁ = I₁² R₁;  R₁ = ρ₁ L₁ / A₁',
    tex:'P_{1}=I_{1}^{2}R_{1},\\quad R_{1}=\\tfrac{\\rho_{1}L_{1}}{A_{1}}',
    vars:['P_1','I_1','R_1','rho_1','L_1','A_1'],
    solutions:{
      P_1:'I_1^2*rho_1*L_1/A_1',
      I_1:'sqrt(P_1*A_1/(rho_1*L_1))',
      R_1:'rho_1*L_1/A_1',
      rho_1:'P_1*A_1/(I_1^2*L_1)',
      L_1:'P_1*A_1/(I_1^2*rho_1)',
      A_1:'I_1^2*rho_1*L_1/P_1'
    },
    tags:['potencia']
  },

  {
    id:'l8s6_E1_12m1v12_y_v1_omega1r1',
    nivel:8, categoria:'fisica',
    display:'E₁ = (1/2) m₁ v₁²;  v₁ = ω₁ r₁',
    tex:'E_{1}=\\tfrac12 m_{1}v_{1}^{2},\\quad v_{1}=\\omega_{1}r_{1}',
    vars:['E_1','m_1','v_1','omega_1','r_1'],
    solutions:{
      E_1:'0.5*m_1*(omega_1*r_1)^2',
      v_1:'omega_1*r_1',
      omega_1:'v_1/r_1',
      r_1:'v_1/omega_1',
      m_1:'2*E_1/v_1^2'
    },
    tags:['energía']
  },

  {
    id:'l8s7_Fc1_m1v12_sobre_r1_y_v1_2pi_r1_sobre_T1',
    nivel:8, categoria:'fisica',
    display:'F_{c1} = m₁ v₁²/r₁;  v₁ = 2π r₁ / T₁',
    tex:'F_{c1}=\\tfrac{m_{1}v_{1}^{2}}{r_{1}},\\quad v_{1}=\\tfrac{2\\pi r_{1}}{T_{1}}',
    vars:['Fc_1','m_1','v_1','r_1','T_1'],
    solutions:{
      v_1:'2*pi*r_1/T_1',
      T_1:'2*pi*r_1/v_1',
      Fc_1:'m_1*v_1^2/r_1',
      r_1:'Fc_1*T_1^2/(4*pi^2*m_1)',
      m_1:'Fc_1*T_1^2/(4*pi^2*r_1)'
    },
    tags:['circular']
  },

  {
    id:'l8s8_tau1_R1C1_y_C1_eps1A1_sobre_d1',
    nivel:8, categoria:'electricidad',
    display:'τ₁ = R₁ C₁;  C₁ = ε₁A₁/d₁',
    tex:'\\tau_{1}=R_{1}C_{1},\\quad C_{1}=\\tfrac{\\varepsilon_{1}A_{1}}{d_{1}}',
    vars:['tau_1','R_1','C_1','eps_1','A_1','d_1'],
    solutions:{
      tau_1:'R_1*C_1',
      C_1:'eps_1*A_1/d_1',
      R_1:'tau_1/C_1',
      d_1:'eps_1*A_1*R_1/tau_1',
      eps_1:'tau_1*d_1/(R_1*A_1)',
      A_1:'tau_1*d_1/(R_1*eps_1)'
    },
    tags:['RC']
  },

  {
    id:'l8s9_Ep1_rho1V1g1h1',
    nivel:8, categoria:'fisica',
    display:'E_{p1} = ρ₁ V₁ g₁ h₁',
    tex:'E_{p1}=\\rho_{1}V_{1}g_{1}h_{1}',
    vars:['Ep_1','rho_1','V_1','g_1','h_1'],
    solutions:{
      Ep_1:'rho_1*V_1*g_1*h_1',
      V_1:'Ep_1/(rho_1*g_1*h_1)',
      rho_1:'Ep_1/(V_1*g_1*h_1)',
      h_1:'Ep_1/(rho_1*V_1*g_1)',
      g_1:'Ep_1/(rho_1*V_1*h_1)'
    },
    tags:['energía']
  },

  {
    id:'l8s10_a1_k1x1_sobre_m1',
    nivel:8, categoria:'fisica',
    display:'a₁ = k₁ x₁ / m₁',
    tex:'a_{1}=\\tfrac{k_{1}x_{1}}{m_{1}}',
    vars:['a_1','k_1','x_1','m_1'],
    solutions:{
      a_1:'k_1*x_1/m_1',
      k_1:'a_1*m_1/x_1',
      x_1:'m_1*a_1/k_1',
      m_1:'k_1*x_1/a_1'
    },
    tags:['dinámica']
  },

  {
    id:'l8s11_p1_m1v1_y_v1_v01_a1t1',
    nivel:8, categoria:'fisica',
    display:'p₁ = m₁ v₁;  v₁ = v₀₁ + a₁ t₁',
    tex:'p_{1}=m_{1}v_{1},\\quad v_{1}=v_{01}+a_{1}t_{1}',
    vars:['p_1','m_1','v_1','v01','a_1','t_1'],
    solutions:{
      p_1:'m_1*(v01 + a_1*t_1)',
      v_1:'v01 + a_1*t_1',
      m_1:'p_1/v_1',
      t_1:'(v_1 - v01)/a_1',
      a_1:'(v_1 - v01)/t_1',
      v01:'v_1 - a_1*t_1'
    },
    tags:['momento lineal']
  },

  {
    id:'l8s12_v1_lambda1_sobre_T1',
    nivel:8, categoria:'ondas',
    display:'v₁ = λ₁ / T₁',
    tex:'v_{1}=\\tfrac{\\lambda_{1}}{T_{1}}',
    vars:['v_1','lambda_1','T_1'],
    solutions:{
      v_1:'lambda_1/T_1',
      lambda_1:'v_1*T_1',
      T_1:'lambda_1/v_1'
    },
    tags:['ondas']
  },

  {
    id:'l8s13_U1_12k1x12_y_F1_k1x1',
    nivel:8, categoria:'fisica',
    display:'U₁ = (1/2) k₁ x₁²;  F₁ = k₁ x₁',
    tex:'U_{1}=\\tfrac12 k_{1}x_{1}^{2},\\quad F_{1}=k_{1}x_{1}',
    vars:['U_1','k_1','x_1','F_1'],
    solutions:{
      U_1:'0.5*F_1*x_1',
      x_1:'2*U_1/F_1',
      F_1:'k_1*x_1',
      k_1:'2*U_1/x_1^2'
    },
    tags:['resorte']
  },

  {
    id:'l8s14_U1_12C1V12_y_C1_eps1A1_sobre_d1',
    nivel:8, categoria:'electricidad',
    display:'U₁ = (1/2) C₁ V₁²;  C₁ = ε₁A₁/d₁',
    tex:'U_{1}=\\tfrac12 C_{1}V_{1}^{2},\\quad C_{1}=\\tfrac{\\varepsilon_{1}A_{1}}{d_{1}}',
    vars:['U_1','C_1','V_1','eps_1','A_1','d_1'],
    solutions:{
      U_1:'0.5*(eps_1*A_1/d_1)*V_1^2',
      V_1:'sqrt(2*U_1*d_1/(eps_1*A_1))',
      C_1:'2*U_1/V_1^2',
      d_1:'eps_1*A_1*V_1^2/(2*U_1)',
      eps_1:'2*U_1*d_1/(A_1*V_1^2)',
      A_1:'2*U_1*d_1/(eps_1*V_1^2)'
    },
    tags:['energía','capacitor']
  },

  {
    id:'l8s15_Phi1_k1A1DeltaT1_sobre_L1_y_A1_pi_r12',
    nivel:8, categoria:'fisica',
    display:'Φ₁ = k₁ A₁ ΔT₁ / L₁;  A₁ = π r₁²',
    tex:'\\Phi_{1}=\\tfrac{k_{1}A_{1}\\Delta T_{1}}{L_{1}},\\quad A_{1}=\\pi r_{1}^{2}',
    vars:['Phi_1','k_1','A_1','DeltaT_1','L_1','r_1'],
    solutions:{
      Phi_1:'k_1*pi*r_1^2*DeltaT_1/L_1',
      r_1:'sqrt(Phi_1*L_1/(k_1*pi*DeltaT_1))',
      A_1:'Phi_1*L_1/(k_1*DeltaT_1)',
      k_1:'Phi_1*L_1/(A_1*DeltaT_1)',
      DeltaT_1:'Phi_1*L_1/(k_1*A_1)',
      L_1:'k_1*A_1*DeltaT_1/Phi_1'
    },
    tags:['conducción']
  },

  {
    id:'l8s16_ve1_raiz_2G1M1_sobre_r1',
    nivel:8, categoria:'fisica',
    display:'v_{e1} = √(2 G₁ M₁ / r₁)',
    tex:'v_{e1}=\\sqrt{\\tfrac{2 G_{1} M_{1}}{r_{1}}}',
    vars:['ve_1','G_1','M_1','r_1'],
    solutions:{
      ve_1:'sqrt(2*G_1*M_1/r_1)',
      r_1:'2*G_1*M_1/ve_1^2',
      G_1:'ve_1^2*r_1/(2*M_1)',
      M_1:'ve_1^2*r_1/(2*G_1)'
    },
    tags:['gravitación']
  },

  {
    id:'l8s17_Q1_C1V1_1_exp_menos_t1_sobre_tau1',
    nivel:8, categoria:'electricidad',
    display:'Q₁ = C₁ V₁ (1 - e^{-t₁/τ₁})',
    tex:'Q_{1}=C_{1}V_{1}\\,(1-e^{-t_{1}/\\tau_{1}})',
    vars:['Q_1','C_1','V_1','t_1','tau_1'],
    solutions:{
      Q_1:'C_1*V_1*(1 - exp(-t_1/tau_1))',
      t_1:'-tau_1*ln(1 - Q_1/(C_1*V_1))',
      tau_1:'-t_1/ln(1 - Q_1/(C_1*V_1))',
      C_1:'Q_1/(V_1*(1 - exp(-t_1/tau_1)))',
      V_1:'Q_1/(C_1*(1 - exp(-t_1/tau_1)))'
    },
    tags:['RC']
  },

  {
    id:'l8s18_N1_N01_exp_menos_lambda1_t1_y_A1_lambda1N1',
    nivel:8, categoria:'fisica',
    display:'N₁ = N₀₁ e^{-λ₁ t₁};  A₁ = λ₁ N₁',
    tex:'N_{1}=N_{01}e^{-\\lambda_{1}t_{1}},\\quad A_{1}=\\lambda_{1}N_{1}',
    vars:['N_1','N01','lambda_1','t_1','A_1'],
    solutions:{
      N_1:'N01*exp(-lambda_1*t_1)',
      A_1:'lambda_1*N01*exp(-lambda_1*t_1)',
      t_1:'(1/lambda_1)*ln(lambda_1*N01/A_1)',
      lambda_1:'A_1/N_1',
      N01:'A_1*exp(lambda_1*t_1)/lambda_1'
    },
    tags:['decaimiento']
  },

  {
    id:'l8s19_omega1_2pi_f1_y_f1_1_sobre_T1',
    nivel:8, categoria:'fisica',
    display:'ω₁ = 2π f₁;  f₁ = 1/T₁',
    tex:'\\omega_{1}=2\\pi f_{1},\\quad f_{1}=\\tfrac1{T_{1}}',
    vars:['omega_1','f_1','T_1'],
    solutions:{
      omega_1:'2*pi*f_1',
      f_1:'omega_1/(2*pi)',
      T_1:'1/f_1'
    },
    tags:['frecuencia']
  },

  {
    id:'l8s20_P1_sigma1A1T14_y_A1_4pi_r12',
    nivel:8, categoria:'fisica',
    display:'P₁ = σ₁ A₁ T₁⁴;  A₁ = 4π r₁²',
    tex:'P_{1}=\\sigma_{1}A_{1}T_{1}^{4},\\quad A_{1}=4\\pi r_{1}^{2}',
    vars:['P_1','sigma_1','A_1','T_1','r_1'],
    solutions:{
      P_1:'sigma_1*A_1*T_1^4',
      A_1:'P_1/(sigma_1*T_1^4)',
      T_1:'(P_1/(sigma_1*A_1))^(1/4)',
      r_1:'sqrt(A_1/(4*pi))',
      sigma_1:'P_1/(A_1*T_1^4)'
    },
    tags:['radiación']
  },
  // χ = χ0 + υ t ;  υ = υ0 + α t
  {
    id:'l8g1_chi_chi0_ups_t_y_ups_ups0_alpha_t',
    nivel:8, categoria:'fisica',
    display:'χ = χ₀ + υ t;  υ = υ₀ + α t',
    tex:'\\chi=\\chi_{0}+\\upsilon t,\\quad \\upsilon=\\upsilon_{0}+\\alpha t',
    vars:['chi','chi0','upsilon','upsilon0','alpha','t'],
    solutions:{
      t:'(-upsilon0 ± sqrt(upsilon0^2 - 4*alpha*(chi0 - chi)))/(2*alpha)',
      upsilon:'upsilon0 + alpha*t',
      upsilon0:'(chi - chi0 - alpha*t^2)/t',
      alpha:'(chi - chi0 - upsilon0*t)/t^2',
      chi0:'chi - upsilon0*t - alpha*t^2',
      chi:'chi0 + upsilon0*t + alpha*t^2'
    },
    constraints:{ nonZero:['alpha','t'] },
    tags:['cinemática','cuadrática']
  },

  // ι = V/(α+β)
  {
    id:'l8g2_iota_V_sobre_alpha_mas_beta',
    nivel:8, categoria:'electricidad',
    display:'ι = V/(α + β)',
    tex:'\\iota=\\tfrac{V}{\\alpha+\\beta}',
    vars:['iota','V','alpha','beta'],
    solutions:{
      iota:'V/(alpha + beta)',
      V:'iota*(alpha + beta)',
      alpha:'V/iota - beta',
      beta:'V/iota - alpha'
    },
    tags:['ohm','series']
  },

  // Q = C V ;  C = ε A / δ
  {
    id:'l8g3_Q_CV_y_C_epsA_sobre_delta',
    nivel:8, categoria:'electricidad',
    display:'Q = C V;  C = ε A / δ',
    tex:'Q=CV,\\quad C=\\tfrac{\\varepsilon A}{\\delta}',
    vars:['Q','C','V','eps','A','delta'],
    solutions:{
      Q:'eps*A*V/delta',
      V:'Q*delta/(eps*A)',
      C:'eps*A/delta',
      delta:'eps*A*V/Q',
      eps:'Q*delta/(A*V)',
      A:'Q*delta/(eps*V)'
    },
    tags:['capacitor']
  },

  // ω^2 = κ/μ ;  T = 2π/ω
  {
    id:'l8g4_omega2_kappa_sobre_mu_y_T_2pi_sobre_omega',
    nivel:8, categoria:'fisica',
    display:'ω² = κ/μ;  T = 2π/ω',
    tex:'\\omega^{2}=\\kappa/\\mu,\\quad T=2\\pi/\\omega',
    vars:['omega','kappa','mu','T'],
    solutions:{
      omega:'2*pi/T',
      T:'2*pi*sqrt(mu/kappa)',
      kappa:'4*pi^2*mu/T^2',
      mu:'kappa*T^2/(4*pi^2)'
    },
    tags:['oscilaciones']
  },

  // P = ι^2 ρ L / A
  {
    id:'l8g5_P_iota2_rho_L_sobre_A',
    nivel:8, categoria:'electricidad',
    display:'P = ι² ρ L / A',
    tex:'P=\\tfrac{\\iota^{2}\\rho L}{A}',
    vars:['P','iota','rho','L','A'],
    solutions:{
      P:'iota^2*rho*L/A',
      iota:'sqrt(P*A/(rho*L))',
      rho:'P*A/(iota^2*L)',
      L:'P*A/(iota^2*rho)',
      A:'iota^2*rho*L/P'
    },
    tags:['potencia','materiales']
  },

  // E = 1/2 μ υ^2 ;  υ = ω r
  {
    id:'l8g6_E_12_mu_ups2_y_ups_omega_r',
    nivel:8, categoria:'fisica',
    display:'E = (1/2) μ υ²;  υ = ω r',
    tex:'E=\\tfrac12 \\mu\\,\\upsilon^{2},\\quad \\upsilon=\\omega r',
    vars:['E','mu','upsilon','omega','r'],
    solutions:{
      E:'0.5*mu*(omega*r)^2',
      upsilon:'omega*r',
      omega:'upsilon/r',
      r:'upsilon/omega',
      mu:'2*E/upsilon^2'
    },
    tags:['energía','circular']
  },

  // Φ_c = m υ^2 / r ;  υ = 2π r / τ
  {
    id:'l8g7_Fc_m_ups2_sobre_r_y_ups_2pi_r_sobre_tau',
    nivel:8, categoria:'fisica',
    display:'F_c = m υ²/r;  υ = 2π r / τ',
    tex:'F_{c}=\\tfrac{m\\upsilon^{2}}{r},\\quad \\upsilon=\\tfrac{2\\pi r}{\\tau}',
    vars:['Fc','m','upsilon','r','tau'],
    solutions:{
      upsilon:'2*pi*r/tau',
      tau:'2*pi*r/upsilon',
      Fc:'m*upsilon^2/r',
      r:'Fc*tau^2/(4*pi^2*m)',
      m:'Fc*tau^2/(4*pi^2*r)'
    },
    tags:['circular']
  },

  // τ = R C ;  C = ε A / δ
  {
    id:'l8g8_tau_RC_y_C_epsA_sobre_delta',
    nivel:8, categoria:'electricidad',
    display:'τ = R C;  C = ε A / δ',
    tex:'\\tau=RC,\\quad C=\\tfrac{\\varepsilon A}{\\delta}',
    vars:['tau','R','C','eps','A','delta'],
    solutions:{
      tau:'R*C',
      C:'eps*A/delta',
      R:'tau/C',
      delta:'eps*A*R/tau',
      eps:'tau*delta/(R*A)',
      A:'tau*delta/(R*eps)'
    },
    tags:['RC']
  },

  // E_p = ρ V g h
  {
    id:'l8g9_Ep_rhoVgh',
    nivel:8, categoria:'fisica',
    display:'E_p = ρ V g h',
    tex:'E_{p}=\\rho V g h',
    vars:['Ep','rho','V','g','h'],
    solutions:{
      Ep:'rho*V*g*h',
      V:'Ep/(rho*g*h)',
      rho:'Ep/(V*g*h)',
      h:'Ep/(rho*V*g)',
      g:'Ep/(rho*V*h)'
    },
    tags:['energía']
  },

  // α = κ x / μ
  {
    id:'l8g10_alpha_kappa_x_sobre_mu',
    nivel:8, categoria:'fisica',
    display:'α = κ x / μ',
    tex:'\\alpha=\\tfrac{\\kappa x}{\\mu}',
    vars:['alpha','kappa','x','mu'],
    solutions:{
      alpha:'kappa*x/mu',
      kappa:'alpha*mu/x',
      x:'mu*alpha/kappa',
      mu:'kappa*x/alpha'
    },
    tags:['dinámica']
  },

  // p = m υ ;  υ = υ0 + α t
  {
    id:'l8g11_p_m_ups_y_ups_ups0_mas_alpha_t',
    nivel:8, categoria:'fisica',
    display:'p = m υ;  υ = υ₀ + α t',
    tex:'p=m\\upsilon,\\quad \\upsilon=\\upsilon_{0}+\\alpha t',
    vars:['p','m','upsilon','upsilon0','alpha','t'],
    solutions:{
      p:'m*(upsilon0 + alpha*t)',
      upsilon:'upsilon0 + alpha*t',
      m:'p/upsilon',
      t:'(upsilon - upsilon0)/alpha',
      alpha:'(upsilon - upsilon0)/t',
      upsilon0:'upsilon - alpha*t'
    },
    tags:['momento lineal']
  },

  // υ = λ f ;  f = 1/τ
  {
    id:'l8g12_ups_lambda_f_y_f_1_sobre_tau',
    nivel:8, categoria:'ondas',
    display:'υ = λ f;  f = 1/τ',
    tex:'\\upsilon=\\lambda f,\\quad f=\\tfrac1\\tau',
    vars:['upsilon','lambda','f','tau'],
    solutions:{
      upsilon:'lambda/tau',
      lambda:'upsilon*tau',
      f:'1/tau',
      tau:'lambda/upsilon'
    },
    tags:['ondas']
  },

  // U = 1/2 κ x^2 ;  F = κ x
  {
    id:'l8g13_U_12_kappa_x2_y_F_kappa_x',
    nivel:8, categoria:'fisica',
    display:'U = (1/2) κ x²;  F = κ x',
    tex:'U=\\tfrac12 \\kappa x^{2},\\quad F=\\kappa x',
    vars:['U','kappa','x','F'],
    solutions:{
      U:'0.5*F*x',
      x:'2*U/F',
      F:'kappa*x',
      kappa:'2*U/x^2'
    },
    tags:['resorte']
  },

  // U = 1/2 C V^2 ;  C = ε A / δ
  {
    id:'l8g14_U_12_CV2_y_C_epsA_sobre_delta',
    nivel:8, categoria:'electricidad',
    display:'U = (1/2) C V²;  C = ε A / δ',
    tex:'U=\\tfrac12 CV^{2},\\quad C=\\tfrac{\\varepsilon A}{\\delta}',
    vars:['U','C','V','eps','A','delta'],
    solutions:{
      U:'0.5*(eps*A/delta)*V^2',
      V:'sqrt(2*U*delta/(eps*A))',
      C:'2*U/V^2',
      delta:'eps*A*V^2/(2*U)',
      eps:'2*U*delta/(A*V^2)',
      A:'2*U*delta/(eps*V^2)'
    },
    tags:['energía','capacitor']
  },

  // Φ = κ A Δθ / L ;  A = π r^2
  {
    id:'l8g15_Phi_kappaA_DeltaTheta_sobre_L_y_A_pi_r2',
    nivel:8, categoria:'fisica',
    display:'Φ = κ A Δθ / L;  A = π r²',
    tex:'\\Phi=\\tfrac{\\kappa A\\,\\Delta\\theta}{L},\\quad A=\\pi r^{2}',
    vars:['Phi','kappa','A','DeltaTheta','L','r'],
    solutions:{
      Phi:'kappa*pi*r^2*DeltaTheta/L',
      r:'sqrt(Phi*L/(kappa*pi*DeltaTheta))',
      A:'Phi*L/(kappa*DeltaTheta)',
      kappa:'Phi*L/(A*DeltaTheta)',
      DeltaTheta:'Phi*L/(kappa*A)',
      L:'kappa*A*DeltaTheta/Phi'
    },
    tags:['conducción']
  },

  // vₑ = √(2 g r)
  {
    id:'l8g16_ve_raiz_2gr',
    nivel:8, categoria:'fisica',
    display:'vₑ = √(2 g r)',
    tex:'v_{e}=\\sqrt{2gr}',
    vars:['ve','g','r'],
    solutions:{
      ve:'sqrt(2*g*r)',
      r:'ve^2/(2*g)',
      g:'ve^2/(2*r)'
    },
    tags:['gravitación']
  },

  // Q = C V (1 - e^{-t/τ})
  {
    id:'l8g17_Q_CV_1_exp_menos_t_sobre_tau',
    nivel:8, categoria:'electricidad',
    display:'Q = C V (1 - e^{-t/τ})',
    tex:'Q=CV\\,(1-e^{-t/\\tau})',
    vars:['Q','C','V','t','tau'],
    solutions:{
      Q:'C*V*(1 - exp(-t/tau))',
      t:'-tau*ln(1 - Q/(C*V))',
      tau:'-t/ln(1 - Q/(C*V))',
      C:'Q/(V*(1 - exp(-t/tau)))',
      V:'Q/(C*(1 - exp(-t/tau)))'
    },
    tags:['RC','exponencial']
  },

  // N = N0 e^{-λ t} ;  A = λ N
  {
    id:'l8g18_N_N0_exp_menos_lambda_t_y_A_lambdaN',
    nivel:8, categoria:'fisica',
    display:'N = N₀ e^{-λ t};  A = λ N',
    tex:'N=N_{0}e^{-\\lambda t},\\quad A=\\lambda N',
    vars:['N','N0','lambda','t','A'],
    solutions:{
      N:'N0*exp(-lambda*t)',
      A:'lambda*N0*exp(-lambda*t)',
      t:'(1/lambda)*ln(lambda*N0/A)',
      lambda:'A/N',
      N0:'A*exp(lambda*t)/lambda'
    },
    tags:['decaimiento']
  },

  // ω = 2π f ;  f = 1/τ
  {
    id:'l8g19_omega_2pi_f_y_f_1_sobre_tau',
    nivel:8, categoria:'fisica',
    display:'ω = 2π f;  f = 1/τ',
    tex:'\\omega=2\\pi f,\\quad f=\\tfrac1\\tau',
    vars:['omega','f','tau'],
    solutions:{
      omega:'2*pi*f',
      f:'1/tau',
      tau:'1/f'
    },
    tags:['frecuencia','periodo']
  },

  // P = σ A T^4 ;  A = 4π r^2
  {
    id:'l8g20_P_sigmaAT4_y_A_4pi_r2',
    nivel:8, categoria:'fisica',
    display:'P = σ A T⁴;  A = 4π r²',
    tex:'P=\\sigma AT^{4},\\quad A=4\\pi r^{2}',
    vars:['P','sigma','A','T','r'],
    solutions:{
      P:'sigma*A*T^4',
      A:'P/(sigma*T^4)',
      T:'(P/(sigma*A))^(1/4)',
      r:'sqrt(P/(4*pi*sigma*T^4))',
      sigma:'P/(A*T^4)'
    },
    tags:['radiación']
  },

























































  
  
  ];

  function renderTex(el, tex){
    el.innerHTML = `<span class="tex">\\[${tex}\\]</span>`;
    if(window.MathJax && MathJax.typesetPromise){ MathJax.typesetPromise([el]).catch(()=>{}); }
  }
  function texFromExpr(expr){
    try{ const node=math.parse(expr); return node.toTex({parenthesis:'auto', implicit:'show'}); }catch(e){ return expr; }
  }
  function formulaMatches(b, cat, tema, nivel){
    const catOk = (cat==='todas' ? true : b.categoria===cat);
    const temaOk = (tema==='todos' ? true : (b.tags||[]).includes(tema));
    const nivelOk = (nivel===0 ? true : (b.nivel||1)===nivel);
    return catOk && temaOk && nivelOk;
  }
  function renderBankList(){
    const cat=$('#filt-categoria').value||'todas';
    const tema=$('#filt-tema').value||'todos';
    const nivel=parseInt($('#filt-nivel').value||'0',10);
    const lista = $('#lista-formulas'); lista.innerHTML='';
    const filtered = BANK.filter(b=> formulaMatches(b,cat,tema,nivel));
    $('#badge-count').textContent = filtered.length + ' fórmulas';
    filtered.forEach(b=>{
      const el=document.createElement('div'); el.className='card'; el.style.display='flex'; el.style.justifyContent='space-between'; el.style.alignItems='center';
      el.innerHTML = `<div>
        <div class="small" style="font-weight:700">${b.display}</div>
        <div class="muted small">Nivel ${b.nivel||1} · Vars: ${b.vars.join(', ')}</div>
      </div>
      <button data-id="${b.id}" class="btn-usar">Usar</button>`;
      lista.appendChild(el);
    });
    $$('.btn-usar').forEach(btn=> btn.addEventListener('click', ()=> startFromId(btn.dataset.id)));
  }
  $('#filt-categoria').addEventListener('change', renderBankList);
  $('#filt-tema').addEventListener('change', renderBankList);
  $('#filt-nivel').addEventListener('change', renderBankList);

  const greekMap = { 'π':'pi', 'λ':'lambda', 'ρ':'rho', 'θ':'theta', 'α':'alpha', 'β':'beta', 'γ':'gamma', 'μ':'mu', 'σ':'sigma', 'Δ':'delta', 'Ω':'Omega' };
  function sanitizeInput(raw){
    let s=(raw||'').trim().replace(/\s+/g,'');
    s=s.replace(/^([A-Za-z_][A-Za-z0-9_]*)={1,2}/,'');
    s=s.replace(/[πλρθαβγμσΔΩ]/g, ch => greekMap[ch] || ch);
    return s;
  }
  function normalizeCase(expr, allowed){
    const tokens = expr.match(/[A-Za-z_][A-Za-z0-9_]*/g) || [];
    const map = {}; allowed.forEach(v=> map[v.toLowerCase()]=v);
    let out=expr;
    tokens.forEach(t=>{ const ref=map[t.toLowerCase()]; if(ref && t!==ref){ out=out.replace(new RegExp(`\\b${t}\\b`,'g'), ref); } });
    return out;
  }
  function genAssignments(vars, constraints, target){
    const rnd=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
    const asg={}; const nonZero=new Set([...(constraints?.nonZero||[])]); const positive=new Set([...(constraints?.positive||[])]);
    for(const v of vars){ if(v===target) continue; let val=rnd(2,10); if(positive.has(v)) val=Math.max(2,val); if(nonZero.has(v) && val===0) val=3; asg[v]=val; }
    if(vars.includes('pi')) asg['pi']=Math.PI; return asg;
  }
  function equivalent(Aexpr, Bexpr, vars, constraints, target){
    for(let i=0;i<8;i++){
      const scope=genAssignments(vars,constraints,target);
      let A,B;
      try{ A=math.evaluate(Aexpr, scope); B=math.evaluate(Bexpr, scope); if(!isFinite(A)||!isFinite(B)) return {ok:false,msg:'Valores no finitos.'}; }
      catch(e){ return {ok:false, msg:'Error: '+(e.message||e)}; }
      const diff=Math.abs(A-B), tol=1e-6*(1+Math.max(Math.abs(A),Math.abs(B)));
      if(diff>tol) return {ok:false, msg:`No coincide (p.ej. con ${JSON.stringify(scope)})`};
    }
    return {ok:true};
  }
  function checkSymbols(expr, item, target){
    const reTarget = new RegExp(`(^|[^A-Za-z0-9_])${target}([^A-Za-z0-9_]|$)`);
    if(reTarget.test(expr)) return `No incluyas la variable objetivo "${target}".`;
    const allowed=new Set(item.vars.filter(v=>v!==target).concat(['pi','e','exp']));
    const tokens=(expr.match(/[A-Za-z_][A-Za-z0-9_]*/g)||[]).filter(t=>!math[t]);
    for(const t of tokens){
      if(!allowed.has(t) && !['sqrt','sin','cos','tan','log','ln','abs','exp','min','max','pow'].includes(t))
        return `Símbolo no permitido "${t}". Usa: ${Array.from(allowed).join(', ')}.`;
    }
    return null;
  }

  // ===== Resumen práctica + por nivel (por perfil) =====
  let practice = {"tries":0,"ok":0,"fail":0,"streak":0};
  let practiceLevels = {}; // {nivel: {tries, ok, fail}}
  function savePractice(){
    if(!PROFILE) return;
    localStorage.setItem(key('practice'), JSON.stringify(practice));
    localStorage.setItem(key('practice_levels'), JSON.stringify(practiceLevels));
  }
  function prettyPct(n){ return (n*100).toFixed(0)+'%'; }
  function updateLevelsTable(){
    const tbody=$('#levels-body'); tbody.innerHTML='';
    const lvls=[1,2,3,4,5,6,7,8];
    lvls.forEach(L=>{
      const r=practiceLevels[L]||{tries:0,ok:0,fail:0};
      const acc = r.tries ? (r.ok/r.tries) : 0;
      const tr=document.createElement('tr');
      tr.innerHTML = `<td>${L}</td><td>${r.tries}</td><td>${r.ok}</td><td>${r.fail}</td><td>${prettyPct(acc)}</td>`;
      tbody.appendChild(tr);
    });
  }
  function updatePracticeSummary(){
    const p=practice; const acc = p.tries? Math.round(100*p.ok/p.tries):0;
    $('#practice-summary').textContent = `Aciertos: ${p.ok} · Fallos: ${p.fail} · Intentos: ${p.tries} · Precisión: ${acc}% · Racha: ${p.streak}`;
    $('#practice-acc').textContent = `${acc}%`;
    $('#btn-revelar').disabled = !(p.fail>10);
    $('#btn-revelar').title = p.fail>10 ? 'Puedes revelar' : `Disponible tras 10 fallos (llevas ${p.fail})`;
    updateLevelsTable();
  }

  function poolFromNivelPractice(){
    const nivelSel=parseInt($('#nivel').value||'0',10);
    const cat=$('#filt-categoria').value||'todas';
    const tema=$('#filt-tema').value||'todos';
    return BANK.filter(b=> formulaMatches(b,cat,tema,nivelSel));
  }
  function pickRandom(list){ return list[Math.floor(Math.random()*list.length)]; }
  function startNew(){
    const list = poolFromNivelPractice();
    const item = (list.length? pickRandom(list) : pickRandom(BANK));
    const targets = Object.keys(item.solutions);
    const target = targets[Math.floor(Math.random()*targets.length)];
    current={item,target};
    showProblem();
  }
  function startFromId(id){
    const item=BANK.find(x=>x.id===id);
    const targets=Object.keys(item.solutions);
    current={item,target:targets[Math.floor(Math.random()*targets.length)]};
    showProblem();
  }
  function showProblem(){
    $('#estado').classList.add('hidden');
    $('#respuesta').value=''; updatePracticePreview();
    renderTex($('#equation'), current.item.tex || current.item.display);
    $('#target').textContent='Despeja: '+current.target+' en la ecuación:';
    renderVarChips();
  }

  function showStatusTeX(title, exprLeft, exprRight, type){
    const box=$('#estado');
    const left = exprLeft ? texFromExpr(exprLeft) : '';
    const right = exprRight ? texFromExpr(exprRight) : '';
    const tex = (left||right) ? `\\[${left}${right?(' = '+right):''}\\]` : '';
    box.className='status '+(type||'warn');
    box.innerHTML = `<div style="margin-bottom:4px">${title}</div>${tex?('<div class="small">'+tex+'</div>'):''}`;
    box.classList.remove('hidden');
    if(window.MathJax && MathJax.typesetPromise){ MathJax.typesetPromise([box]).catch(()=>{}); }
  }

  // Panel teclado
  const layouts = {
    numbers: [
      ['7','8','9','/','(',')','^','sqrt( )','<-','del'],
      ['4','5','6','*','[',']','.',',','^2','^(-1)'],
      ['1','2','3','-','{','}','=','==','<=','>='],
      ['0','+','%','min( , )','max( , )','abs( )','ln( )','exp( )','pow( , )','()']
    ],
    symbols: [
      ['+','-','*','/','^','%','(',')','[',']'],
      ['{','}','=','==','!=','<','>','<=','>='],
      ['. ',',','|','||','&','&&',';','_',':'],
      ['sqrt( )','min( , )','max( , )','abs( )','ln( )','log( )','exp( )','pow( , )','()','<-']
    ],
    alphabet: (function(){
      const rows=[]; const lower='abcdefghijklmnopqrstuvwxyz'.split(''); const upper='ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
      rows.push(lower.slice(0,10)); rows.push(lower.slice(10,20)); rows.push(lower.slice(20).concat(['_']));
      rows.push(upper.slice(0,10)); rows.push(upper.slice(10,20)); rows.push(upper.slice(20));
      return rows;
    })(),
    greek: [
      ['α:alpha','β:beta','γ:gamma','θ:theta','λ:lambda','μ:mu','ρ:rho','σ:sigma','Δ:delta','Ω:Omega'],
      ['π:pi','√:sqrt( )','·:*','÷:/','^','()','<-','del']
    ]
  };
  function insertAtCursor(input, text, cursorShift=0){
    const start = input.selectionStart ?? input.value.length;
    const end = input.selectionEnd ?? input.value.length;
    const before = input.value.slice(0, start);
    const after = input.value.slice(end);
    input.value = before + text + after;
    const pos = start + text.length + cursorShift;
    input.setSelectionRange(pos, pos);
    input.dispatchEvent(new Event('input', {bubbles:true}));
    input.focus();
  }
  function buildPanel(panelId, gridId, inputSel){
    const panel=$(panelId), grid=$(gridId), input=$(inputSel);
    function render(which){
      grid.innerHTML='';
      layouts[which].forEach(row=> row.forEach(item=>{
        let label=item, insert=item, shift=0;
        if(item.includes(':')){ const [lab,val]=item.split(':'); label=lab; insert=val; }
        if(item==='sqrt( )'){ insert='sqrt()'; shift=-1; }
        if(item==='min( , )'){ insert='min(,)'; shift=-2; }
        if(item==='max( , )'){ insert='max(,)'; shift=-2; }
        if(item==='abs( )'){ insert='abs()'; shift=-1; }
        if(item==='ln( )' || item==='log( )'){ insert='log()'; shift=-1; }
        if(item==='exp( )'){ insert='exp()'; shift=-1; }
        if(item==='pow( , )'){ insert='pow(,)'; shift=-2; }
        if(item==='()'){ insert='()'; shift=-1; }
        const btn=document.createElement('div'); btn.className='kbtn'; if(['sqrt( )','min( , )','max( , )','abs( )','ln( )','log( )','exp( )','pow( , )','()','<-','del','^2','^(-1)'].includes(item)) btn.classList.add('wide');
        btn.textContent=label;
        btn.addEventListener('click', ()=>{
          if(item==='<-'){ const p=(input.selectionStart||0)-1; input.setSelectionRange(Math.max(0,p),Math.max(0,p)); input.focus(); return; }
          if(item==='del'){ const s=input.selectionStart||0, e=input.selectionEnd||0; if(s===e && s>0){ input.value=input.value.slice(0,s-1)+input.value.slice(e); input.setSelectionRange(s-1,s-1); } else { input.value=input.value.slice(0,s)+input.value.slice(e); input.setSelectionRange(s,s); } input.dispatchEvent(new Event('input',{bubbles:true})); input.focus(); return; }
          if(item==='^2'){ insertAtCursor(input,'^2'); return; }
          if(item==='^(-1)'){ insertAtCursor(input,'^(-1)'); return; }
          if(insert==='e'){ insert='exp(1)'; }
          insertAtCursor(input, insert, shift);
        });
        grid.appendChild(btn);
      }));
    }
    render('numbers');
    panel.querySelectorAll('.panel-tab').forEach(t=> t.addEventListener('click', ()=>{
      panel.querySelectorAll('.panel-tab').forEach(x=>x.classList.remove('active')); t.classList.add('active'); render(t.dataset.tab);
    }));
  }
  buildPanel('#panel', '#panel-grid', '#respuesta');
  buildPanel('#panel-exam', '#panel-grid-exam', '#exam-ans');

  function renderVarChips(){
    const box=$('#vars-chips'); box.innerHTML='';
    (current?.item.vars||[]).forEach(v=>{
      const chip=document.createElement('span'); chip.className='badge'; chip.textContent=v; chip.title='Insertar variable';
      chip.addEventListener('click', ()=> insertAtCursor($('#respuesta'), v, 0));
      box.appendChild(chip);
    });
  }

  // Práctica
  let current=null;
  function showStatus(html, type){ const box=$('#estado'); box.className='status '+(type||'warn'); box.innerHTML=html; box.classList.remove('hidden'); }
  $('#btn-nuevo').addEventListener('click', startNew);
  $('#btn-revelar').addEventListener('click', ()=>{
    if(!current) return;
    const truth=current.item.solutions[current.target];
    showStatusTeX('Solución:', current.target, truth, 'warn');
  });
  $('#btn-limpiar').addEventListener('click', ()=>{ $('#respuesta').value=''; updatePracticePreview(); $('#estado').classList.add('hidden'); $('#respuesta').focus(); });
  $('#btn-check').addEventListener('click', ()=>{
    if(!PROFILE){ openProfilesOverlay(); return; }
    if(!current) startNew();
    let ans=sanitizeInput($('#respuesta').value);
    const allowed=new Set(current.item.vars.filter(v=>v!==current.target).concat(['pi','e','exp']));
    ans = normalizeCase(ans, Array.from(allowed));
    const symErr=checkSymbols(ans,current.item,current.target);
    const L=current.item.nivel||1;
    if(symErr){ showStatus(symErr,'err');
      practice.fail++; practice.tries++; practice.streak=0;
      (practiceLevels[L]||(practiceLevels[L]={tries:0,ok:0,fail:0})).fail++; practiceLevels[L].tries++;
      savePractice(); updatePracticeSummary(); return; }
    const truth=current.item.solutions[current.target];
    const res=equivalent(ans,truth,current.item.vars,current.item.constraints||{},current.target);
    if(res.ok){ showStatusTeX('✅ ¡Correcto!', current.target, truth, 'ok');
      practice.ok++; practice.tries++; practice.streak++;
      (practiceLevels[L]||(practiceLevels[L]={tries:0,ok:0,fail:0})).ok++; practiceLevels[L].tries++;
      savePractice(); updatePracticeSummary(); setTimeout(startNew, 800); }
    else { showStatus('❌ Incorrecto. '+(res.msg||''),'err');
      practice.fail++; practice.tries++; practice.streak=0;
      (practiceLevels[L]||(practiceLevels[L]={tries:0,ok:0,fail:0})).fail++; practiceLevels[L].tries++;
      savePractice(); updatePracticeSummary(); }
  });
  $('#nivel').addEventListener('change', ()=>{ startNew(); });

  // Banco
  $('#filt-categoria').addEventListener('change', ()=>{ renderBankList(); });
  $('#filt-tema').addEventListener('change', ()=>{ renderBankList(); });
  $('#filt-nivel').addEventListener('change', ()=>{ renderBankList(); });

  // Export Resumen práctica (incluye tabla por nivel)
  $('#btn-export-practice').addEventListener('click', ()=>{
    const name=requireStudentName(); if(!name) return;
    const p=practice;
    const rows=[['estudiante','intentos','aciertos','fallos','precision','racha'],
                [name, p.tries, p.ok, p.fail, p.tries? (p.ok/p.tries).toFixed(4):'0', p.streak],
                [], ['nivel','intentos','aciertos','fallos','precision']];
    for(let L=1; L<=8; L++){ const r=practiceLevels[L]||{tries:0,ok:0,fail:0}; rows.push([L, r.tries, r.ok, r.fail, r.tries?(r.ok/r.tries).toFixed(4):'0']); }
    const csv = rows.map(r=>r.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(',')).join('\n');
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob); const a=document.createElement('a');
    a.href=url; a.download=`resumen_practica_${name.replace(/\s+/g,'_')}.csv`; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });
  $('#btn-export-practice-pdf').addEventListener('click', ()=>{
    const name=requireStudentName(); if(!name) return;
    const { jsPDF } = window.jspdf||{}; if(!jsPDF){ alert('jsPDF no cargado.'); return; }
    const p=practice; const acc = p.tries? Math.round(100*p.ok/p.tries):0;
    const doc = new jsPDF({unit:'pt', format:'a4'}); const W=595.28, H=841.89; let y=72;
    function header(){
      doc.setFillColor(14,165,233); doc.rect(0,0,W,40,'F');
      doc.setTextColor(255,255,255); doc.setFont('helvetica','bold'); doc.setFontSize(16);
      doc.text('Resumen de práctica — Despejador de Variables', 48, 26);
      doc.setTextColor(0,0,0); doc.setFont('helvetica','normal'); doc.setFontSize(11);
      y=64;
    }
    header();
    doc.text(`Estudiante: ${name}`, 48, y); y+=18;
    doc.text(`Fecha: ${new Date().toLocaleString()}`, 48, y); y+=24;
    doc.text(`Intentos: ${p.tries}`, 48, y); y+=18;
    doc.text(`Aciertos: ${p.ok}`, 48, y); y+=18;
    doc.text(`Fallos: ${p.fail}`, 48, y); y+=18;
    doc.text(`Precisión: ${acc}%`, 48, y); y+=18;
    doc.text(`Racha: ${p.streak}`, 48, y); y+=24;
    doc.setFont('helvetica','bold'); doc.text('Resultados por nivel', 48, y); y+=16;
    doc.setFont('helvetica','normal');
    const cols=['Nivel','Intentos','Aciertos','Fallos','Precisión'];
    const colX=[48, 140, 230, 320, 420];
    doc.text(cols[0], colX[0], y); doc.text(cols[1], colX[1], y); doc.text(cols[2], colX[2], y); doc.text(cols[3], colX[3], y); doc.text(cols[4], colX[4], y); y+=12;
    for(let L=1; L<=8; L++){
      const r=practiceLevels[L]||{tries:0,ok:0,fail:0}; const accL = r.tries? Math.round(100*r.ok/r.tries):0;
      if(y>H-72){ doc.addPage(); header(); }
      doc.text(String(L), colX[0], y);
      doc.text(String(r.tries), colX[1], y);
      doc.text(String(r.ok), colX[2], y);
      doc.text(String(r.fail), colX[3], y);
      doc.text(String(accL)+'%', colX[4], y);
      y+=14;
    }
    const pageCount = doc.internal.getNumberOfPages();
    for(let i=1;i<=pageCount;i++){
      doc.setPage(i);
      doc.setFont('helvetica','italic'); doc.setFontSize(10);
      doc.text(`${name} — Resumen de práctica`, 48, H-28);
      doc.text(`Página ${i} de ${pageCount}`, W-140, H-28);
    }
    doc.save(`resumen_practica_${name.replace(/\s+/g,'_')}.pdf`);
  });
  $('#btn-reset-practice').addEventListener('click', ()=>{
    if(!PROFILE){ openProfilesOverlay(); return; }
    if(confirm('¿Borrar resumen de práctica de este perfil?')){
      practice={tries:0,ok:0,fail:0,streak:0}; practiceLevels={}; savePractice(); updatePracticeSummary();
    }});

  // ===== EXAMEN =====
  let exam=null, timerH=null;
  function buildExamPool(cat, tema, nivel, n){
    const pool = BANK.filter(b=> formulaMatches(b,cat,tema,nivel));
    const items=[]; for(let i=0;i<n;i++){ const it=pool[Math.floor(Math.random()*pool.length)]||BANK[0]; const targets=Object.keys(it.solutions); const target=targets[Math.floor(Math.random()*targets.length)]; items.push({item:it, target}); }
    return items;
  }
  function renderExamQ(){ if(!exam) return; const q=exam.pool[exam.idx]; $('#exam-progress').textContent=(exam.idx+1)+'/'+exam.n; renderTex($('#exam-eq'), q.item.tex||q.item.display); $('#exam-target').textContent='Despeja: '+q.target+' en la ecuación:'; $('#exam-ans').value=''; updateExamPreview(); }
  function showExamStatus(html,type){ const box=$('#exam-status'); box.className='status '+(type||'warn'); box.innerHTML=html; box.classList.remove('hidden'); }
  function tick(){
    if(!exam) return;
    const left=Math.max(0, exam.endAt - Date.now());
    const mm=String(Math.floor(left/60000)).padStart(2,'0'); const ss=String(Math.floor((left%60000)/1000)).padStart(2,'0');
    $('#exam-timer').textContent=`⏱️ ${mm}:${ss}`;
    if(left<=0){ endExam('tiempo agotado'); return; }
    timerH=setTimeout(tick, 250);
  }
  function startExam(){
    const name = requireStudentName(); if(!name) return;
    const cat=$('#exam-cat').value||'todas'; const tema=$('#exam-tema').value||'todos';
    const n=Math.max(3, Math.min(50, parseInt($('#exam-n').value||10)));
    const minutes=Math.max(1, Math.min(120, parseInt($('#exam-min').value||15)));
    const nivel=parseInt($('#exam-nivel').value||'0',10);
    exam={ name, cat, tema, n, minutes, nivel, idx:0, pool: buildExamPool(cat,tema,nivel,n), answers:[], endAt: Date.now()+minutes*60000 };
    ['#btn-exam-check','#btn-exam-skip','#btn-exam-end','#btn-exam-pdf'].forEach(sel=> $(sel).disabled=false);
    $('#exam-summary').textContent=''; $('#exam-status').classList.add('hidden');
    renderExamQ(); tick();
  }
  function gradeExamAnswer(){
    if(!exam) return;
    const q=exam.pool[exam.idx]; let ans=sanitizeInput($('#exam-ans').value);
    const allowed=new Set(q.item.vars.filter(v=>v!==q.target).concat(['pi','e','exp'])); ans = normalizeCase(ans, Array.from(allowed));
    const symErr=checkSymbols(ans,q.item,q.target); if(symErr){ showExamStatus(symErr,'err'); return; }
    const truth=q.item.solutions[q.target]; const ok=equivalent(ans,truth,q.item.vars,q.item.constraints||{},q.target).ok;
    showExamStatus(ok?'✅ Correcto':'❌ Incorrecto', ok?'ok':'err');
    exam.answers.push({i:exam.idx+1,id:q.item.id,formula:q.item.display,tex:q.item.tex,target:q.target,ans,ok,correct:truth});
    exam.idx++; if(exam.idx>=exam.n){ endExam(); } else { renderExamQ(); }
  }
  function skipExam(){ if(!exam) return; const q=exam.pool[exam.idx]; exam.answers.push({i:exam.idx+1,id:q.item.id,formula:q.item.display,tex:q.item.tex,target:q.target,ans:'',ok:false,skipped:true,correct:q.item.solutions[q.target]}); exam.idx++; if(exam.idx>=exam.n){ endExam(); } else { renderExamQ(); } }
  function endExam(reason){
    ['#btn-exam-check','#btn-exam-skip','#btn-exam-end'].forEach(sel=> $(sel).disabled=true);
    clearTimeout(timerH); timerH=null;
    const correct=exam.answers.filter(a=>a.ok).length; const acc=exam.n?(correct/exam.n):0;
    $('#exam-summary').textContent=`Examen finalizado${reason?(' ('+reason+')'):''}. Puntuación: ${correct}/${exam.n} (${(acc*100).toFixed(0)}%).`;
  }
  $('#btn-start-exam').addEventListener('click', startExam);
  $('#btn-exam-check').addEventListener('click', gradeExamAnswer);
  $('#btn-exam-skip').addEventListener('click', skipExam);
  $('#btn-exam-end').addEventListener('click', ()=> endExam('finalizado manualmente'));
  $('#btn-exam-pdf').addEventListener('click', ()=>{
    if(!exam){ alert('No hay examen en curso/finalizado.'); return; }
    const { jsPDF } = window.jspdf||{}; if(!jsPDF){ alert('jsPDF no cargado.'); return; }
    const W=595.28, H=841.89; const doc = new jsPDF({unit:'pt', format:'a4'}); let y=64;
    function header(){
      doc.setFillColor(14,165,233); doc.rect(0,0,W,40,'F');
      doc.setTextColor(255,255,255); doc.setFont('helvetica','bold'); doc.setFontSize(16);
      doc.text('Cuadernillo de Examen — Despejador de Variables', 48, 26);
      doc.setTextColor(0,0,0); doc.setFont('helvetica','normal'); doc.setFontSize(11); y=64;
      doc.text(`Estudiante: ${exam.name}   Fecha: ${new Date().toLocaleString()}`, 48, y); y+=18;
      doc.text(`Categoría: ${exam.cat}   Tema: ${exam.tema}   Nivel: ${exam.nivel}`, 48, y); y+=18;
      const correct=exam.answers.filter(a=>a.ok).length; const acc=exam.n?(correct/exam.n):0;
      doc.text(`Preguntas: ${exam.n}   Minutos: ${exam.minutes}   Puntuación: ${correct}/${exam.n} (${(acc*100).toFixed(0)}%)`, 48, y); y+=20;
    }
    function ensure(h){ if(y+h > H-64){ doc.addPage(); header(); } }
    function card(q){
      const hEst=88; ensure(hEst+16);
      // Marco
      doc.setDrawColor(200); doc.setLineWidth(0.8); doc.roundedRect(40, y, W-80, hEst, 6, 6);
      let x=50, yy=y+16;
      doc.setFont('helvetica','bold'); doc.setFontSize(12); doc.text(`Pregunta ${q.i}`, x, yy);
      yy+=16; doc.setFont('helvetica','normal');
      const eqText = (q.tex||q.formula).replace(/\\\\/g,'\\');
      const eqWrapped = doc.splitTextToSize(`Ecuación: ${eqText}`, W-120);
      doc.text(eqWrapped, x, yy); yy += eqWrapped.length*14;
      doc.text(`Objetivo: despejar ${q.target}`, x, yy); yy+=16;
      const ans = q.ans ? q.ans : '(omitida)';
      const sol = `${q.target} = ${q.correct}`;
      const okStr = q.ok? '✓ Correcta' : '✗ Incorrecta';
      doc.text(`Respuesta del estudiante: ${ans}`, x, yy); yy+=14;
      doc.text(`Solución esperada: ${sol}`, x, yy); yy+=14;
      doc.setFont('helvetica','bold'); doc.text(okStr, x, yy);
      y += hEst + 16;
    }
    header();
    exam.answers.forEach(card);
    const totalPages = doc.internal.getNumberOfPages();
    for(let i=1;i<=totalPages;i++){
      doc.setPage(i);
      doc.setFont('helvetica','italic'); doc.setFontSize(10);
      doc.text(`${exam.name} — Examen`, 48, H-28);
      doc.text(`Página ${i} de ${totalPages}`, W-140, H-28);
    }
    const fname = `examen_${exam.name.replace(/\s+/g,'_')}.pdf`; doc.save(fname);
  });

  // Tabs
  $$('.tab').forEach(tab=> tab.addEventListener('click', ()=>{
    $$('.tab').forEach(x=>x.classList.remove('active')); tab.classList.add('active');
    ['#tab-practica','#tab-examen'].forEach(id=> $(id)?.classList.add('hidden'));
    const id = '#'+tab.dataset.tab; $(id)?.classList.remove('hidden');
  }));

  
  // ===== Vista previa de entrada (práctica) =====
  function updatePracticePreview(){
    const input = $('#respuesta');
    const box = $('#respuesta-preview');
    const texEl = $('#preview-tex-practice');
    const msgEl = $('#preview-msg-practice');
    const raw = input.value || '';
    if(!raw.trim()){
      box.classList.add('hidden'); msgEl.textContent=''; texEl.innerHTML=''; return;
    }
    if(!current){ box.classList.add('hidden'); return; }
    let ans = sanitizeInput(raw);
    const allowed = new Set(current.item.vars.filter(v=>v!==current.target).concat(['pi','e','exp']));
    ans = normalizeCase(ans, Array.from(allowed));
    const symErr = checkSymbols(ans, current.item, current.target);
    renderTex(texEl, texFromExpr(ans));
    msgEl.textContent = symErr ? symErr : '';
    box.classList.remove('hidden');
  }
  // ===== Vista previa de entrada (examen) =====
  function updateExamPreview(){
    const input = $('#exam-ans');
    const box = $('#exam-preview');
    const texEl = $('#preview-tex-exam');
    const msgEl = $('#preview-msg-exam');
    const raw = input.value || '';
    if(!raw.trim()){
      box.classList.add('hidden'); msgEl.textContent=''; texEl.innerHTML=''; return;
    }
    if(!exam){ box.classList.add('hidden'); return; }
    const q = exam.pool[exam.idx];
    let ans = sanitizeInput(raw);
    const allowed = new Set(q.item.vars.filter(v=>v!==q.target).concat(['pi','e','exp']));
    ans = normalizeCase(ans, Array.from(allowed));
    const symErr = checkSymbols(ans, q.item, q.target);
    renderTex(texEl, texFromExpr(ans));
    msgEl.textContent = symErr ? symErr : '';
    box.classList.remove('hidden');
  }

// Init
  function init(){
    $('#respuesta').addEventListener('input', updatePracticePreview);
    $('#exam-ans').addEventListener('input', updateExamPreview);

    renderBankList();
    ensureProfileSelected();
  }
  if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', init); } else { init(); }
})();
</script>
</body>
</html>
